<md-content 
    class="md-padding"
    layout-padding
    flex>

    <div layout-gt-sm="row" layout="column">
        <mb-titled-block 
            mb-title="Avatar"
            mb-progress="ctrl.avatarLoading"
            flex-gt-sm="50" 
            layout="column"
            layout-margin>
            <div
                layout="row"
                layout-align="center start">
                <lf-ng-md-file-input 
                    ng-if="ctrl.avatarState === 'edit'"
                    lf-files="ctrl.avatarFiles"
                    accept="image/*"
                    progress
                    preview
                    drag>
                </lf-ng-md-file-input>
                <img 
                    ng-if="ctrl.avatarState === 'normal'"
                    width="60%"
                    ng-src="/api/v2/user/accounts/{{ctrl.user.id}}/avatar" 
                    ng-src-error="https://www.gravatar.com/avatar/{{app.user.current.id|wbmd5}}?d=identicon&size=32"/>
            </div>
            <div 
                layout="column" layout-align="center none"
                layout-gt-xs="row" layout-align-gt-xs="end center"
                ng-if="ctrl.avatarState === 'normal'">
                <md-button 
                    class="md-raised md-primary"
                    ng-click="ctrl.editAvatar()">
                    <sapn translate="">Edit</sapn>
                </md-button>
                <md-button 
                    class="md-raised md-accent"
                    ng-click="ctrl.deleteAvatar()">
                    <sapn translate="">Delete</sapn>
                </md-button>
            </div>
            <div 
                layout="column" layout-align="center none"
                layout-gt-xs="row" layout-align-gt-xs="end center"
                ng-if="ctrl.avatarState === 'edit'">
                <md-button 
                    class="md-raised md-primary"
                    ng-click="ctrl.uploadAvatar(ctrl.avatarFiles)">
                    <sapn translate="">Save</sapn>
                </md-button>
                <md-button 
                    class="md-raised md-accent"
                    ng-click="ctrl.cancelEditAvatar()">
                    <sapn translate="">Cancele</sapn>
                </md-button>
            </div>
        </mb-titled-block>
        <!-- Contacts -->
        <mb-titled-block 
            mb-title="Public Information"
            mb-progress="ctrl.loadingProfile || ctrl.savingProfile"
            flex-gt-sm="50" 
            layout="column" 
            layout-margin>
            <form
                name="contactForm"
                layout="column" 
                layout-padding>
                <md-input-container layout-fill>
                    <label translate="">First Name</label>
                    <input ng-model="ctrl.profile.first_name">
                </md-input-container>
                <md-input-container layout-fill>
                    <label translate="">Last Name</label>
                    <input ng-model="ctrl.profile.last_name">
                </md-input-container>
                <md-input-container layout-fill>
                    <label translate="">Public Email</label>
                    <input name="email" ng-model="ctrl.profile.public_email" type="email">
                </md-input-container>
                <md-input-container layout-fill>
                    <label translate="">Language</label>
                    <input ng-model="ctrl.profile.language">
                </md-input-container>
                <md-input-container layout-fill>
                    <label translate="">Timezone</label>
                    <input ng-model="ctrl.profile.timezone">
                </md-input-container>
            </form>
            <div layout="column" 
                 layout-align="center none"
                 layout-gt-xs="row" 
                 layout-align-gt-xs="end center">
                <md-button
                    class="md-raised md-primary"
                    ng-click="save()">
                    <sapn translate="">Update</sapn>
                </md-button>
            </div>
        </mb-titled-block>
    </div>
</md-content>
