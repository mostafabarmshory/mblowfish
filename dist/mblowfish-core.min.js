"use strict";angular.module("mblowfish-core",["ngMaterial","ngAnimate","ngCookies","ngSanitize","ngRoute","seen-tenant","am-wb-core","am-wb-common","am-wb-seen-core","am-wb-seen-monitors","lfNgMdFileInput","ngStorage","vcRecaptcha","infinite-scroll","nvd3","ng-appcache","ngFileSaver","mdSteppers","angular-material-persian-datepicker"]),angular.module("mblowfish-core").config(function(){}),angular.module("mblowfish-core").config(["$mdDateLocaleProvider",function(a){moment.locale("en");var b=moment.localeData();a.months=b._months,a.shortMonths=moment.monthsShort(),a.days=b._weekdays,a.shortDays=b._weekdaysMin,a.firstDayOfWeek=b._week.dow,a.parseDate=function(a){var b=moment(a,"L",!0);return b.isValid()?b.toDate():new Date(NaN)},a.formatDate=function(a){var b=moment(a);return b.isValid()?b.format("L"):""}}]),angular.module("mblowfish-core").config(["$routeProvider","$locationProvider",function(a,b){a.when("/initialization",{templateUrl:"views/mb-initial.html",controller:"MbInitialCtrl"}).when("/preferences",{templateUrl:"views/mb-preferences.html",controller:"MbPreferencesCtrl",helpId:"preferences"}).when("/preferences/:preferenceId",{templateUrl:"views/mb-preference.html",controller:"MbPreferenceCtrl",helpId:function(a){return"preference-"+a.params.preferenceId}}),b.html5Mode(!0)}]),angular.module("mblowfish-core").config(["$mdThemingProvider",function(a){a.definePalette("amdPrimaryPalette",{50:"#FFFFFF",100:"rgb(255, 198, 197)",200:"#E75753",300:"#E75753",400:"#E75753",500:"#E75753",600:"#E75753",700:"#E75753",800:"#E75753",900:"#E75753",A100:"#E75753",A200:"#E75753",A400:"#E75753",A700:"#E75753"}),a.theme("dark").primaryPalette("amdPrimaryPalette").dark(),a.alwaysWatchTheme(!0)}]),angular.module("mblowfish-core").controller("MainController2",["$scope","$navigator","$mdSidenav","$mdBottomSheet","$log","$q","$mdToast","$usr","$route","$location","$monitor","$rootScope","$app",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){o("right")}function o(a){return c(a).toggle()}function p(){var a=d.hide()||f.when(!0);a.then(function(){o("left")})}function q(a){t.title=a.config.name,t.toggleItemsList(),t.showSimpleToast(t.title)}function r(a){function b(a){var b=this;b.actions=[{name:"Share",icon:"share",url:"https://tinc"},{name:"Star",icon:"star",url:"https://stargazers"}],b.performAction=function(b){a.hide(b)}}d.show({parent:angular.element(document.getElementById("content")),templateUrl:"views/partials/bottomSheet.html",controller:["$mdBottomSheet",b],controllerAs:"vm",bindToController:!0,targetEvent:a}).then(function(a){a&&e.debug(a.name+" clicked!")})}function s(a){g.show(g.simple().content(a).hideDelay(2e3).position("bottom right"))}var t=a;t.menuItems=[],t.selectItem=q,t.toggleItemsList=p,t.showActions=r,t.showSimpleToast=s,t.toggleSidebar=o,t.toggleRightSidebar=n,b.loadAllItems().then(function(a){t.menuItems=[].concat(a)}),k.monitor("message","count").then(function(b){a.messageMonitor=b})}]),angular.module("mblowfish-core").controller("MbAccountCtrl",["$scope","$app","$navigator",function(a,b,c){function d(){c.openPage("dashboard")}function e(a){return j.loadUser?void 0:(j.loadUser=!0,b.login(a)["catch"](function(a){j.error=a})["finally"](function(){j.loadUser=!1}))}function f(){return j.loadUser?void 0:(j.loadUser=!0,$usr.session().then(function(a){setUser(a),j.loadUser=!1},function(a){j.error=a})["finally"](function(){j.loadUser=!1}))}function g(){return j.loadUser?void 0:(j.saveUser=!0,j.user.update().then(function(){j.saveUser=!1},function(a){j.error=a,j.saveUser=!1}))}function h(b){if(!j.changingPassword){j.changingPassword=!0;var c={old:b.oldPass,"new":b.newPass,password:b.newPass};a.app.user.current.newPassword(c).then(function(){a.logout()},function(a){alert("Fail to update password:"+a.data.message)})["finally"](function(){j.changingPassword=!1})}}function i(a){return j.user.newAvatar(a[0].lfFile).then(function(){$window.location.reload()},function(a){alert("Fail to update avatar:"+a.data.message)})}var j={loadUser:!1,changingPassword:!1};a.apds=[{key:"first_name",title:"First name",type:"string"},{key:"last_name",title:"Last name",type:"string"},{key:"language",title:"language",type:"string"},{key:"timezone",title:"timezone",type:"string"}],a.ctrl=j,a.login=e,a.logout=b.logout,a.goToDashboard=d,a.load=f,a.reload=f,a.saveUser=g,a.changePassword=h,a.updateAvatar=i}]),angular.module("mblowfish-core").controller("AmdDashboardCtrl",["$scope","$navigator","$app",function(a,b,c){function d(){a.editable=!a.editable}b.scopePath(a).add({title:"Dashboard",link:"#!/dashboard"}),c.scopeMenu(a).add({priority:15,icon:"edit",label:"Edit content",tooltip:"Toggle edit mode of the current contetn",visible:function(){return a.app.user.owner},action:d})}]),angular.module("mblowfish-core").controller("AmdGroupsResourceCtrl",["$scope","$usr","PaginatorParameter",function(a,b,c){function d(a){h.setQuery(a),f()}function e(){return"working"===j.status||i&&!i.hasMore()?void 0:(i&&h.setPage(i.next()),j.status="working",b.groups(h).then(function(a){i=a,j.items=j.items.concat(i.items),j.status="relax"},function(){j.status="fail"}))}function f(){return i=null,j.items=[],e()}function g(b){a.$parent.setValue(b.id)}var h=new c;h.setOrder("id","a");var i=null,j={state:"relax",items:[]};a.items=[],a.search=d,a.nextPage=e,a.ctrl=j,a.selectGroupId=g,a.paginatorParameter=h,a.reload=f,a.sortKeys=["id","name","description"]}]),angular.module("mblowfish-core").controller("AmdHelpCtrl",["$scope","$rootScope","$route","$http","$translate",function(a,b,c,d,e){function f(){if(b.showHelp){var f=c.current,g="fa"===e.use()?"fa":"en";if(f){var h=f.helpId;angular.isFunction(h)&&(h=h(f)),angular.isDefined(h)||(h="not-found"),d.get("resources/helps/"+h+"-"+g+".json").then(function(b){a.helpContent=b.data})}else d.get("resources/helps/not-found-"+g+".json").then(function(b){a.helpContent=b.val})}}b.showHelp=!1,a.closeHelp=function(){b.showHelp=!1},a.$watch("showHelp",f),a.$watch(function(){return c.current},f)}]),angular.module("mblowfish-core").controller("MbInitialCtrl",["$scope","$rootScope","$preferences","$mdStepper","$navigator","$translate",function(a,b,c,d,e,f){function g(a){var c=d("setting-stepper");return b.app.user.owner?void c["goto"](a):void c.error("You are not allowed")}function h(){var a=d("setting-stepper");return b.app.user.owner?void a.next():void a.error("You are not allowed")}function i(){var a=d("setting-stepper");a.back()}function j(){var b="fa"===f.use()?"fa":"en",e={id:"welcome",title:"Welcome",templateUrl:"views/preferences/welcome-"+b+".html",controller:"MbAccountCtrl",description:"Welcome. Please login to continue.",icon:"accessibility",priority:"first",required:!0},g={id:"congratulate",templateUrl:"views/preferences/congratulate-"+b+".html",title:":)",description:"Congratulation. Your site is ready.",icon:"favorite",priority:"last",required:!0};c.newPage(e),c.newPage(g),c.pages().then(function(b){a.settings=[],b.items.forEach(function(b){b.required&&a.settings.push(b)}),a.$watch(function(){var a=d("setting-stepper");return a.currentStep},function(b){a.settings&&0!==a.settings.length&&(a.pageId=a.settings[b].id)})})}var k=a.$watch(function(){return b.app.initial},function(a){a?j():a===!1&&k()});a.settings=[],a.nextStep=h,a.prevStep=i,a.goToStep=g}]),angular.module("mblowfish-core").controller("MessagesCtrl",["$scope","$usr","$monitor","PaginatorParameter",function(a,b,c,d){function e(a){return i.setQuery(a),h()}function f(){return"working"===k.status||j&&!j.hasMore()?void 0:(j&&i.setPage(j.next()),k.status="working",b.messages(i).then(function(a){j=a,k.items=k.items.concat(j.items),k.status="relax"},function(){k.status="fail"}))}function g(a){return a["delete"]().then(function(){var b=k.items.indexOf(a);b>-1&&k.items.splice(b,1),0===k.items.length&&h()})}function h(){return j=null,k.items=[],f()}var i=new d;i.setOrder("id","d");var j=null,k={state:"relax",items:[]};a.items=[],a.reload=h,a.search=e,a.nextMessages=f,a.remove=g,a.ctrl=k,a.pp=i;var l;c.monitor("message","count").then(function(a){l=a.watch(function(){h()})}),a.$on("$destroy",l),h()}]),angular.module("mblowfish-core").controller("AmdNavigatorDialogCtrl",["$scope","$mdDialog","config",function(a,b,c){a.config=c,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){b.hide(a)}}]),angular.module("mblowfish-core").controller("AmdNavigatorCtrl",["$scope","$navigator","$route",function(a,b,c){function d(){var d=[];angular.forEach(c.routes,function(a,b){a.navigate&&(a.type="link",a.link=a.originalPath,a.title=a.title||a.name||"no-name",a.priority=a.priority||100,d.push(a))}),angular.forEach(b.items(),function(a){d.push(a)}),a.menuItems={hiden:!1,sections:[]};var e=[];angular.forEach(d,function(c){c.groups?angular.forEach(c.groups,function(d){var f=b.group(d);f.id in e||(e[f.id]=angular.extend({type:"toggle",sections:[]},f),a.menuItems.sections.push(e[f.id])),e[f.id].sections.push(c)}):a.menuItems.sections.push(c)})}d()}]),angular.module("mblowfish-core").controller("MbPreferenceCtrl",["$scope","$routeParams","$navigator","$preferences",function(a,b,c,d){d.page(b.preferenceId).then(function(b){a.preference=b},function(){c.openPage("preferences")}),a.preferenceId=b.preferenceId}]),angular.module("mblowfish-core").controller("MbPreferencesCtrl",["$scope","$preferences",function(a,b){function c(a){b.openPage(a.page)}b.pages().then(function(b){a.preferenceTiles=[];for(var c=0;c<b.items.length;c++)a.preferenceTiles.push({colspan:1,rowspan:1,page:b.items[c]})}),a.openPreference=c}]),angular.module("mblowfish-core").controller("AmdRolesResourceCtrl",["$scope","$usr","PaginatorParameter",function(a,b,c){function d(a){return h.setQuery(a),f()}function e(){return"working"===j.status||i&&!i.hasMore()?void 0:(i&&h.setPage(i.next()),j.status="working",b.roles(h).then(function(a){i=a,j.items=j.items.concat(i.items),j.status="relax"},function(){j.status="fail"}))}function f(){return i=null,j.items=[],e()}function g(b){a.$parent.setValue(b.id)}var h=new c;h.setOrder("id","a");var i=null,j={state:"relax",items:[]};a.items=[],a.reload=f,a.search=d,a.nextPage=e,a.ctrl=j,a.selectRoleId=g,a.paginatorParameter=h,a.sortKeys=["id","name"]}]),angular.module("mblowfish-core").controller("settingsBrandCtrl",["$scope","$navigator",function(a,b){b.scopePath(a).add({title:"Settings",active:function(){b.openPage("/settings")}}).add({title:"Branding",active:function(){b.openPage("/settings/brand")}})}]),angular.module("mblowfish-core").controller("settingsGoogleAnalyticCtrl",["$scope","$navigator",function(a,b){b.scopePath(a).add({title:"Settings",active:function(){b.openPage("/settings")}}).add({title:"Google analytic",active:function(){b.openPage("/settings/google-analytic")}})}]),angular.module("mblowfish-core").controller("settingsLocalCtrl",["$scope","$navigator",function(a,b){b.scopePath(a).add({title:"Settings",active:function(){b.openPage("/settings")}}).add({title:"Localization",active:function(){b.openPage("/settings/local")}})}]),angular.module("mblowfish-core").controller("AmdThemesCtrl",["$scope","$mdTheming",function(a,b){a.themes=[],angular.forEach(b.THEMES,function(b,c){a.themes.push({id:c,label:b.name})})}]),angular.module("mblowfish-core").controller("MbToolbarDashboardCtrl",["$scope","$app",function(a,b){a.toolbarMenu=b.getToolbarMenu()}]),angular.module("mblowfish-core").controller("AmdUsersResourceCtrl",["$scope","$usr","PaginatorParameter",function(a,b,c){function d(){return"working"===i.status||h&&!h.hasMore()?void 0:(h&&g.setPage(h.next()),i.status="working",b.users(g).then(function(a){h=a,i.items=i.items.concat(h.items),i.status="relax"},function(){i.status="fail"}))}function e(){return h=null,i.items=[],d()}function f(b){a.$parent.setValue(b.id)}var g=new c;g.setOrder("id","d");var h=null,i={state:"relax",items:[]};a.items=[],a.nextPage=d,a.ctrl=i,a.selectUserId=f,a.paginatorParameter=g,a.reload=e,a.sortKeys=["id","login","first_name","last_name","last_login","date_joined"]}]),angular.module("mblowfish-core").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b===a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}),angular.module("mblowfish-core").directive("mbCaptcha",function(){function a(a,b,c,d){function e(){f&&f.$setValidity("captcha",a.required===!1?null:Boolean(a.response))}var f=d[0];d[1];f&&angular.isDefined(c.required)&&a.$watch("required",e),a._response=null,a.$watch("_response",function(){a.response=a._response}),a.$watch("response",function(){a._response=a.response})}return{restrict:"E",require:["?^^form"],templateUrl:"views/directives/mb-captcha.html",scope:{response:"=?ngModel"},link:a}}),angular.module("mblowfish-core").directive("mbDatepicker",["$mdUtil","$rootScope",function(a,b){function c(c,d,e,f){function g(){var a=moment.utc(i.$modelValue).local();return a.isValid()?void(c.date=a):void 0}function h(){var a=moment(c.date).utc().format("YYYY-MM-DD HH:mm");i.$setViewValue(a)}c.app=b.app;var i=f[0]||a.fakeNgModel();i.$render=g,c.$watch("date",h)}return{replace:!1,templateUrl:"views/directives/mb-datepicker.html",restrict:"E",scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate"},require:["ngModel"],priority:210,link:c}}]),angular.module("mblowfish-core").directive("mbDynamicTabs",["$wbUtil","$settings","$q","$rootScope","$compile","$controller",function(a,b,c,d,e,f){function g(a,b){return b}function h(h,j,k){function l(b){var k=[],l=[],n=j.find("#"+i);n.empty();var o=m[b],p=a.getTemplateFor(o);angular.isDefined(p)&&k.push(p.then(function(a){a=g(o,a);var b=angular.element(a),c=d.$new(!1,h);c.page=o,c.value=h.value,angular.isDefined(o.controller)&&f(o.controller,{$scope:c,$element:b}),e(b)(c),l.push(b)})),c.all(k).then(function(){angular.forEach(l,function(a){n.append(a)})})}var m=b.settings();h.pages=m,h.$watch("pageIndex",function(a){a>=0&&l(a)})}var i="mb-dynamic-tabs-select-resource-children";return{restrict:"E",replace:!0,scope:{amdSection:"="},templateUrl:"views/directives/mb-dynamic-tabs.html",link:h,controller:["$scope",function(a){}]}}]),angular.module("mblowfish-core").directive("mbInfinateScroll",["$parse",function(a){function b(b,c,d){c.addClass("mb-infinate-scroll"),c.on("scroll",function(e){var f=c[0];f.scrollTop+f.offsetHeight+5>=f.scrollHeight&&a(d.mbInfinateScroll)(b)}),a(d.mbInfinateScroll)(b)}return{restrict:"A",link:b}}]),angular.module("mblowfish-core").directive("mbNavigationBar",["$menu",function(a){function b(b,c,d){b.pathMenu=a.menu("navigationPathMenu")}return{restrict:"E",replace:!1,templateUrl:"views/directives/mb-navigation-bar.html",link:b}}]),angular.module("mblowfish-core").directive("mbPaginationBar",function(){function a(a,b,c){function d(){angular.isFunction(a.mbReload)&&a.mbReload(a.mbModel)}function e(){angular.isFunction(a.mbExport)&&a.mbExport(a.mbModel)}function f(b){a.mbModel.setQuery(b),a.mbReload()}function g(){a.mbModel&&(a.mbModel.sortMap={},a.mbModel.filterMap={},a.mbModel.setOrder(h.sortBy,h.sortDesc?"d":"a"),a.mbModel.setQuery(h.searchTerm))}var h={sortDesc:!0,sortBy:"undefined"==typeof a.mbSortKeys?"id":a.mbSortKeys[0],searchTerm:null};a.search=f,a.query=h,angular.isFunction(a.mbReload)&&(a.reload=d),angular.isFunction(a.mbExport)&&(a.exportData=e),"undefined"==typeof a.mbEnableSearch&&(a.mbEnableSearch=!0),a.$watch("mbModel",function(){g()}),a.$watch("query",function(){g(),d()},!0)}return{restrict:"E",templateUrl:"views/directives/mb-pagination-bar.html",scope:{mbModel:"=",mbReload:"=",mbExport:"=",mbSortKeys:"=",mbMoreActions:"=",mbTitle:"@?",mbIcon:"@?",mbEnableSearch:"=?"},link:a}}),angular.module("mblowfish-core").directive("mbPanel",["$navigator","$usr","$route","$window","$rootScope","$app","$translate","$http","$mdSidenav","$mdBottomSheet","$q","$widget","$controller","$compile",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,b,c,d){var f=a.$new(!1,a);return f=Object.assign(f,{app:e.app,_page:b,_visible:function(){return angular.isFunction(this._page.visible)?this._page.visible(this):!0}}),l.getTemplateFor(b).then(function(a){var e=angular.element(c+a+d),g=n(e);if(angular.isDefined(b.controller)){var h={$scope:f,$element:e},i=m(b.controller,h);b.controllerAs&&(f[b.controllerAs]=i),e.data("$ngControllerController",i)}return{element:g(f),page:b}})}function p(a,b,d){function e(a,b){for(var c=[],d=0;d<b.length;d++){for(var e=!1,f=0;f<a.length;f++)if(a[f].id===b[d].page.id){e=!0;break}e?(b[d].element.detach(),b[d].cached=!0,c.push(b[d])):b[d].element.remove()}return c}function g(b){for(var c=0;c<m.length;c++)if(m[c].page.id==b.id)return k.when(m[c]);return o(a,b,'<md-sidenav layout="column" md-theme="{{app.setting.theme || \'default\'}}" md-theme-watch ng-show="_visible()" md-component-id="{{_page.id}}" md-is-locked-open="_page.locked && $mdMedia(\'gt-sm\')" md-whiteframe="2" ng-class="{\'md-sidenav-left\': app.dir==\'rtl\',  \'md-sidenav-right\': app.dir!=\'rtl\'}" layout="column">',"</md-sidenav>").then(function(a){m.push(a)})}function h(b){for(var c=0;c<n.length;c++)if(n[c].page.id==b.id)return k.when(n[c]);var d=b.raw?"":'<md-toolbar md-theme="{{app.setting.theme || \'default\'}}" md-theme-watch layout="column" layout-gt-xs="row" layout-align="space-between stretch">',e=b.raw?"":"</md-toolbar>";return o(a,b,d,e).then(function(a){n.push(a)})}function i(a){m=e(a,m);for(var c=[],d=0;d<a.length;d++)c.push(g(a[d]));k.all(c).then(function(){var a=b.children(q).children(r);m.sort(function(a,b){return(a.page.priority||10)>(b.page.priority||10)});for(var c=0;c<m.length;c++){var d=m[c];d.chached||("start"===d.page.position?a.prepend(d.element):a.append(d.element))}})}function j(a){n=e(a,n);for(var c=[],d=0;d<a.length;d++)c.push(h(a[d]));k.all(c).then(function(){var a=b.children(q);n.sort(function(a,b){return(a.page.priority||10)>(b.page.priority||10)});for(var c=0;c<n.length;c++){var d=n[c];d.chached||a.prepend(d.element)}})}function l(){if(c.current){var a=c.current.sidenavs||f.defaultSidenavs();if(a=a.slice(0),a.push("settings"),a.push("help"),angular.isArray(a)){var b=[],d=[];angular.forEach(a,function(a){d.push(f.sidenav(a).then(function(a){b.push(a)}))}),k.all(d).then(function(){i(b)})}var e=c.current.toolbars||f.defaultToolbars();if(angular.isArray(e)){var g=[],d=[];angular.forEach(e,function(a){d.push(f.toolbar(a).then(function(a){g.push(a)}))}),k.all(d).then(function(){j(g)})}}}var m=[],n=[];a.$watch(function(){return c.current},l)}var q="div#mb-panel-root-ready",r="div#mb-panel-root-ready-anchor";return{restrict:"E",replace:!0,templateUrl:"views/directives/mb-panel.html",link:p}}]),angular.module("mblowfish-core").directive("mbPreferencePage",["$compile","$controller","$preferences","$widget","$rootScope",function(a,b,c,d,e){function f(c,f,g){var h=c.$new(!1,c);h.app=e.app,d.getTemplateFor(f).then(function(c){var d=angular.element("<div md-theme=\"{{app.setting.theme || 'default'}}\" md-theme-watch >"+c+"</div>"),e=a(d);if(angular.isDefined(f.controller)){var i={$scope:h,$element:d},j=b(f.controller,i);f.controllerAs&&(h[f.controllerAs]=j),d.data("$ngControllerController",j)}g.empty(),g.append(e(h))})}function g(a,b,d){var e=b.children(h).children(i);a.$watch("mbPreferenceId",function(b){b&&c.page(b).then(function(b){f(a,b,e)},function(){})})}var h="div#mb-preference-body",i="div#mb-preference-placeholder";return{restrict:"E",templateUrl:"views/directives/mb-preference-page.html",replace:!0,scope:{mbPreferenceId:"="},link:g}}]),angular.module("mblowfish-core").directive("mbPreloading",["$animate",function(a){function b(a,b,c){b.addClass(h)}function c(a,b,c){b.removeClass(g),b.removeClass(f)}function d(a,b,c){b.addClass(g),b.addClass(f)}function e(a,e,f){b(a,e,f),a.$watch(f.mbPreloading,function(b){b?d(a,e,f):c(a,e,f)})}var f="mb-preload",g="mb-preload-box",h="mb-preload-animate";return{restrict:"A",link:e}}]),angular.module("mblowfish-core").directive("mbTitledBlock",function(){return{replace:!0,restrict:"E",transclude:!0,scope:{mbTitle:"@?",mbIcon:"@?",mbProgress:"<?"},templateUrl:"views/directives/mb-titled-block.html"}}),angular.module("mblowfish-core").directive("mbTreeHeading",["$animate",function(a){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-heading.html",link:function(a,b,c){},controller:["$scope",function(a){}]}}]),angular.module("mblowfish-core").directive("mbTreeLink",["$animate",function(a){return{restrict:"E",scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-link.html",link:function(a,b,c){},controller:["$scope","$navigator",function(a,b){a.isSelected=function(a){return a&&b.isPageSelected(a.link)},a.focusSection=function(a){return b.openPage(a.link)}}]}}]),angular.module("mblowfish-core").directive("mbTreeToggle",["$timeout","$animateCss","$mdSidenav","$mdMedia","$rootScope",function(a,b,c,d,e){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-toggle.html",link:function(c,d,e,f){function g(a){b(h,{from:{height:a?0:i()+"px"},to:{height:a?i()+"px":0},duration:.3}).start()}var h=d.find("ul"),i=function(){var a;return h.addClass("no-transition"),h.css("height",""),a=h.prop("clientHeight"),h.css("height",0),h.removeClass("no-transition"),a};return h?void c.$watch(function(){return f.isOpen(c.mbSection)},function(b){a(function(){g(b)},0,!1)}):console.warn("mb-tree: `menuToggle` cannot find ul element")},controller:["$scope",function(a){function b(a){return f===a}function c(a){f=f===a?null:a}function d(a){return a.hidden?!e.$eval(a.hidden):!0}var f=null;angular.isFunction(a.$parent.isOpen)?(a.isOpen=a.$parent.isOpen,a.toggle=a.$parent.toggle):(a.isOpen=b,a.toggle=c),this.isOpen=a.isOpen,a.isVisible=d}]}}]),angular.module("mblowfish-core").directive("mbTree",["$animate","$rootScope",function(a,b){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree.html",link:function(a,b,c){},controller:["$scope",function(a){function c(a){return a.hidden?!b.$eval(a.hidden):!0}function d(a){return f===a}function e(a){f=f===a?null:a}var f=null;a.isOpen=d,a.toggle=e,a.isVisible=c}]}}]),angular.module("mblowfish-core").directive("mbUserMenu",["$menu","$app","$mdSidenav",function(a,b,c){function d(d,e,f){d.menu=a.menu("mb.user"),d.logout=b.logout,d.settings=function(){return c("settings").toggle()}}return{restrict:"E",replace:!0,scope:!0,templateUrl:"views/directives/mb-user-menu.html",link:d,controller:"MbAccountCtrl"}}]),angular.module("mblowfish-core").directive("mbUserToolbar",["$animate",function(a){return{restrict:"E",replace:!0,templateUrl:"views/directives/mb-user-toolbar.html",link:function(a,b,c,d){},controller:"MbAccountCtrl"}}]),angular.module("mblowfish-core").filter("amddate",["$rootScope",function(a){return function(b,c){try{var d=c||a.app.setting.dateFormat||a.app.config.dateFormat;"Jalaali"!==a.app.calendar&&(d=d.replace("j",""));var e=moment.utc(b).local();return e.format(d)}catch(f){return"-"+f.message}}}]),angular.module("mblowfish-core").run(["$navigator","$mdToast",function(a,b){window.alert=function(b){return a.openDialog({templateUrl:"views/dialogs/mb-alert.html",config:{message:b}})},window.confirm=function(b){return a.openDialog({templateUrl:"views/dialogs/mb-confirm.html",config:{message:b}})},window.prompt=function(b,c){return a.openDialog({templateUrl:"views/dialogs/mb-prompt.html",config:{message:b,model:c}})},window.toast=function(a){var c=a;if(angular.isString(a))var c=b.simple().textContent(a).position("bottom right").hideDelay(3e3);return b.show(c)}}]),angular.module("mblowfish-core").run(["$app","$rootScope","$navigator","$route","$mdSidenav",function(a,b,c,d,e){a.getToolbarMenu().item({priority:15,icon:"settings",label:"Preferences",tooltip:"Open preferences panel",visible:function(){return b.app.user.owner},active:function(){return c.openPage("/preferences")}}).item({priority:15,icon:"help",label:"Help",tooltip:"Display help in sidenav",visible:function(){return!!d.current.helpId},active:function(){return b.showHelp=!b.showHelp,b.showHelp?e("help").toggle():void 0}}),a.newToolbar({id:"dashboard",title:"Dashboard toolbar",description:"Main dashboard toolbar",controller:"MbToolbarDashboardCtrl",templateUrl:"views/toolbars/mb-dashboard.html"}),a.newSidenav({id:"navigator",title:"Navigator",description:"Navigate all path and routs of the pandel",controller:"AmdNavigatorCtrl",templateUrl:"views/sidenavs/mb-navigator.html",locked:!0,position:"start"}),a.newSidenav({id:"help",title:"Help",description:"System online help",controller:"AmdHelpCtrl",templateUrl:"views/sidenavs/mb-help.html",locked:!0,visible:function(){return b.showHelp},position:"end"}),a.newSidenav({id:"settings",title:"Settings",description:"User settings",templateUrl:"views/sidenavs/mb-settings.html",locked:!1,position:"end"})}]),angular.module("mblowfish-core").run(["appcache","$window",function(a,b){a.checkUpdate().then(function(){return a.swapCache(),confirm("app.update.message")}).then(function(){b.location.reload()})}]),angular.module("mblowfish-core").run(["$rootScope","$saas",function(a,b){a.app.captcha={},b.setting("captcha.engine").then(function(c){a.app.captcha.engine=c.value,"recaptcha"===c.value&&(a.app.captcha.recaptcha={},b.setting("captcha.engine.recaptcha.key").then(function(b){a.app.captcha.recaptcha.key=b.value}))})}]),angular.module("mblowfish-core").run(["$window","$rootScope","$location","$app",function(a,b,c,d){a.ga&&b.$watch("app.config.googleAnalytic.property",function(d){d&&(a.ga("create",d,"auto"),b.$on("$routeChangeStart",function(){a.ga("send","pageview",c.path())}))})}]),angular.module("mblowfish-core").run(["$app","$rootScope","$navigator",function(a,b,c){var d=b.$watch(function(){return b.app.initial},function(a){a?c.openPage("initialization"):a===!1&&d()})}]),angular.module("mblowfish-core").run(["$resource",function(a){a.newPage({label:"User id",type:"userid",templateUrl:"views/resources/amd-user.html",tags:["userId"]}),a.newPage({label:"User id list",type:"useridlist",templateUrl:"views/resources/amd-users-list.html",controller:"AmdUsersResourceCtrl",tags:["userId"]}),a.newPage({label:"Group id",type:"groupid",templateUrl:"views/resources/amd-group.html",tags:["groupId"]}),a.newPage({label:"Group id list",type:"groupidlist",templateUrl:"views/resources/amd-groups-list.html",controller:"AmdGroupsResourceCtrl",tags:["groupId"]}),a.newPage({label:"Role id",type:"roleid",templateUrl:"views/resources/amd-role.html",tags:["roleId"]}),a.newPage({label:"Role id list",type:"roleidlist",templateUrl:"views/resources/amd-roles-list.html",controller:"AmdRolesResourceCtrl",tags:["roleId"]})}]),angular.module("mblowfish-core").run(["$settings","$preferences",function(a,b){b.newPage({id:"local",title:"local",description:"manage dashboard locality and language.",templateUrl:"views/preferences/mb-local.html",icon:"language",tags:["local","language"]}).newPage({id:"brand",title:"Branding",description:"Manage application branding such as title, logo and descritpions.",templateUrl:"views/preferences/mb-brand.html",controller:"settingsBrandCtrl",icon:"copyright",tags:["brand"]}).newPage({id:"google-analytic",title:"Google Analytic",templateUrl:"views/preferences/mb-google-analytic.html",description:"Enable google analytic for your application.",icon:"timeline",tags:["analysis"]}).newPage({id:"update",templateUrl:"views/preferences/update.html",title:"Update application",description:"Settings of updating process and how to update the application.",icon:"autorenew"}),a.newPage({title:"Local",templateUrl:"views/settings/mb-local.html",tags:["local"]}),a.newPage({title:"Theme",templateUrl:"views/settings/mb-theme.html",tags:["theme"]})}]),angular.module("mblowfish-core").run(["$rootScope","$localStorage",function(a,b){a.app.setting=b.$default({dashboardModel:{}})}]),angular.module("mblowfish-core").service("$app",["$rootScope","$usr","$monitor","$menu","$q","$cms","$translate","$mdDateLocale",function(a,b,c,d,e,f,g,h){function i(a,b){return e.when(R.config[a]||b)}function j(a,b){return $timeout(function(){return R.config[a]=b},1)}function k(){return w("loading configuration","fetch configuration document"),f.content(P+R.key).then(function(a){return R._acc=a,R.initial=!1,w("loading configuration","fetch configuration content"),R._acc.value()},function(a){return a.status&&"404"==a.status&&(R.initial=!0),{}}).then(function(a){R.config=a,w("loading configuration","application configuration loaded successfully")})["catch"](function(a){w("loading configuration","warning: "+a.message)})}function l(){if(!R.user.owner||S){var a="fail",b=e.defer();return b.reject({data:{message:a}}),b.promise}S=!0;var c;return R._acc?(T=!1,c=R._acc.setValue(R.config)):c=f.newContent({name:P+R.key,mimetype:Q}).then(function(a){return T=!1,R._acc=a,R._acc.setValue(R.config)}),c["finally"](function(){S=!1,T&&l()})}function m(b,c){var d=e.defer();return b in a.app.setting?d.resolve(a.app.setting[b]):d.resolve(c),d.promise}function n(b,c){var d=e.defer();return a.app.setting[b]=c,d.resolve(c),d.promise}function o(){return b.session()}function p(){var a=e.defer();return a.resolve(R.user.anonymous),a.promise}function q(){var a=e.defer();return a.resolve(R.user.owner),a.promise}function r(){var a=e.defer();return a.resolve(R.user.member),a.promise}function s(){var a=e.defer();return a.resolve(authorized),a.promise}function t(a){return b.login(a).then(v).then(x)}function u(){return b.logout().then(v).then(x)}function v(){return w("loading user info","fetch user information"),b.session().then(function(a){return R.user.current=a,R.user.administrator=a.isAdministrator(),R.user.anonymous=a.isAnonymous(),w("loading user info","user information loaded successfully"),w("loading user info","check user permissions"),c.monitor("user","owner").then(function(a){return a.refresh()}).then(function(a){R.user.owner=a.value})},function(a){w("loading user info","warning: "+a.message)})}function w(a,b){R.state.stage=a,R.state.message=b,b&&R.logs.push(b)}function x(){return"fail"!==R.state.status?R.user.anonymous?void(R.state.status="anonymous"):void(R.state.status="ready"):void 0}function y(a){R.state.status="loading",w("starting application","loading application"),R.key=a;var b=[];return b.push(v()),b.push(k()),e.all(b).then(x)["catch"](function(){})["finally"](function(){"fail"!==R.state.status&&w("starting application","application is started successfully")})}function z(a){function b(){this.add=function(a){return d.addItem("scopeMenu",a),this}}return a.$on("$destroy",function(){d.menu("scopeMenu").clear()}),new b}function A(){return d.menu("scopeMenu")}function B(){return d.menu("userMenu")}function C(){return d.menu("publicMenu")}function D(){return d.menu("locationMenu")}function E(){return d.menu("amd.toolbars.main.menu")}function F(){return e.when({items:U})}function G(a){U.push(a)}function H(a){for(var b=0;b<U.length;b++)if(U[b].id===a)return e.when(U[b]);return e.reject("Toolbar not found")}function I(){return e.when({items:V})}function J(a){V.push(a)}function K(a){for(var b=0;b<V.length;b++)if(V[b].id===a)return e.when(V[b]);return e.reject("Sidenav not found")}function L(a){return W=a||[],this}function M(){return W}function N(a){return X=a||[],this}function O(){return X}var P="angular-material-blowfish-",Q="application/amd-cnf",R={state:{status:"loading",stage:"starting",message:null},logs:[],user:{current:{},anonymous:!0,administrator:!1,owner:!1,member:!1,authorized:!1},config:{},jobs:[],setting:{}},S=!1,T=!1;a.$watch("app.config",function(){return R.user.owner&&(T=!0,!S)?l():void 0},!0),a.$watch(function(){return R.setting.dir||R.config.dir},function(a){R.dir=R.setting.dir||R.config.dir}),a.$watch(function(){return R.setting.local||R.config.local||"en"},function(a){R.local=a,g.use(a),moment.loadPersian(),moment.locale(a);var b=moment.localeData();h.months=b._months,h.shortMonths=b._monthsShort,h.days=b._weekdays,h.shortDays=b._weekdaysMin,h.firstDayOfWeek=b._week.dow}),a.$watch(function(){return R.setting.calendar||R.config.calendar||"Gregorian";
},function(a){R.calendar=a});var U=[],V=[],W=[],X=[];a.app=R;var Y={};return Y.start=y,Y.login=t,Y.logout=u,Y.currentUser=o,Y.isAnonymous=p,Y.isOwner=q,Y.isMember=r,Y.isAuthorized=s,Y.config=i,Y.setConfig=j,Y.loadConfig=k,Y.storeConfig=l,Y.setting=m,Y.setSetting=n,Y.toolbars=F,Y.newToolbar=G,Y.toolbar=H,Y.setDefaultToolbars=L,Y.defaultToolbars=M,Y.sidenavs=I,Y.newSidenav=J,Y.sidenav=K,Y.setDefaultSidenavs=N,Y.defaultSidenavs=O,Y.getToolbarMenu=E,Y.getScopeMenu=A,Y.scopeMenu=z,Y.publicMenu=C,Y.userMenu=B,Y.locationMenu=D,Y}]),angular.module("mblowfish-core").service("$amdExport",["FileSaver","$q","PaginatorParameter",function(a,b,c){function d(b,d,e,f,g){function h(a){var b="";return angular.forEach(a.items,function(a){var c="";angular.forEach(k,function(b){c=c+(a[b]||" ")+","}),b=b+c.slice(0,-1)+"\n"}),b}function i(c){if(l+=h(c),!c.hasMore()){var e=new Blob([l],{type:"text/plain;charset=utf-8"});return a.saveAs(e,g+"."+f)}return j.setPage(c.next()),d.apply(b,[j]).then(i)}var j=new c;j.put("_px_q ",e.get("_px_q")),j.put("_px_sk ",e.get("_px_sk")),j.put("_px_so ",e.get("_px_so")),j.put("_px_fk ",e.get("_px_fk")),j.put("_px_fv ",e.get("_px_fv")),j.setPage(0);var k,l="";return d.apply(b,[j]).then(function(a){if(!k){var b=Object.keys(a.items[0]);k=[],angular.forEach(b,function(b){angular.isFunction(a.items[0][b])||angular.isObject(a.items[0][b])||k.push(b)})}var c="";return angular.forEach(k,function(a){c=c+a+","}),l=c.slice(0,-1)+"\n",i(a)})}return{list:d}}]),angular.module("mblowfish-core").service("$help",["$q","$navigator",function(a,b){function c(a){return e.push(a),this}function d(){return a.resolve({items:e})}var e=[];return{tip:c,tips:d}}]),angular.module("mblowfish-core").service("$navigator",["$q","$route","$mdDialog","$location","$window","$menu",function(a,b,c,d,e,f){function g(a){return setTimeout(function(){deferred.notify("about to search items."),deferred.resolve(h(a))},100),deferred.promise}function h(a){var b=q;return a&&a.param._px_fk&&(b=[],"group"===a.param._px_fk&&angular.forEach(q,function(c){c.groups&&angular.isArray(c.groups)&&c.groups.indexOf(a.param._px_fv)>-1&&b.push(c)})),b}function i(a){return a.priority=a.priority||100,q.push(a),this}function j(a){return r}function k(a){a.id in r||(r[a.id]={id:a.id}),angular.merge(r[a.id],a)}function l(a){return a in r||(r[a]={id:a}),r[a]}function m(a){var b={};return angular.extend(b,{controller:"AmdNavigatorDialogCtrl",parent:angular.element(document.body),clickOutsideToClose:!0,fullscreen:!0},a),b.config||(b.config={}),b.locals||(b.locals={}),b.locals.config=b.config,c.show(b)}function n(a){a&&a.toLowerCase().startsWith("http")&&e.open(a),d.path(a)}function o(a){return!1}function p(a){function b(){this.add=function(a){return f.addItem("navigationPathMenu",a),this},this.clear=function(){return f.menu("navigationPathMenu").clear(),this}}return a.$on("$destroy",function(){f.menu("navigationPathMenu").clear()}),new b}var q=[],r=[];return{loadAllItems:g,openDialog:m,openPage:n,isPageSelected:o,scopePath:p,items:h,newItem:i,groups:j,newGroup:k,group:l}}]),angular.module("mblowfish-core").service("$notification",["$navigator","$mdToast",function(a,b){function c(b){return a.openDialog({templateUrl:"views/dialogs/amh-alert.html",config:{message:b}})}function d(b){return a.openDialog({templateUrl:"views/dialogs/amh-confirm.html",config:{message:b}})}function e(b,c){return a.openDialog({templateUrl:"views/dialogs/amh-prompt.html",config:{message:b,model:c}})}function f(a){return b.show(b.simple().textContent(a).hideDelay(3e3))}return{toast:f,alert:c,prompt:e,confirm:d}}]),angular.module("mblowfish-core").service("$preferences",["$q","$navigator",function(a,b){function c(){return h.sort(d),a.when({items:h})}function d(a,b){return a.priority===b.priority?0:"first"===a.priority||"last"===b.priority?-1:"last"===a.priority||"first"===b.priority?1:"undefined"==typeof a.priority?1:"undefined"==typeof b.priority?-1:a.priority-b.priority}function e(b){for(var c=0,d=h.length;d>c;c++)if(h[c].id===b)return a.when(h[c]);return a.reject({message:"Not found"})}function f(a){return b.openPage("/preferences/"+a.id)}function g(a){return h.push(a),this}var h=[];return{pages:c,page:e,newPage:g,openPage:f}}]),angular.module("mblowfish-core").service("$settings",["$q","$navigator",function(a,b){function c(){return a.when({items:g})}function d(b){for(var c=0;c<g.length;c++)if(g[c].id==b)return a.when(g[c]);return a.reject({})}function e(a){return b.openPage("/configs/"+a.id)}function f(a){return g.push(a),h}var g=[],h={pages:c,page:d,newPage:f,openPage:e};return h}]),angular.module("mblowfish-core").run(["$templateCache",function(a){a.put("views/dialogs/mb-alert.html",'<md-dialog ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>error</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=row layout-align="center center" flex> <p translate>{{config.message}}</p> </md-dialog-content> </md-dialog>'),a.put("views/dialogs/mb-confirm.html",'<md-dialog ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>warning</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=answer(true)> <wb-icon aria-label="Close dialog">done</wb-icon> </md-button> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=row layout-align="center center" flex> <p translate>{{config.message}}</p> </md-dialog-content> </md-dialog>'),a.put("views/dialogs/mb-prompt.html",'<md-dialog ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>input</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=answer(config.model)> <wb-icon aria-label="Close dialog">done</wb-icon> </md-button> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=column layout-align="center stretch" layout-padding flex> <p translate>{{config.message}}</p> <md-input-container class=md-block> <label translate>Input value</label> <input ng-model=config.model> </md-input-container> </md-dialog-content> </md-dialog>'),a.put("views/directives/mb-datepicker.html",'<div> <md-persian-datepicker ng-model=date ng-show="app.calendar === \'Jalaali\'"> </md-persian-datepicker> <md-datepicker ng-model=date md-placeholder="Enter date" ng-show="app.calendar === \'Gregorian\'"> </md-datepicker> </div>'),a.put("views/directives/mb-dynamic-tabs.html",'<div layout=column flex layout-fill> <md-tabs md-selected=pageIndex> <md-tab ng-repeat="page in pages"> <span translate>{{page.title}}</span> </md-tab> </md-tabs> <md-content id=mb-dynamic-tabs-select-resource-children> </md-content> </div>'),a.put("views/directives/mb-navigation-bar.html",'<div class=mb-navigation-path-bar md-colors="{\'background-color\': \'primary\'}" layout=row> <wb-icon style="margin: 1px" ng-if=pathMenu.items.length>navigation</wb-icon> <md-button data-ng-repeat="menu in pathMenu.items | orderBy:[\'-priority\']" ng-click=menu.active() class=mb-navigation-path-bar-item> <md-tooltip ng-if=menu.tooltip>{{menu.tooltip}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> {{menu.title | translate}} <span ng-show="$index &lt; pathMenu.items.length - 1">&gt;</span> </md-button> </div>'),a.put("views/directives/mb-pagination-bar.html",'<div>  <md-toolbar ng-show=!(showSearch||showSort||showState)> <div class=md-toolbar-tools> <md-button ng-if=mbIcon md-no-ink class=md-icon-button aria-label={{mbIcon}}> <wb-icon>{{mbIcon}}</wb-icon> </md-button> <h2 flex md-truncate ng-show=mbTitle>{{mbTitle}}</h2> <md-button ng-if=reload class=md-icon-button aria-label=Reload ng-click=reload()> <wb-icon>repeat</wb-icon> </md-button> <md-button ng-show=mbSortKeys class=md-icon-button aria-label=Sort ng-click="showSort = !showSort"> <wb-icon>sort</wb-icon> </md-button> <md-button ng-show=mbEnableSearch class=md-icon-button aria-label=Search ng-click="showSearch = !showSearch"> <wb-icon>search</wb-icon> </md-button> <md-button ng-if=exportData class=md-icon-button aria-label=Export ng-click=exportData()> <wb-icon>save</wb-icon> </md-button> <md-menu ng-show=mbMoreActions.length> <md-button aria-label="Open phone interactions menu" class=md-icon-button ng-click=$mdOpenMenu($event)> <wb-icon>more_vert</wb-icon> </md-button> <md-menu-content width=4> <md-menu-item ng-repeat="item in mbMoreActions"> <md-button ng-click=item.action()> <wb-icon ng-show=item.icon>{{item.icon}}</wb-icon> <span translate>{{ item.title }}</span> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar>  <md-toolbar class=md-hue-1 ng-show="showSearch && mbEnableSearch"> <div class=md-toolbar-tools> <md-button ng-click="showSearch = !showSearch" aria-label=Back> <wb-icon>arrow_back</wb-icon> </md-button> <h3 flex=10 translate>Back</h3> <md-input-container md-theme=input flex> <label>&nbsp;</label> <input ng-model=temp.query ng-keyup="$event.keyCode == 13 ? query.searchTerm=temp.query : null"> </md-input-container> <md-button aria-label=Search ng-click="showSearch = !showSearch"> <wb-icon>search</wb-icon> </md-button> </div> </md-toolbar>  <md-toolbar class=md-hue-1 ng-show=showSort> <div class=md-toolbar-tools> <md-button ng-click="showSort = !showSort"> <wb-icon>arrow_back</wb-icon> </md-button> <md-switch ng-model=query.sortDesc aria-label=DESC> DESC sort order </md-switch> <span flex=10></span> <div layout=row layout-align="space-between center"> <span translate>Sort by : </span> <md-select ng-model=query.sortBy> <md-option ng-repeat="key in mbSortKeys" value={{key}} translate>{{key}}</md-option> </md-select> </div> </div> </md-toolbar> </div>'),a.put("views/directives/mb-panel.html","<div id=mb-panel-root md-theme=\"{{app.setting.theme || 'default'}}\" md-theme-watch layout=column layout-fill> <div id=mb-panel-root-ready ng-show=\"app.state.status === 'ready'\" ng-class=\"{'mb-rtl-direction': app.dir=='rtl', 'mb-ltr-direction': app.dir!='rtl'}\" dir={{app.dir}} layout=column layout-fill>       <div id=mb-panel-root-ready-anchor layout=row flex> <md-whiteframe layout=row id=main class=\"md-whiteframe-24dp main mb-page-content\" ng-view flex> </md-whiteframe> </div> </div> <div ng-if=\"app.state.status === 'loading'\" md-theme=\"{{app.setting.theme || 'default'}}\" md-theme-watch ng-class=\"{'mb-rtl-direction': app.dir=='rtl', 'mb-ltr-direction': app.dir!='rtl'}\" dir={{app.dir}} layout=column layout-align=\"center center\" layout-fill> <h4 translate>{{app.state.stage}}</h4> <p translate>{{app.state.message}}</p> <md-progress-linear style=\"width: 50%\" md-mode=indeterminate> </md-progress-linear> <md-button ng-if=\"app.state.status === 'fail'\" class=\"md-raised md-primary\" ng-click=restart() aria-label=Retry> <wb-icon>replay</wb-icon> retry </md-button> </div> <div ng-if=\"app.state.status === 'anonymous'\" md-theme-watch ng-class=\"{'mb-rtl-direction': app.dir=='rtl', 'mb-ltr-direction': app.dir!='rtl'}\" layout=row layout-aligne=none layout-align-gt-sm=\"center center\" ng-controller=MbAccountCtrl flex> <div md-whiteframe=3 flex=100 flex-gt-sm=50 layout=column mb-preloading=\"ctrl.state ==='working'\">  <md-toolbar layout=row layout-padding>  <img width=160 height=160 ng-show=app.config.logo ng-src=\"{{app.config.logo}}\"> <p> <strong>{{app.config.title}}</strong><br> <em>{{app.config.description}}</em> </p> </md-toolbar>  <div ng-show=errorMessage> {{errorMessage}} </div> <form name=loginForm ng-submit=login(credit) layout=column layout-padding> <md-input-container> <label translate>User name</label> <input name=login ng-model=credit.login required> <div ng-messages=loginForm.login.$error> <div ng-message=required translate>This is required!</div> </div> </md-input-container> <md-input-container> <label translate>Password</label> <input name=password ng-model=credit.password type=password required> <div ng-messages=loginForm.password.$error> <div ng-message=required translate>This is required!</div> </div> </md-input-container> <div layout=column layout-align=none layout-gt-sm=row layout-align-gt-sm=\"space-between center\" layout-padding> <div layout=column flex-order=1 flex-order-gt-sm=-1>  </div>  <div vc-recaptcha key=\"'6LeuFzkUAAAAALniqtqd60Ca4iG8Kqx8rpMmUjEF'\" ng-model=\"credit['g-recaptcha-response']\" ng-if=\"captcha.type=='recaptcha'\"> </div> <input hide type=\"submit\"> <md-button flex-order=0 class=\"md-primary md-raised\" ng-click=login(credit) translate>login</md-button> </div> </form> </div> </div> </div>"),a.put("views/directives/mb-preference-page.html","<div> <div id=mb-preference-body> <div id=mb-preference-placeholder> </div> </div> </div>"),a.put("views/directives/mb-titled-block.html",'<div style="border-radius: 5px; margin: 5px 5px 10px 10px; padding: 0px" md-whiteframe=4> <md-toolbar style="border-top-left-radius: 5px;border-top-right-radius: 5px; margin: 0px; padding: 0px"> <div layout=row layout-align="start center" class=md-toolbar-tools> <wb-icon ng-if=amdIcon>{{amdIcon}}</wb-icon> <h3>{{amdTitle}}</h3> </div> </md-toolbar> <md-progress-linear ng-if=amdProgress style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-warn md-color> </md-progress-linear> <div style="margin: 8px" ng-transclude></div> </div>'),a.put("views/directives/mb-tree-heading.html",'<h2 md-colors="{color: \'primary.A100\'}" class="mb-tree-heading md-subhead"> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> {{mbSection.title}} </h2>'),a.put("views/directives/mb-tree-link.html","<md-button md-colors=\"{backgroundColor: (isSelected(mbSection.state) || $state.includes(mbSection.state)) ? 'primary.800': 'primary'}\" class=\"md-raised md-primary md-hue-1\" ng-click=focusSection(mbSection)> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> <span translate>{{mbSection.title}}</span> <span class=md-visually-hidden ng-if=isSelected(mbSection)> current page </span> </md-button>"),a.put("views/directives/mb-tree-toggle.html",'<div> <md-button class="md-raised md-primary md-hue-1 md-button-toggle" ng-click=toggle(mbSection) aria-controls=docs-menu-{{section.name}} aria-expanded={{isOpen(mbSection)}}> <div flex layout=row> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> <span class=mb-toggle-title translate>{{mbSection.title}}</span> <span flex></span> <span aria-hidden=true class=md-toggle-icon ng-class="{toggled : isOpen(mbSection)}"> <wb-icon>keyboard_arrow_up</wb-icon> </span> </div> <span class=md-visually-hidden> Toggle {{isOpen(mbSection)? expanded : collapsed}} </span> </md-button> <ul id=docs-menu-{{mbSection.title}} class=mb-tree-toggle-list> <li ng-repeat="section in mbSection.sections" ng-if=isVisible(section)> <mb-tree-link mb-section=section ng-if="section.type === \'link\'"> </mb-tree-link> </li> </ul> </div>'),a.put("views/directives/mb-tree.html","<ul class=mb-tree> <li mb-color=\"{borderBottom-color: 'background.600'}\" ng-repeat=\"section in mbSection.sections | orderBy : 'priority'\" ng-if=isVisible(section)> <mb-tree-heading mb-section=section ng-if=\"$parent.section.type === 'heading'\"> </mb-tree-heading> <mb-tree-link mb-section=section ng-if=\"$parent.section.type === 'link'\"> </mb-tree-link> <mb-tree-toggle mb-section=section ng-if=\"section.type === 'toggle'\"> </mb-tree-toggle>                </li> </ul>"),a.put("views/directives/mb-user-menu.html",'<div md-colors="{\'background-color\': \'primary-400\'}" class=amd-user-menu> <md-menu md-offset="0 20"> <md-button class=amd-user-menu-button ng-click=$mdOpenMenu() aria-label="Open menu"> <img height=32px class=img-circle ng-src={{app.user.current.avatar}}> <span>{{app.user.current.first_name}} {{app.user.current.last_name}}</span> <wb-icon class=material-icons>keyboard_arrow_down</wb-icon> </md-button> <md-menu-content width=3>  <md-menu-item ng-if=menu.items.length ng-repeat="item in menu.items | orderBy:[\'-priority\']"> <md-button ng-click=item.active() translate> <wb-icon ng-if=item.icon>{{item.icon}}</wb-icon> <span ng-if=item.title translate>{{item.title}}</span> </md-button> </md-menu-item> <md-menu-divider ng-if=menu.items.length></md-menu-divider> <md-menu-item> <md-button ng-click=settings() translate>Settings</md-button> </md-menu-item> <md-menu-item> <md-button ng-click=logout() translate>Log out</md-button> </md-menu-item> </md-menu-content> </md-menu> </div>'),a.put("views/directives/mb-user-toolbar.html",'<md-toolbar layout=row layout-align="center center"> <img width=80px class=img-circle ng-src={{app.user.current.avatar}}> <md-menu md-offset="0 20"> <md-button class=capitalize ng-click=$mdOpenMenu() aria-label="Open menu"> <span>{{app.user.current.first_name}} {{app.user.current.last_name}}</span> <wb-icon class=material-icons>keyboard_arrow_down</wb-icon> </md-button> <md-menu-content width=3>  <md-menu-item ng-if=menu.items.length ng-repeat="item in menu.items | orderBy:[\'-priority\']"> <md-button ng-click=item.active() translate> <wb-icon ng-if=item.icon>{{item.icon}}</wb-icon> <span ng-if=item.title translate>{{item.title}}</span> </md-button> </md-menu-item> <md-menu-divider></md-menu-divider> <md-menu-item> <md-button ng-click=toggleRightSidebar();logout(); translate>Log out</md-button> </md-menu-item> </md-menu-content> </md-menu> </md-toolbar>'),a.put("views/mb-initial.html",'<md-content layout=column flex> <mb-preference-page mb-preference-id=pageId> </mb-preference-page> <md-stepper id=setting-stepper ng-show=app.initial md-mobile-step-text=false md-vertical=false md-linear=false md-alternative=true> <md-step md-label={{item.title}} ng-repeat="item in settings"> <md-step-actions layout=row> <md-button ng-show="$index !== 0" class="md-primary md-raised" ng-click=prevStep() translate>back</md-button> <div flex></div> <md-button ng-show="$index < settings.length-1" class="md-primary md-raised" ng-click=nextStep() translate>next</md-button> <md-button ng-show="$index === settings.length-1" class="md-primary md-raised" ng-href="/" translate>go to site</md-button> </md-step-actions> </md-step> </md-stepper> </md-content>'),a.put("views/mb-passowrd-recover.html",' <md-toolbar layout-padding>  <h3>Forget Your PassWord ?</h3> </md-toolbar>  <div layout=column layout-padding> <md-input-container> <label>Username or Email</label> <input ng-model=credit.login required> </md-input-container> </div> <div layout=column layout-align=none layout-gt-sm=row layout-align-gt-sm="space-between center" layout-padding> <a ui-sref=login flex-order=1 flex-order-gt-sm=-1>Back To Login Page</a> <md-button flex-order=0 class="md-primary md-raised" ng-click=login(credit)>Send</md-button> </div>'),a.put("views/mb-preference.html","<md-content ng-cloak flex> <table> <tr> <td> <wb-icon wb-icon-name={{preference.icon}} size=128> </wb-icon> </td> <td><h1 translate>{{preference.title}}</h1> <p translate>{{preference.description}}</p></td> </tr> </table> <mb-preference-page mb-preference-id=preference.id> </mb-preference-page> </md-content>"),a.put("views/mb-preferences.html",'<md-content ng-cloak layout-padding flex> <md-grid-list md-cols-gt-md=4 md-cols=2 md-cols-md=3 md-row-height=4:3 md-gutter-gt-md=16px md-gutter-md=8px md-gutter=4px> <md-grid-tile ng-repeat="tile in preferenceTiles" md-colors="{backgroundColor: \'primary-300\'}" md-colspan-gt-sm={{tile.colspan}} md-rowspan-gt-sm={{tile.rowspan}} ng-click=openPreference(tile)> <md-grid-tile-header> <h3 style="text-align: center;font-weight: bold"> <wb-icon>{{tile.page.icon}}</wb-icon> {{tile.page.title}} </h3> </md-grid-tile-header> <p style="text-align: justify" layout-padding> {{tile.page.description}} </p> </md-grid-tile> </md-grid-list> </md-content>'),a.put("views/preferences/congratulate.html",' <md-content layout=column layout-align=none layout-align-gt-sm="none center" flex> <div flex=none layout=column layout-padding> <h1 translate>Congratulate :)</h1> <p translate> Congratulate, your site is ready. You can start design your site. </p> </div> </md-content>'),a.put("views/preferences/mb-brand.html",'<div layout=column ng-cloak flex> <md-input-container class=md-block> <label translate>Title</label> <input required md-no-asterisk name=title ng-model="app.config.title"> </md-input-container> <md-input-container class=md-block> <label translate>Description</label> <input md-no-asterisk name=description ng-model="app.config.description"> </md-input-container> <wb-ui-setting-image title=Logo value=app.config.logo> </wb-ui-setting-image> </div>'),a.put("views/preferences/mb-google-analytic.html",'<div layout=column ng-cloak flex> <md-input-container class=md-block> <label>Google analytic property</label> <input required md-no-asterisk name=property ng-model="app.config.googleAnalytic.property"> </md-input-container> </div>'),a.put("views/preferences/mb-local.html","<div layout=column ng-cloak flex> <md-input-container class=md-block> <label translate>Language</label> <md-select ng-model=app.config.local> <md-option value=fa translate>Persian</md-option> <md-option value=en translate>English</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Direction</label> <md-select ng-model=app.config.dir placeholder=Direction> <md-option value=rtl translate>Right to left</md-option> <md-option value=ltr translate>Left to right</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Calendar</label> <md-select ng-model=app.config.calendar placeholder=\"\"> <md-option value=Gregorian translate>Gregorian</md-option> <md-option value=Jalaali translate>Jalaali</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Date format</label> <md-select ng-model=app.config.dateFormat placeholder=\"\"> <md-option value=jMM-jDD-jYYYY translate> {{'2018-01-01' | amddate:'jMM-jDD-jYYYY'}} </md-option> <md-option value=jYYYY-jMM-jDD translate> {{'2018-01-01' | amddate:'jYYYY-jMM-jDD'}} </md-option> <md-option value=\"jYYYY jMMMM jDD\" translate> {{'2018-01-01' | amddate:'jYYYY jMMMM jDD'}} </md-option> </md-select> </md-input-container> </div>"),a.put("views/preferences/update.html","<md-switch class=md-secondary ng-model=app.config.update.hideMessage> <p translate>Show update message to customers</p> </md-switch> <md-switch class=md-secondary ng-model=app.config.update.autoCheck> <p translate>Check update automaticlly</p> </md-switch>"),a.put("views/preferences/welcome.html",' <md-content layout=column layout-align=none layout-align-gt-sm="none center" flex> <div flex=none layout=column layout-padding> <h1 translate>Welcome</h1> <p translate> It is your site. You should determine some little settings before launch your site. After that your site is ready. These settings and some more could be set at future in settings section of your site. If you are not login please login to change settings. </p> </div> <div flex=none layout=column>  <form ng-show=app.user.anonymous style="border: solid 1px" md-colors="{borderColor:\'default-primary-100\'}" name=form ng-submit=login(credit) layout=column layout-padding> <div layout-padding> <p><span md-colors="{color:\'default-warn\'}" translate>{{loginMessage}}</span></p> </div> <md-input-container> <label translate>username or email</label> <input ng-model=credit.login required> </md-input-container> <md-input-container> <label translate>password</label> <input ng-model=credit.password required type=password> </md-input-container>     <div ng-if="app.captcha.engine===\'recaptcha\'" vc-recaptcha ng-model=credit.g_recaptcha_response theme="app.captcha.theme || \'light\'" type="app.captcha.type || \'image\'" key=app.captcha.recaptcha.key lang="app.captcha.language || \'fa\'"> </div> <input hide type="submit"> <div layout=column layout-align=none layout-gt-xs=row layout-align-gt-xs="center center" layout-padding> <md-button ng-disabled=form.$invalid flex-order=-1 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=login(credit)>{{\'login\' | translate}}</md-button> </div> </form> <div layout-padding ng-show=!app.user.anonymous layout=column layout-align="none center"> <img width=150px height=150px ng-show=!uploadAvatar ng-src="{{app.user.current.avatar}}"> <h3>{{app.user.current.login}}</h3> <p translate>continue to set some options and settings.</p> </div> </div> </md-content>'),a.put("views/resources/mb-sidenav.html",""),a.put("views/settings/mb-local.html","<section class=\"demo-container md-whiteframe-z1 show-source\" layout=column layout-padding> <h3 translate>Theme</h3> <md-divider></md-divider> <md-input-container ng-controller=AmdThemesCtrl class=md-block> <label translate>Theme</label> <md-select ng-model=app.setting.theme> <md-option ng-repeat=\"theme in themes\" value={{theme.id}} translate>{{theme.label}}</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <md-switch class=md-primary name=special ng-model=app.setting.navigationPath> <sapn flex translate>Navigation path</sapn> </md-switch> </md-input-container> </section> <section class=\"demo-container md-whiteframe-z1 show-source\" layout-padding> <h3 translate>Local</h3> <md-divider></md-divider> <md-input-container class=md-block> <label translate>Language&Local</label> <md-select ng-model=app.setting.local> <md-option value=fa translate>Persian</md-option> <md-option value=en translate>English</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Direction</label> <md-select ng-model=app.setting.dir placeholder=Direction> <md-option value=rtl translate>Right to left</md-option> <md-option value=ltr translate>Left to right</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Calendar</label> <md-select ng-model=app.setting.calendar placeholder=\"\"> <md-option value=Gregorian translate>Gregorian</md-option> <md-option value=Jalaali translate>Jalaali</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Date format</label> <md-select ng-model=app.setting.dateFormat placeholder=\"\"> <md-option value=jMM-jDD-jYYYY translate> {{'2018-01-01' | amddate:'jMM-jDD-jYYYY'}} </md-option> <md-option value=jYYYY-jMM-jDD translate> {{'2018-01-01' | amddate:'jYYYY-jMM-jDD'}} </md-option> <md-option value=\"jYYYY jMMMM jDD\" translate> {{'2018-01-01' | amddate:'jYYYY jMMMM jDD'}} </md-option> </md-select> </md-input-container> </section>"),a.put("views/settings/mb-theme.html","<section class=\"demo-container md-whiteframe-z1 show-source\" layout=column layout-padding> <h3 translate>Theme</h3> <md-divider></md-divider> <md-input-container ng-controller=AmdThemesCtrl class=md-block> <label translate>Theme</label> <md-select ng-model=app.setting.theme> <md-option ng-repeat=\"theme in themes\" value={{theme.id}} translate>{{theme.label}}</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <md-switch class=md-primary name=special ng-model=app.setting.navigationPath> <sapn flex translate>Navigation path</sapn> </md-switch> </md-input-container> </section> <section class=\"demo-container md-whiteframe-z1 show-source\" layout-padding> <h3 translate>Local</h3> <md-divider></md-divider> <md-input-container class=md-block> <label translate>Language&Local</label> <md-select ng-model=app.setting.local> <md-option value=fa translate>Persian</md-option> <md-option value=en translate>English</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Direction</label> <md-select ng-model=app.setting.dir placeholder=Direction> <md-option value=rtl translate>Right to left</md-option> <md-option value=ltr translate>Left to right</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Calendar</label> <md-select ng-model=app.setting.calendar placeholder=\"\"> <md-option value=Gregorian translate>Gregorian</md-option> <md-option value=Jalaali translate>Jalaali</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Date format</label> <md-select ng-model=app.setting.dateFormat placeholder=\"\"> <md-option value=jMM-jDD-jYYYY translate> {{'2018-01-01' | amddate:'jMM-jDD-jYYYY'}} </md-option> <md-option value=jYYYY-jMM-jDD translate> {{'2018-01-01' | amddate:'jYYYY-jMM-jDD'}} </md-option> <md-option value=\"jYYYY jMMMM jDD\" translate> {{'2018-01-01' | amddate:'jYYYY jMMMM jDD'}} </md-option> </md-select> </md-input-container> </section>"),a.put("views/sidenavs/mb-help.html",'<md-toolbar class=md-hue-1 layout=column layout-align=center> <div layout=row layout-align="start center"> <md-button class=md-icon-button aria-label=Close ng-click=closeHelp()> <wb-icon>close</wb-icon> </md-button> <span flex></span> <h4 translate>Help</h4> </div> </md-toolbar> <md-content flex> <wb-content wb-model=helpContent></wb-content> </md-content>'),a.put("views/sidenavs/mb-navigator.html",'<md-toolbar class=md-whiteframe-z2 layout=column layout-align="start center"> <img width=128px height=128px ng-show=app.config.logo ng-src="{{app.config.logo}}"> <strong>{{app.config.title}}</strong> <p style="text-align: center">{{app.config.description}}</p> </md-toolbar> <md-content> <mb-tree mb-section=menuItems>  </mb-tree></md-content>'),a.put("views/sidenavs/mb-settings.html"," <amd-user-toolbar amd-actions=userActions> </amd-user-toolbar>  <amd-dynamic-tabs amd-tabs=settingTabs> </amd-dynamic-tabs>"),a.put("views/toolbars/mb-dashboard.html",'<div layout=row layout-align="start center"> <md-button class=md-icon-button hide-gt-sm ng-click=toggleItemsList() aria-label=Menu> <wb-icon>menu</wb-icon> </md-button> <img hide-gt-sm height=32px ng-if=app.config.logo ng-src="{{app.config.logo}}"> <strong hide-gt-sm style="padding: 0px 8px 0px 8px"> {{app.config.title}} </strong> <mb-navigation-bar hide show-gt-sm ng-show=app.setting.navigationPath> </mb-navigation-bar> </div> <div layout=row layout-align="end center">  <md-button ng-repeat="menu in scopeMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-click=menu.active() class=md-icon-button> <md-tooltip ng-if=menu.tooltip>{{menu.tooltip}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button> <md-divider ng-if=scopeMenu.items.length></md-divider> <md-button ng-repeat="menu in toolbarMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-click=menu.active() class=md-icon-button> <md-tooltip ng-if=menu.tooltip>{{menu.tooltip}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button>             <mb-user-menu></mb-user-menu> <md-button ng-repeat="menu in userMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-click=menu.active() class=md-icon-button> <md-tooltip ng-if=menu.tooltip>{{menu.tooltip}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button> </div>')}]);