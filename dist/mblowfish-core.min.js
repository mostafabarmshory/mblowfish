"use strict";function MbItemsCtrl(a,b,c,d){var e="init",f="busy",g="ideal";this.state=g,this.items=[],this.state="init",this.lastResponse=null,this.queryParameter=new d,this.queryParameter.setOrder("id","d"),this.reload=function(){return this.state=e,delete this.requests,this.items=[],this.state=g,this.loadNextPage()},this.loadNextPage=function(){if(!angular.isFunction(this.getItems))throw"The controller dose not implement getItems function";if(this.state!==g)throw"Items controller is not in ideal state";if(this.state=f,this.lastResponse){if(!this.lastResponse.hasMore())return c.resolve();this.queryParameter.setPage(lastResponse.next())}var a=this;return this.getItems(this.queryParameter).then(function(b){a.lastResponse=b,a.items=a.items.concat(b.items),a.error=null},function(b){a.error=b})["finally"](function(){a.state=f})},this.setDataQuery=function(a){this.grqphql=a},this.getProperties=function(){if(!angular.isFunction(this.getSchema))return[];if(angular.isDefined(this._schema))return this._schema;var a=this;return c.when(this.getSchema()).then(function(b){a._schema=b}),[]},this.getActions=function(){this._actions;angular.isFunction(this.addItem)},this.addAction=function(a){angular.isDefined(this._actions)||(this._actions=[]),this._actions=this._actions.concat(a)},this.getSchema=function(){return c.resolve({name:"Item",properties:[{id:"int",title:"string"}]})},this.getItems=function(a){},this.getItem=function(a){},this.addItem=function(){var a={id:random(),title:"test item"};return c.accept(a)},this.deleteItem=function(){}}angular.module("mblowfish-core",["ngMaterial","ngAnimate","ngCookies","ngSanitize","ngRoute","seen-core","seen-tenant","seen-cms","am-wb-core","am-wb-common","lfNgMdFileInput","ngStorage","vcRecaptcha","infinite-scroll","nvd3","ng-appcache","ngFileSaver","mdSteppers","angular-material-persian-datepicker"]),angular.module("mblowfish-core").config(["$mdDateLocaleProvider",function(a){moment.locale("en");var b=moment.localeData();a.months=b._months,a.shortMonths=moment.monthsShort(),a.days=b._weekdays,a.shortDays=b._weekdaysMin,a.firstDayOfWeek=b._week.dow,a.parseDate=function(a){var b=moment(a,"L",!0);return b.isValid()?b.toDate():new Date(NaN)},a.formatDate=function(a){var b=moment(a);return b.isValid()?b.format("L"):""}}]),angular.module("mblowfish-core").config(["$routeProvider","$locationProvider",function(a,b){a.when("/initialization",{templateUrl:"views/mb-initial.html",controller:"MbInitialCtrl",controllerAs:"ctrl",protect:["$rootScope",function(a){return!a.app.user.owner}],sidenavs:[],toolbars:[]}).when("/preferences",{templateUrl:"views/mb-preferences.html",controller:"MbPreferencesCtrl",controllerAs:"ctrl",helpId:"preferences",protect:["$rootScope",function(a){return!a.app.user.owner}]}).when("/preferences/:preferenceId",{templateUrl:"views/mb-preference.html",controller:"MbPreferenceCtrl",helpId:["$routeParams",function(a){return"preference-"+a.preferenceId}],protect:["$rootScope",function(a){return!a.app.user.owner}]}).when("/users/login",{templateUrl:"views/users/mb-login.html",controller:"MbAccountCtrl",sidenavs:[],toolbars:[]}).when("/users/account",{templateUrl:"views/users/mb-account.html",controller:"MbAccountCtrl",protect:!0}).when("/users/profile",{templateUrl:"views/users/mb-profile.html",controller:"MbProfileCtrl",protect:!0}).when("/users/reset-password",{templateUrl:"views/users/mb-forgot-password.html",controller:"MbPasswordCtrl",sidenavs:[],toolbars:[]}).when("/users/reset-password/token",{templateUrl:"views/users/mb-recover-password.html",controller:"MbPasswordCtrl",sidenavs:[],toolbars:[]}).when("/users/reset-password/token/:token",{templateUrl:"views/users/mb-recover-password.html",controller:"MbPasswordCtrl",sidenavs:[],toolbars:[]}),b.html5Mode(!0)}]),angular.module("mblowfish-core").config(["$mdThemingProvider",function(a){a.definePalette("amdPrimaryPalette",{50:"#FFFFFF",100:"rgb(255, 198, 197)",200:"#E75753",300:"#E75753",400:"#E75753",500:"#E75753",600:"#E75753",700:"#E75753",800:"#E75753",900:"#E75753",A100:"#E75753",A200:"#E75753",A400:"#E75753",A700:"#E75753"}),a.theme("dark").primaryPalette("amdPrimaryPalette").dark(),a.alwaysWatchTheme(!0)}]),angular.module("mblowfish-core").controller("MbAccountCtrl",["$scope","$rootScope","$app","$translate","$window","$usr","$errorHandler",function(a,b,c,d,e,f,g){function h(b,d){return o.loginProcess?!1:(o.loginProcess=!0,c.login(b).then(function(){o.loginState="success",a.loginMessage=null},function(b){o.loginState="fail",a.loginMessage=g.handleError(b,d)})["finally"](function(){o.loginProcess=!1}))}function i(){return o.logoutProcess?!1:(o.logoutProcess=!0,c.logout().then(function(){o.logoutState="success"},function(){o.logoutState="fail"})["finally"](function(){o.logoutProcess=!1}))}function j(b,e){if(!o.changingPassword){o.changingPassword=!0;var f={old:b.oldPass,"new":b.newPass,password:b.newPass};a.app.user.current.putCridential(f).then(function(){c.logout(),o.changePassState="success",a.changePassMessage=null,toast(d.instant("Password is changed successfully. Login with new password."))},function(b){o.changePassState="fail",a.changePassMessage=g.handleError(b,e),alert(d.instant("Failed to change new password."))})["finally"](function(){o.changingPassword=!1})}}function k(a){return o.updatingAvatar?void 0:(o.updatingAvatar=!0,o.user.uploadAvatar(a[0].lfFile).then(function(){e.location.reload(),toast(d.instant("Your avatar updated successfully."))},function(){alert(d.instant("Failed to update avatar"))})["finally"](function(){o.updatingAvatar=!1}))}function l(){e.history.back()}function m(){return o.loadingUser?void 0:(o.loadingUser=!0,f.getAccount("current").then(function(a){o.user=a},function(a){o.error=a})["finally"](function(){o.loadingUser=!1}))}function n(b){return o.savingUser?void 0:(o.savingUser=!0,o.user.update().then(function(b){o.user=b,a.saveUserMessage=null,toast(d.instant("Your information updated successfully."))},function(c){a.saveUserMessage=g.handleError(c,b),alert(d.instant("Failed to update."))})["finally"](function(){o.savingUser=!1}))}var o={loginProcess:!1,loginState:null,logoutProcess:!1,logoutState:null,changingPassword:!1,changePassState:null,updatingAvatar:!1,loadingUser:!1,savingUser:!1};a.apds=[{key:"first_name",title:"First name",type:"string"},{key:"last_name",title:"Last name",type:"string"},{key:"language",title:"language",type:"string"},{key:"timezone",title:"timezone",type:"string"}],a.$watch(function(){return b.app.user},function(b){a.appUser=b},!0),a.ctrl=o,a.login=h,a.logout=i,a.changePassword=j,a.updateAvatar=k,a.load=m,a.reload=m,a.saveUser=n,a.back=l,a.cancel=l,m()}]),angular.module("mblowfish-core").controller("MbAccountsCtrl",["$scope","$usr","$controller",function(a,b,c){angular.extend(this,c("MbItemsCtrl",{$scope:a})),this.getSchema=function(){return $q.resolve({name:"account",properties:[{name:"Id",type:"int"}]})},this.getItems=function(a){return b.getAccounts(a)},this.getItem=function(a){return b.getAccount(a)},this.deleteItem=function(a){return b.deleteAccount(a.id)}}]),angular.module("mblowfish-core").controller("AmdDashboardCtrl",["$scope","$navigator","$app",function(a,b,c){function d(){a.editable=!a.editable}b.scopePath(a).add({title:"Dashboard",link:"dashboard"}),c.scopeMenu(a).add({priority:15,icon:"edit",label:"Edit content",tooltip:"Toggle edit mode of the current contetn",visible:function(){return a.app.user.owner},action:d})}]),angular.module("mblowfish-core").controller("MbGroupsCtrl",["$scope","$usr","$q","$controller",function(a,b,c,d){angular.extend(this,d("MbItemsCtrl",{$scope:a})),this.getSchema=function(){return c.resolve({name:"group",properties:[{name:"Id",type:"int"}]})},this.getItems=function(a){return b.getGroups(a)},this.getItem=function(a){return b.getGroup(a)},this.deleteItem=function(a){return b.deleteRole(a.id)}}]),angular.module("mblowfish-core").controller("MbHelpCtrl",["$scope","$rootScope","$route","$http","$translate","$help",function(a,b,c,d,e,f){function g(b){if(a.helpLoading)return a.helpLoading;var c=f.getHelpPath(b);return c&&c!==h&&(a.helpLoading=d.get(c).then(function(b){a.helpContent=b.data,h=c})["finally"](function(){a.helpLoading=!1})),a.helpLoading}b.showHelp=!1;var h;a.closeHelp=function(){b.showHelp=!1},a.$watch("showHelp",function(a){return a?g():void 0}),a.$watch(function(){return c.current?c.current.$$route:null},g),a.$watch(function(){return f.currentItem()},g)}]),angular.module("mblowfish-core").controller("MbInitialCtrl",["$scope","$rootScope","$preferences","$mdStepper","$window","$routeParams",function(a,b,c,d,e,f){function g(a){b.app.config.is_initialized=!0}function h(){return!f.force&&b.app.config.is_initialized}function i(){e.location=e.location.href.replace(/initialization$/gm,"")}function j(){var b={id:"initial-language",title:"Language",templateUrl:"views/preferences/mb-language.html",controller:"MbLanguageCtrl",description:"Select default language of web application.",icon:"language",priority:"first",required:!0},e='<wb-content wb-model="model" flex style="overflow: auto;"></wb-content>',f={id:"welcome",title:"Welcome",template:e,controller:["$scope","$http","$translate",function(a,b,c){b.get("resources/welcome/"+c.use()+".json").then(function(b){a.model=b.data||{}})}],description:"Welcome. Please login to continue.",icon:"accessibility",priority:"first",required:!0},h={id:"congratulate",title:":)",description:"Congratulation. Your site is ready.",template:e,controller:["$scope","$http","$translate",function(a,b,c){b.get("resources/congratulate/"+c.use()+".json").then(function(b){a.model=b.data||{}}),g(!0)}],icon:"favorite",priority:"last",required:!0};c.newPage(b),c.newPage(f),c.newPage(h),c.pages().then(function(b){var c=[];b.items.forEach(function(a){a.required&&c.push(a)}),a.steps=c}),a.$watch(function(){var a=d(k);return a?a.currentStep:-1},function(b){b>=0&&a.steps&&a.steps.length&&(a.currentStep=a.steps[b])})}var k="setting-stepper",l=a.$watch("app.state.status",function(a){switch(a){case"loading":case"fail":case"error":break;case"ready":l(),h()?i():j()}})}]),MbItemsCtrl.$inject=["$scope","$usr","$q","QueryParameter"],angular.module("mblowfish-core").controller("MbItemsCtrl",MbItemsCtrl),angular.module("mblowfish-core").controller("MbLanguageCtrl",["$scope","$app","$rootScope","$http","$language",function(a,b,c,d,e){function f(){d.get("resources/languages.json").then(function(b){var c=b?b.data:{};a.languages=c.languages})["finally"](function(){var b=e.use();if(a.languages)for(var c=0;c<a.languages.length;c++)if(a.languages[c].key===b)return void g(a.languages[c])})}function g(b){a.myLanguage=b,c.app.config.languages=[],c.app.config.languages.push(a.myLanguage),e.use(a.myLanguage.key),c.app.config.local=c.app.config.local||{},angular.isObject(c.app.config.local)||(c.app.config.local={}),c.app.config.local.language=a.myLanguage.key,a.myLanguage.dir&&(c.app.config.local.dir=a.myLanguage.dir)}a.setLanguage=g,f()}]),angular.module("mblowfish-core").controller("MbLocalCtrl",["$scope","$language","$navigator",function(a,b,c){function d(){b.languages().then(function(b){return a.languages=b.items,a.languages})}a.goToManage=function(){c.openPage("preferences/languages/manager")},a.languages=[],d()}]),angular.module("mblowfish-core").controller("MessagesCtrl",["$scope","QueryParameter","$rootScope",function(a,b,c){function d(a){return h.setQuery(a),g()}function e(){if("working"!==j.status&&(!i||i.hasMore())){i&&h.setPage(i.next()),j.status="working";var a=c.app.user.current;return a.getMessages(h).then(function(a){i=a,j.items=j.items.concat(i.items),j.status="relax"},function(){j.status="fail"})}}function f(a){return a["delete"]().then(function(){var b=j.items.indexOf(a);b>-1&&j.items.splice(b,1),0===j.items.length&&g()})}function g(){return i=null,j.items=[],e()}var h=new b;h.setOrder("id","d");var i=null,j={state:"relax",items:[]};a.items=[],a.reload=g,a.search=d,a.nextMessages=e,a.remove=f,a.ctrl=j,a.qp=h,g()}]),angular.module("mblowfish-core").controller("AmdNavigatorDialogCtrl",["$scope","$mdDialog","config",function(a,b,c){a.config=c,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){b.hide(a)}}]),angular.module("mblowfish-core").controller("AmdNavigatorCtrl",["$scope","$navigator","$route",function(a,b,c){function d(){var d=[];angular.forEach(c.routes,function(a,b){a.navigate&&(a.type="link",a.link=a.originalPath,a.title=a.title||a.name||"no-name",a.priority=a.priority||100,d.push(a))}),angular.forEach(b.items(),function(a){d.push(a)}),a.menuItems={hiden:!1,sections:[]};var e=[];angular.forEach(d,function(c){c.groups?angular.forEach(c.groups,function(d){var f=b.group(d);f.id in e||(e[f.id]=angular.extend({type:"toggle",sections:[]},f),a.menuItems.sections.push(e[f.id])),e[f.id].sections.push(c)}):a.menuItems.sections.push(c)})}d()}]),angular.module("mblowfish-core").controller("MbOptionsCtrl",["$scope","$options",function(a,b){b.pages().then(function(b){a.tabs=b.items})}]),angular.module("mblowfish-core").controller("MbPasswordCtrl",["$scope","$usr","$location","$navigator","$routeParams","$window","$errorHandler",function(a,b,c,d,e,f,g){function h(d,e){return k.sendingToken?!1:(k.sendingToken=!0,d.callback=c.absUrl()+"/token/{{token}}",b.resetPassword(d).then(function(){k.sendTokenState="success",a.sendingTokenMessage=null},function(b){k.sendTokenState="fail",a.sendingTokenMessage=g.handleError(b,e)})["finally"](function(){k.sendingToken=!1}))}function i(c,e){if(k.changingPass)return!1;k.changingPass=!0;var f={token:c.token,"new":c.password};return b.resetPassword(f).then(function(){k.changePassState="success",a.changePassMessage=null,d.openView("users/login")},function(b){k.changePassState="fail",a.changePassMessage=g.handleError(b,e)})["finally"](function(){k.changingPass=!1})}function j(){f.history.back()}var k={sendingToken:!1,sendTokenState:null,changingPass:!1,changingPassState:null};a.data={},a.data.token=e.token,a.ctrl=k,a.sendToken=h,a.changePassword=i,a.cancel=j}]),angular.module("mblowfish-core").controller("MbPreferenceCtrl",["$scope","$routeParams","$navigator","$preferences",function(a,b,c,d){d.page(b.preferenceId).then(function(b){a.preference=b},function(){c.openPage("preferences")}),a.preferenceId=b.preferenceId}]),angular.module("mblowfish-core").controller("MbPreferencesCtrl",["$scope","$preferences",function(a,b){function c(a){b.openPage(a)}b.pages().then(function(b){a.preferenceTiles=[],a.pages=[];for(var c=0;c<b.items.length;c++){var d=b.items[c];d.hidden||(a.preferenceTiles.push({colspan:1,rowspan:1,page:d}),a.pages.push(d))}}),a.openPreference=c}]),angular.module("mblowfish-core").controller("MbProfileCtrl",["$scope","$rootScope","$translate","$window","$q",function(a,b,c,d,e){function f(){j.user=b.app.user.current,j.user?g(j.user):alert(c.instant("Fail to load user."))}function g(a){return j.loadinProfile?void 0:(j.loadingProfile=!0,a.getProfiles().then(function(a){return j.profile=a,a},function(){alert(c.instant("Fial to load profile."))})["finally"](function(){j.loadingProfile=!1}))}function h(){return j.savingProfile?void 0:(j.savingProfile=!0,j.profile.update().then(function(){toast(c.instant("Save is successfull."))},function(){alert(c.instant("Fail to save item."))})["finally"](function(){j.savingProfile=!1}))}function i(){d.history.back()}var j={user:null,profile:null};a.ctrl=j,a.load=f,a.reload=f,a.save=h,a.back=i,a.cancel=i,f()}]),angular.module("mblowfish-core").controller("MbRolesCtrl",["$scope","$usr","$q","$controller",function(a,b,c,d){angular.extend(this,d("MbItemsCtrl",{$scope:a})),this.getSchema=function(){return c.resolve({name:"role",properties:[{name:"Id",type:"int"}]})},this.getItems=function(a){return b.getRoles(a)},this.getItem=function(a){return b.getRole(a)},this.deleteItem=function(a){return b.deleteRole(a.id)}}]),angular.module("mblowfish-core").controller("MbThemesCtrl",["$scope","$mdTheming",function(a,b){a.themes=[],angular.forEach(b.THEMES,function(b,c){a.themes.push({id:c,label:b.name})})}]),angular.module("mblowfish-core").controller("MbToolbarDashboardCtrl",["$scope","$actions","$mdSidenav",function(a,b,c){function d(){c("navigator").toggle()}function e(){c("messages").toggle()}a.toolbarMenu=b.group("mb.toolbar.menu"),a.toggleNavigationSidenav=d,a.toggleMessageSidenav=e}]),angular.module("mblowfish-core").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b===a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}),angular.module("mblowfish-core").directive("mbBadge",["$mdTheming","$rootScope",function(a,b){function c(c){var d=(c||"").split("-");d.length<2&&d.push("500");var e=d[1]||"800",f=d[0]||"primary",g=a.THEMES[b.app.setting.theme||b.app.config.theme||"default"];"undefined"==typeof g&&(g=a.THEMES["default"]);var h=g.colors[f]?g.colors[f].name:f,i=a.PALETTES[h][e]?a.PALETTES[h][e].value:a.PALETTES[h][500].value;return"rgb("+i.join(",")+")"}function d(b,d,e){function f(a,b){b&&d.css(a,c(b))}a(d),b.$watch(function(){return e.mbBadgeColor},function(a){f("color",a)}),b.$watch(function(){return e.mbBadgeFill},function(a){f("background-color",a)})}return{restrict:"E",replace:!0,transclude:!0,link:d,template:function(a,b){return'<div class="mb-badge" ng-transclude></div>'}}}]),angular.module("mblowfish-core").directive("mbBadge",["$mdTheming","$mdColors","$timeout","$window","$compile","$rootScope",function(a,b,c,d,e,f){function g(b){var c=(b||"").split("-");c.length<2&&c.push("500");var d=c[1]||"800",e=c[0]||"primary",g=a.THEMES[f.app.setting.theme||f.app.config.theme||"default"];"undefined"==typeof g&&(g=a.THEMES["default"]);var h=g.colors[e]?g.colors[e].name:e,i=a.PALETTES[h][d]?a.PALETTES[h][d].value:a.PALETTES[h][500].value;return"rgb("+i.join(",")+")"}function h(b,c,d){function f(a,b){b&&m.css(a,g(b))}function h(){return{top:c.prop("offsetTop"),left:c.prop("offsetLeft"),width:c.prop("offsetWidth"),height:c.prop("offsetHeight")}}function i(a){var b=c.prop("offsetTop");m.css({display:d.mbBadge&&b?"initial":"none",left:a.left+a.width-20+n+"px",top:a.top+a.height-20+n+"px"})}a(c);var j=c.parent(),k=angular.element("<div></div>"),l=e(k),m=l(b),n=parseInt(d.mdBadgeOffset);isNaN(n)&&(n=10),m.addClass("mb-badge"),m.css("position","absolute"),j.append(m),b.$watch(function(){return d.mbBadgeColor},function(a){f("color",a)}),b.$watch(function(){return d.mbBadgeFill},function(a){f("background-color",a)}),b.$watch(function(){return d.mbBadge},function(a){m.text(a),m.css("display",a?"initial":"none")}),b.$watch(h,function(a){i(a)},!0)}return{priority:100,restrict:"A",link:h}}]),angular.module("mblowfish-core").directive("mbCaptcha",function(){function a(a,b,c,d){function e(){f&&f.$setValidity("captcha",a.required===!1?null:Boolean(a.response))}var f=d[0];d[1];f&&angular.isDefined(c.required)&&a.$watch("required",e),a._response=null,a.$watch("_response",function(){a.response=a._response}),a.$watch("response",function(){a._response=a.response})}return{restrict:"E",require:["?^^form"],templateUrl:"views/directives/mb-captcha.html",scope:{response:"=?ngModel"},link:a}}),angular.module("mblowfish-core").directive("mbDatepicker",["$mdUtil","$rootScope",function(a,b){function c(c,d,e,f){function g(){if(!i.$modelValue)return void(c.date=null);var a=moment.utc(i.$modelValue).local();return a.isValid()?void(c.date=a):void 0}function h(){if(!c.date)return void i.$setViewValue(null);var a=moment(c.date).utc().format("YYYY-MM-DD HH:mm:ss");i.$setViewValue(a)}c.app=b.app;var i=f[0]||a.fakeNgModel();i.$render=g,c.$watch("date",h)}return{replace:!1,template:function(){return"Gregorian"===b.app.calendar?'<md-datepicker ng-model="date" md-hide-icons="calendar" md-placeholder="{{placeholder || \'Enter date\'}}"></md-datepicker>':'<md-persian-datepicker ng-model="date" md-hide-icons="calendar" md-placeholder="{{placeholder || \'Enter date\'}}"></md-persian-datepicker>'},restrict:"E",scope:{minDate:"=mbMinDate",maxDate:"=mbMaxDate",placeholder:"@mbPlaceholder",hideIcons:"@?mbHideIcons"},require:["ngModel"],priority:210,link:c}}]),angular.module("mblowfish-core").directive("mbDynamicTabs",["$wbUtil","$q","$rootScope","$compile","$controller",function(a,b,c,d,e){function f(a,b){return b}function g(g,i,j){function k(j){var k=[],l=[],m=i.find("#"+h);m.empty();var n=g.mbTabs[j],o=a.getTemplateFor(n);angular.isDefined(o)&&k.push(o.then(function(a){a=f(n,a);var b=angular.element(a),h=c.$new(!1,g);h.page=n,h.value=g.value,angular.isDefined(n.controller)&&e(n.controller,{$scope:h,$element:b}),d(b)(h),l.push(b)})),b.all(k).then(function(){angular.forEach(l,function(a){m.append(a)})})}g.$watch("pageIndex",function(a){a>=0&&k(a)})}var h="mb-dynamic-tabs-select-resource-children";return{restrict:"E",replace:!0,scope:{mbTabs:"="},templateUrl:"views/directives/mb-dynamic-tabs.html",link:g}}]),angular.module("mblowfish-core").directive("mbErrorMessages",["$compile","$interpolate",function(a,b){function c(b,c){var d=null;b.errorMessages=function(a){if(a){var b={};return b[a.status]=a.statusText,b[a.data.code]=a.data.message,b}},b.$watch(function(){return b.mbErrorMessages},function(e){if(e){var f='<div ng-messages="errorMessages(mbErrorMessages)" role="alert" multiple>	<div ng-messages-include="views/mb-error-messages.html"></div></div>',g=angular.element(f),h=a(g),i=h(b);d=c.replaceWith(i)}else d&&(c.replaceWith(d),d=null)})}return{restrict:"A",scope:{mbErrorMessages:"="},link:c}}]),angular.module("mblowfish-core").directive("mbInfinateScroll",["$parse",function(a){function b(b,c,d){c.addClass("mb-infinate-scroll"),c.on("scroll",function(){var e=c[0];e.scrollTop+e.offsetHeight+5>=e.scrollHeight&&a(d.mbInfinateScroll)(b)}),a(d.mbInfinateScroll)(b)}return{restrict:"A",link:b}}]),angular.module("mblowfish-core").directive("mbNavigationBar",["$actions","$navigator",function(a,b){function c(c,d,e){c.isVisible=function(a){return angular.isUndefined(a.visible)?!0:angular.isFunction(a.visible)?a.visible():a.visible},c.goToHome=function(){b.openPage("")},c.pathMenu=a.group("navigationPathMenu")}return{restrict:"E",replace:!1,templateUrl:"views/directives/mb-navigation-bar.html",link:c}}]),angular.module("mblowfish-core").directive("mbPaginationBar",["$window","$timeout","$mdMenu","$parse",function(a,b,c,d){function e(c,e,f){function g(){angular.isDefined(f.mbReload)&&d(f.mbReload)(c)}function h(){angular.isFunction(c.mbExport)&&c.mbExport(c.mbModel)}function i(a){c.mbModel.setQuery(a),c.mbReload()}function j(c){b(function(){var b;b=a.document.getElementById(c),b.focus()},50)}var k={sortDesc:!0,sortBy:"undefined"==typeof c.mbSortKeys?"id":c.mbSortKeys[0],searchTerm:null};c.showBoxOne=!1,c.focusToElement=j,c.search=i,c.query=k,angular.isFunction(c.mbReload)&&(c.reload=g),angular.isFunction(c.mbExport)&&(c.exportData=h),"undefined"==typeof c.mbEnableSearch&&(c.mbEnableSearch=!0),c.$watch("query",function(){g()},!0)}return{restrict:"E",templateUrl:"views/directives/mb-pagination-bar.html",scope:{mbModel:"=",mbReload:"@",mbExport:"=",mbSortKeys:"=",mbSortKeysTitles:"=?",mbMoreActions:"=",mbTitle:"@?",mbIcon:"@?",mbEnableSearch:"=?"},link:e}}]),angular.module("mblowfish-core").directive("mbPanelSidenavAnchor",["$route","$sidenav","$rootScope","$mdSidenav","$q","$wbUtil","$controller","$compile",function(a,b,c,d,e,f,g,h){function i(a,b,e,i){var j=a.$new(!1,a);return j=Object.assign(j,{app:c.app,_page:b,_visible:function(){if(angular.isFunction(this._page.visible)){var a=this._page.visible(this);return a?d(this._page.id).open():d(this._page.id).close(),a}return!0}}),f.getTemplateFor(b).then(function(a){var c=angular.element(e+a+i);k.append(c);var d=h(c);if(angular.isDefined(b.controller)){var f={$scope:j,$element:c},l=g(b.controller,f);b.controllerAs&&(j[b.controllerAs]=l),c.data("$ngControllerController",l)}return{element:d(j),page:b}})}function j(c,d,f){function g(a,b){for(var c=[],d=0;d<b.length;d++){for(var e=!1,f=0;f<a.length;f++)if(a[f].id===b[d].page.id){e=!0;break}e?(b[d].element.detach(),b[d].cached=!0,c.push(b[d])):b[d].element.remove()}return c}function h(a){for(var b=0;b<l.length;b++)if(l[b].page.id==a.id)return e.when(l[b]);return i(c,a,"<md-sidenav md-theme=\"{{app.setting.theme || app.config.theme || 'default'}}\" md-theme-watch md-component-id=\"{{_page.id}}\" md-is-locked-open=\"_visible() && (_page.locked && $mdMedia('gt-sm'))\" md-whiteframe=\"2\" ng-class=\"{'md-sidenav-right': app.dir=='rtl',  'md-sidenav-left': app.dir!='rtl', 'mb-sidenav-ontop': !_page.locked}\" layout=\"column\">","</md-sidenav>").then(function(a){l.push(a)})}function j(a){l=g(a,l);for(var b=[],c=0;c<a.length;c++)b.push(h(a[c]));e.all(b).then(function(){var a=d;l.sort(function(a,b){return(a.page.priority||10)>(b.page.priority||10)});for(var b=0;b<l.length;b++){var c=l[b];c.chached||("start"===c.page.position?a.prepend(c.element):a.append(c.element))}})}function k(){if(angular.isDefined(a.current)){var c=a.current.sidenavs||b.defaultSidenavs();c=c.slice(0),c.push("settings"),c.push("help"),c.push("messages");var d=[],f=[];angular.forEach(c,function(a){f.push(b.sidenav(a).then(function(a){d.push(a)}))}),e.all(f).then(function(){j(d)})}}var l=[];c.$watch(function(){return a.current},k)}var k=angular.element("<div></div>");return{restrict:"A",priority:601,link:j}}]),angular.module("mblowfish-core").directive("mbPanelToolbarAnchor",["$route","$toolbar","$rootScope","$q","$wbUtil","$controller","$compile",function(a,b,c,d,e,f,g){function h(a,b,d,h){var i=a.$new(!1,a);return i=Object.assign(i,{app:c.app,_page:b,_visible:function(){if(angular.isFunction(this._page.visible)){var a=this._page.visible(this);return a}return!0}}),e.getTemplateFor(b).then(function(a){var c=angular.element(d+a+h),e=g(c);if(angular.isDefined(b.controller)){var j={$scope:i,$element:c},k=f(b.controller,j);b.controllerAs&&(i[b.controllerAs]=k),c.data("$ngControllerController",k)}return{element:e(i),page:b}})}function i(c,e,f){function g(a,b){for(var c=[],d=0;d<b.length;d++){for(var e=!1,f=0;f<a.length;f++)if(a[f].id===b[d].page.id){e=!0;break}e?(b[d].element.detach(),b[d].cached=!0,c.push(b[d])):b[d].element.remove()}return c}function i(a){for(var b=0;b<l.length;b++)if(l[b].page.id===a.id)return d.when(l[b]);var e=a.raw?"":'<md-toolbar ng-show="_visible()" md-theme="{{app.setting.theme || app.config.theme || \'default\'}}" md-theme-watch layout="column" layout-gt-xs="row" layout-align="space-between stretch">',f=a.raw?"":"</md-toolbar>";return h(c,a,e,f).then(function(a){l.push(a)})}function j(a){l=g(a,l);for(var b=[],c=0;c<a.length;c++)b.push(i(a[c]));d.all(b).then(function(){var a=e;l.sort(function(a,b){return(a.page.priority||10)>(b.page.priority||10)});for(var b=0;b<l.length;b++){var c=l[b];c.chached||a.prepend(c.element)}})}function k(){if(a.current){var c=a.current.toolbars||b.defaultToolbars();if(angular.isArray(c)){var e=[],f=[];angular.forEach(c,function(a){f.push(b.toolbar(a).then(function(a){e.push(a)}))}),d.all(f).then(function(){j(e)})}}}var l=[];c.$watch(function(){return a.current},k)}return{restrict:"A",link:i}}]),angular.module("mblowfish-core").directive("mbPanel",["$route","$rootScope","$actions","$injector",function(a,b,c,d){function e(a){return a.protect?angular.isFunction(a.protect)?!d.invoke(a.protect,a):a.protect:!0}function f(f,g,h){var i=new machina.Fsm({initialize:function(a){f.status=this.initialState},namespace:"mb-panel-controller",initialState:"loading",states:{ready:{routeChange:function(a){return a.protect&&!e(a)?void this.transition("accessDenied"):void 0},appStateChange:function(a){a.startsWith("ready")||this.transition("loading")},userStateChange:function(a){a&&(this.getRoute().protect&&a?this.transition("login"):this.transition("readyAnonymous"))}},accessDenied:{routeChange:function(a){(!a.protect||e(a))&&this.transition("ready")},appStateChange:function(a){a.startsWith("ready")||this.transition("loading")},userStateChange:function(a){a&&this.transition("login")}},readyAnonymous:{routeChange:function(a){a.protect&&this.transition("login")},appStateChange:function(a){a.startsWith("ready")||this.transition("loading")},userStateChange:function(){this.transition("ready")}},loading:{appStateChange:function(a){if(a.startsWith("ready")){var c=this.getRoute();b.app.user.anonymous?c.protect?this.transition("login"):this.transition("readyAnonymous"):!c.protect||e(c)?this.transition("ready"):this.transition("accessDenied")}}},login:{routeChange:function(a){a.protect||this.transition("readyAnonymous")},appStateChange:function(a){a.startsWith("ready")||this.transition("loading")},userStateChange:function(){var a=this.getRoute();e(a)?this.transition("ready"):this.transition("accessDenied")}}},routeChange:function(a){this.currentRoute=a,a&&this.handle("routeChange",a)},appStateChange:function(a){this.handle("appStateChange",a)},userStateChange:function(a){this.userState=a,this.handle("userStateChange",a)},getRoute:function(){return this.currentRoute||a.current},getState:function(){return this.appState||b.app.state.status}});i.on("transition",function(){return i.state.startsWith("ready")?void(f.status="ready"):void(f.status=i.state)}),f.$watch(function(){return a.current},function(a){if(c.group("navigationPathMenu").clear(),a){if(i.routeChange(a.$$route),a.$$route&&angular.isFunction(a.$$route.integerate)){d.invoke(a.$$route.integerate,a.$$route)}}else i.routeChange(a)}),b.$watch("app.state.status",function(a){i.appStateChange(a)}),f.$watch("app.user.anonymous",function(a){i.userStateChange(a)})}return{restrict:"E",replace:!0,templateUrl:"views/directives/mb-panel.html",link:f}}]),angular.module("mblowfish-core").directive("mbPreferencePage",["$compile","$controller","$preferences","$wbUtil","$rootScope",function(a,b,c,d,e){function f(c,f,g){var h=c.$new(!1,c);h.app=e.app,d.getTemplateFor(f).then(function(c){var d=angular.element("<div md-theme=\"{{app.setting.theme || app.config.theme || 'default'}}\" md-theme-watch >"+c+"</div>"),e=a(d);if(angular.isDefined(f.controller)){var i={$scope:h,$element:d},j=b(f.controller,i);f.controllerAs&&(h[f.controllerAs]=j),d.data("$ngControllerController",j)}g.empty(),g.append(e(h))})}function g(a,b){var d=b.children(h).children(i);a.$watch("mbPreferenceId",function(b){b&&c.page(b).then(function(b){f(a,b,d)},function(){})})}var h="div#mb-preference-body",i="div#mb-preference-placeholder";return{restrict:"E",templateUrl:"views/directives/mb-preference-page.html",replace:!0,scope:{mbPreferenceId:"="},link:g}}]),angular.module("mblowfish-core").directive("mbPreloading",["$animate",function(a){function b(a,b,c){b.addClass(g)}function c(a,b,c){c.mbPreloadingClass&&b.addClass(c.mbPreloadingClass),b.removeClass(f)}function d(a,b,c){c.mbPreloadingClass&&b.addClass(c.mbPreloadingClass),b.addClass(f)}function e(a,e,f){b(a,e,f),a.$watch(f.mbPreloading,function(b){b?d(a,e,f):c(a,e,f)})}var f="mb-preload",g="mb-preload-animate";return{restrict:"A",link:e}}]),angular.module("mblowfish-core").directive("mbTitledBlock",function(){return{replace:!0,restrict:"E",transclude:!0,scope:{mbTitle:"@?",mbIcon:"@?",mbProgress:"<?"},templateUrl:"views/directives/mb-titled-block.html"}}),angular.module("mblowfish-core").directive("mbTreeHeading",["$animate",function(a){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-heading.html",link:function(a,b,c){},controller:["$scope",function(a){}]}}]),angular.module("mblowfish-core").directive("mbTreeLink",["$animate",function(a){return{restrict:"E",scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-link.html",link:function(a,b,c){},controller:["$scope","$navigator",function(a,b){a.isSelected=function(a){return a&&b.isPageSelected(a.link)},a.focusSection=function(a){return b.openPage(a.link)}}]}}]),angular.module("mblowfish-core").directive("mbTreeToggle",["$timeout","$animateCss","$mdSidenav","$mdMedia","$rootScope",function(a,b,c,d,e){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-toggle.html",link:function(c,d,e,f){
function g(a){b(h,{from:{height:a?0:i()+"px"},to:{height:a?i()+"px":0},duration:.3}).start()}var h=d.find("ul"),i=function(){var a;return h.addClass("no-transition"),h.css("height",""),a=h.prop("clientHeight"),h.css("height",0),h.removeClass("no-transition"),a};return h?void c.$watch(function(){return f.isOpen(c.mbSection)},function(b){a(function(){g(b)},0,!1)}):console.warn("mb-tree: `menuToggle` cannot find ul element")},controller:["$scope",function(a){function b(a){return f===a}function c(a){f=f===a?null:a}function d(b){if(!b){for(var c=0;c<a.mbSection.sections.length;c++)if(!e.$eval(a.mbSection.sections[c].hidden))return!0;return!1}return b.hidden?!e.$eval(b.hidden):!0}var f=null;angular.isFunction(a.$parent.isOpen)?(a.isOpen=a.$parent.isOpen,a.toggle=a.$parent.toggle):(a.isOpen=b,a.toggle=c),this.isOpen=a.isOpen,a.isVisible=d}]}}]),angular.module("mblowfish-core").directive("mbTree",["$animate","$rootScope",function(a,b){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree.html",link:function(a,c,d){function e(a){return c.has("li").length?a.hidden?!b.$eval(a.hidden):!0:!1}a.isVisible=e},controller:["$scope",function(a){function b(a){return d===a}function c(a){d=d===a?null:a}var d=null;a.isOpen=b,a.toggle=c}]}}]),angular.module("mblowfish-core").directive("mbUserMenu",["$actions","$app","$mdSidenav",function(a,b,c){function d(d,e,f){d.menu=a.group("mb.user"),d.logout=b.logout,d.settings=function(){return c("settings").toggle()}}return{restrict:"E",replace:!0,scope:!0,templateUrl:"views/directives/mb-user-menu.html",link:d,controller:"MbAccountCtrl"}}]),angular.module("mblowfish-core").directive("mbUserToolbar",["$actions",function(a){return{restrict:"E",replace:!0,templateUrl:"views/directives/mb-user-toolbar.html",link:function(b,c,d,e){b.menu=a.group("mb.user")},controller:"MbAccountCtrl"}}]),angular.module("mblowfish-core").factory("Action",["$injector","$navigator",function(a,b){var c=function(a){return angular.isDefined(a)||(a={}),angular.extend(this,a,{priority:a.priority||10}),this.visible=this.visible||function(){return!0},this};return c.prototype.exec=function(c){this.action?a.invoke(this.action,this):this.url&&b.openPage("/"),c&&(c.stopPropagation(),c.preventDefault())},c}]),angular.module("mblowfish-core").factory("ActionGroup",function(){var a=function(a){angular.isDefined(a)||(a={}),angular.extend(this,a,{priority:a.priority||10,items:[]})};return a.prototype.clear=function(){this.items=[]},a}),angular.module("mblowfish-core").factory("MbLanguageLoader",["$q","$translate","$rootScope",function(a,b,c){return function(d){var e=a.defer(),f=b.getTranslationTable(d.key),g=f?f:{},h=c.app.config.local.languages;return h?(angular.forEach(h,function(a){a.key===d.key&&angular.forEach(a.map,function(a,b){g[b]=a})}),e.resolve(g)):e.reject("Language not found")}}]),angular.module("mblowfish-core").filter("mbDate",["$rootScope",function(a){return function(b,c){if(!b)return"";try{var d=c||a.app.setting.dateFormat||a.app.config.dateFormat||"jYYYY-jMM-jDD hh:mm:ss";"Jalaali"!==a.app.calendar&&(d=d.replace("j",""));var e=moment.utc(b).local();return e.format(d)}catch(f){return"-"+f.message}}}]),angular.module("mblowfish-core").run(["$notification","$help",function(a,b){window.openHelp=function(a){return b.openHelp(a)},window.alert=a.alert,window.confirm=a.confirm,window.prompt=a.prompt,window.toast=a.toast}]),angular.module("mblowfish-core").run(["$toolbar","$sidenav","$rootScope","$navigator","$route","$actions","$help",function(a,b,c,d,e,f,g){f.newAction({id:"mb.preferences",priority:15,icon:"settings",title:"Preferences",description:"Open preferences panel",visible:function(){return c.app.user.owner},action:function(){return d.openPage("/preferences")},groups:["mb.toolbar.menu"]}),f.newAction({id:"mb.help",priority:15,icon:"help",title:"Help",description:"Display help in sidenav",visible:function(){return g.hasHelp(e.current)},action:function(){g.openHelp(e.current)},groups:["mb.toolbar.menu"]}),a.newToolbar({id:"dashboard",title:"Dashboard toolbar",description:"Main dashboard toolbar",controller:"MbToolbarDashboardCtrl",templateUrl:"views/toolbars/mb-dashboard.html"}),b.newSidenav({id:"navigator",title:"Navigator",description:"Navigate all path and routs of the pandel",controller:"AmdNavigatorCtrl",templateUrl:"views/sidenavs/mb-navigator.html",locked:!0,position:"start"}),b.newSidenav({id:"help",title:"Help",description:"System online help",controller:"MbHelpCtrl",templateUrl:"views/sidenavs/mb-help.html",locked:!0,visible:function(){return c.showHelp},position:"end"}),b.newSidenav({id:"settings",title:"Options",description:"User options",controller:"MbOptionsCtrl",templateUrl:"views/sidenavs/mb-options.html",locked:!1,position:"end"}),b.newSidenav({id:"messages",title:"Messages",description:"User message queue",controller:"MessagesCtrl",templateUrl:"views/sidenavs/mb-messages.html",locked:!1,position:"start"})}]),angular.module("mblowfish-core").run(["appcache","$window","$app",function(a,b,c){a.checkUpdate().then(function(){a.swapCache().then(function(){return c.config("update")}).then(function(a){void 0!==a&&a.hideMessage?b.location.reload():confirm("Application is updated. Reload for new version?").then(function(){b.location.reload()})})})}]),angular.module("mblowfish-core").run(["$rootScope","$tenant",function(a,b){a.app.captcha={},a.$watch("app.state.status",function(c){"loading"===c&&b.getSetting("captcha.engine").then(function(c){a.app.captcha.engine=c.value,"recaptcha"===c.value&&(a.app.captcha.recaptcha={},b.setting("captcha.engine.recaptcha.key").then(function(b){a.app.captcha.recaptcha.key=b.value}))})})}]),angular.module("mblowfish-core").run(["$window","$rootScope","$location",function(a,b,c){a.ga&&b.$watch("app.config.googleAnalytic.property",function(d){d&&(a.ga("create",d,"auto"),b.$on("$routeChangeStart",function(){a.ga("send","pageview",c.path())}))})}]),angular.module("mblowfish-core").run(["$help","$rootScope","$route",function(a,b,c){b.$watch(function(){return c.current},function(b){a.setCurrentItem(b)})}]),angular.module("mblowfish-core").run(["$resource",function(a){function b(){return this.__selections||(this.__selections=angular.isArray(this.value)?this.value:[]),this.__selections}function c(a,b){if(!angular.isDefined(b.id))return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c].id===b.id)return c}function d(a,b){var d=this.getSelection(),e=c(d,a);if(b){if(e>=0)return;d.push(a)}else e>-1&&array.splice(e,1)}function e(a){var b=this.getSelection();return c(b,a)>=0}a.newPage({label:"Account",type:"account",templateUrl:"views/resources/mb-accounts.html",controller:["$scope",function(a){a.multi=!1,this.value=a.value,this.setSelected=function(b){a.$parent.setValue(b)},this.isSelected=function(a){return a===this.value||a.id===this.value.id}}],controllerAs:"resourceCtrl",priority:8,tags:["account"]}),a.newPage({label:"Accounts",type:"account-list",templateUrl:"views/resources/mb-accounts.html",controller:["$scope",function(a){a.multi=!0,this.value=a.value,this.setSelected=function(b,c){this._setSelected(b,c),a.$parent.setValue(this.getSelection())},this._setSelected=d,this.isSelected=e,this.getSelection=b}],controllerAs:"resourceCtrl",priority:8,tags:["accounts"]}),a.newPage({label:"Role List",type:"role-list",templateUrl:"views/resources/mb-roles.html",controller:["$scope",function(a){a.multi=!0,this.value=a.value,this.setSelected=function(b,c){this._setSelected(b,c),a.$parent.setValue(this.getSelection())},this._setSelected=d,this.isSelected=e,this.getSelection=b}],controllerAs:"resourceCtrl",priority:8,tags:["roles"]}),a.newPage({label:"Group List",type:"group-list",templateUrl:"views/resources/mb-groups.html",controller:["$scope",function(a){a.multi=!0,this.value=a.value,this.setSelected=function(b,c){this._setSelected(b,c),a.$parent.setValue(this.getSelection())},this._setSelected=d,this.isSelected=e,this.getSelection=b}],controllerAs:"resourceCtrl",priority:8,tags:["groups"]})}]),angular.module("mblowfish-core").run(["$options","$preferences",function(a,b){b.newPage({id:"local",title:"local",description:"manage dashboard locality and language.",templateUrl:"views/preferences/mb-local.html",controller:"MbLocalCtrl",icon:"language",tags:["local","language"]}).newPage({id:"brand",title:"Branding",description:"Manage application branding such as title, logo and descritpions.",templateUrl:"views/preferences/mb-brand.html",icon:"copyright",priority:2,required:!0,tags:["brand"]}).newPage({id:"google-analytic",title:"Google Analytic",templateUrl:"views/preferences/mb-google-analytic.html",description:"Enable google analytic for your application.",icon:"timeline",tags:["analysis"]}).newPage({id:"update",templateUrl:"views/preferences/update.html",title:"Update application",description:"Settings of updating process and how to update the application.",icon:"autorenew"}),a.newPage({title:"Local",templateUrl:"views/options/mb-local.html",controller:"MbLocalCtrl",tags:["local"]}),a.newPage({title:"Theme",controller:"MbThemesCtrl",templateUrl:"views/options/mb-theme.html",tags:["theme"]})}]),angular.module("mblowfish-core").service("$actions",["Action","ActionGroup",function(a,b){function c(){return{items:j}}function d(b){var c=new a(b);k[c.id]=c,j.push(c);for(var d=0;d<c.groups.length;d++){var e=i(c.groups[d]);e.items.push(c)}return c.scope&&c.scope.$on("$destroy",function(){f(c)}),c}function e(a){var b=k[a];return b?b:void 0}function f(a){k[a.id]=null;var b=j.indexOf(a);if(b>-1){j.splice(b,1);for(var c=0;c<a.groups.length;c++){var d=i(a.groups[c]),e=d.items.indexOf(a);e>-1&&d.items.splice(e,1)}return a}}function g(){return{items:l}}function h(a){return i(a.id,a)}function i(a,c){var d=m[a];return d||(d=new b,d.id=a,m[d.id]=d,l.push(d)),c&&angular.extend(d,c),d}var j=[],k={},l=[],m=[];return{actions:c,newAction:d,action:e,removeAction:f,groups:g,newGroup:h,group:i}}]),angular.module("mblowfish-core").service("$app",["$rootScope","$usr","$q","$cms","$translate","$http","$httpParamSerializerJQLike","$mdDateLocale","$localStorage","QueryParameter","$tenant",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){N.state.stage=a,N.state.message=b,b&&N.logs.push(b)}function m(a){for(var b=0;b<a.length;b++){var c=a[b];N.user[c.application+"_"+c.code_name]=!0}}function n(){l("loading configuration","fetch configuration document"),Q.configs_loaded=!1,Q.configs_fail=!1,d.getContent(x+N.key).then(function(a){return l("loading configuration","fetch configuration content"),N._acc=a,Q.configs_loaded=!0,N._acc.downloadValue()},function(a){return Q.configs_fail=!0,v.error(a),{}}).then(function(a){N.config=a})["finally"](function(){v.loaded()})}function o(){return l("loading user info","fetch user information"),b.getAccount("current",{graphql:z}).then(function(a){if(Q.user_loaded=!0,N.user={anonymous:!a.id||0===a.id,current:a},a.profiles.length>0&&(N.user.profile=a.profiles[0]),l("loading user info","user information loaded successfully"),l("loading user info","check user permissions"),!N.user.anonymous){m(a.roles);for(var b=0;b<a.groups.length;b++)m(a.groups[b].roles);a.isAnonymous()?N.user.anonymous=!0:(N.user.owner=N.user.tenant_owner||N.user.core_owner||N.user.Pluf_owner||N.user.Core_owner,N.user.administrator=N.user.owner)}v.loaded()},function(a){Q.user_loaded=!1,v.error(a)})}function p(){return l("loading options","fetch options document"),N.options={},k.getSettings(M).then(function(a){for(var b=0;b<a.items.length;b++){var c=a.items[b];N.options[c.key]=c.value}Q.options_loaded=!0,v.loaded()},function(a){v.error(a)})}function q(){l("loading setting from local storage","fetch settings"),N.setting=i.$default({dashboardModel:{}}),l("setting loaded","fetch settings")}function r(){if(P=!0,!O){if(!(N.user.core_owner||N.user.Pluf_owner||N.user.tenant_owner))return c.reject({data:{message:"fail"}});O=!0;var a;return N._acc?(P=!1,a=N._acc.uploadValue(N.config)):a=d.putContent({name:x+N.key,mimetype:y}).then(function(a){return P=!1,N._acc=a,v.config_created(),N._acc.uploadValue(N.config)},function(a){v.error(a)}),a["finally"](function(){return O=!1,P?r():void 0})}}function s(a){N.key=a,v.start()}function t(a){return N.user.anonymous?f({method:"POST",url:"/api/v2/user/login",data:g(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){o()}):c.resolve(N.user.current)}function u(){var b=a.app.user;return b.anonymous?c.resolve(b):(a.app.user={},v.loaded(),f({method:"POST",url:"/api/v2/user/logout",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){o()},function(){a.app.user=b,v.loaded()}))}var v,w=this,x="angular-material-blowfish-",y="application/amd-cnf",z="{id, login, profiles{first_name, last_name, language, timezone}, roles{id, application, code_name}, groups{id, name, roles{id, application, code_name}}}",A="{items{id, key,value}}",B="waiting",C="loading",D="ready",E="ready_not_configured",F="offline",G="fail",H="loaded",I="start",J="resource_not_found",K="server_error",L="network_error",M=(new j).put("graphql",A),N={state:{status:"loading",stage:"starting",message:null},logs:[],user:{current:{},profile:{},anonymous:!0,administrator:!1,owner:!1,member:!1,authorized:!1},config:{},setting:{},options:{}};a.app=N;var O=!1,P=!1,Q={user_loaded:!1,options_loaded:!1,configs_loaded:!1};return v=new machina.Fsm({initialize:function(){N.state.status=B},namespace:"webpich.$app",initialState:B,states:{waiting:{_onEnter:function(){o(),p()},start:function(){this.transition(C)},network_error:function(){this.transition(F)},server_error:function(){this.transition(G)}},loading:{_onEnter:function(){q(),n()},loaded:function(){Q.user_loaded&&Q.options_loaded&&Q.configs_loaded?this.transition(D):Q.user_loaded&&Q.options_loaded&&Q.configs_fail&&this.transition(E)},server_error:function(){this.transition(G)},network_error:function(){this.transition(F)}},ready:{network_error:function(){this.transition(F)}},ready_not_configured:{config_created:function(){this.transition(D)},network_error:function(){this.transition(F)}},fail:{},offline:{}},loaded:function(){this.handle(H)},start:function(){this.handle(I)},error:function(a){404===a.status?this.handle(J):500===a.status?this.handle(K):-1===a.status&&this.handle(L)}}),v.on("transition",function(){l("$app event handling","$app state is changed from "+N.state.status+" to "+v.state),N.state.status=v.state}),a.$watch(function(){return N.config.local||(N.config.local={}),N.setting.dir||N.config.local.dir},function(a){N.dir=a}),a.$watch(function(){return angular.isObject(N.config.local)||(N.config.local={}),N.setting.local||N.config.local.language||"en"},function(a){N.local=a,e.use(a),moment.loadPersian(),moment.locale(a);var b=moment.localeData();h.months=b._months,h.shortMonths=b._monthsShort,h.days=b._weekdays,h.shortDays=b._weekdaysMin,h.firstDayOfWeek=b._week.dow}),a.$watch(function(){return N.setting.calendar||N.config.calendar||"Gregorian"},function(a){N.calendar=a}),a.$watch("app.config",function(){(N.state.status===D||N.state.status===E)&&r()},!0),w.start=s,w.login=t,w.logout=u,w}]),angular.module("mblowfish-core").service("$errorHandler",function(){function a(a,b){var c=null;return 400===a.status&&b?(c="Form is not valid. Fix errors and retry.",a.data.data.forEach(function(a){b[a.name].$error={},a.constraints.map(function(c){b[a.name]&&(b[a.name].$error[c.toLowerCase()]=!0)})})):c=a.data.message,c}return{handleError:a}}),angular.module("mblowfish-core").service("$amdExport",["FileSaver","$q","QueryParameter",function(a,b,c){function d(b,d,e,f,g){function h(a){var b="";return angular.forEach(a.items,function(a){var c="";angular.forEach(k,function(b){c=c+(a[b]||" ")+","}),b=b+c.slice(0,-1)+"\n"}),b}function i(c){if(l+=h(c),!c.hasMore()){var e=new Blob([l],{type:"text/plain;charset=utf-8"});return a.saveAs(e,g+"."+f)}return j.setPage(c.next()),d.apply(b,[j]).then(i)}var j=new c;j.put("_px_q ",e.get("_px_q")),j.put("_px_sk ",e.get("_px_sk")),j.put("_px_so ",e.get("_px_so")),j.put("_px_fk ",e.get("_px_fk")),j.put("_px_fv ",e.get("_px_fv")),j.setPage(0);var k,l="";return d.apply(b,[j]).then(function(a){if(!k){var b=Object.keys(a.items[0]);k=[],angular.forEach(b,function(b){angular.isFunction(a.items[0][b])||angular.isObject(a.items[0][b])||k.push(b)})}var c="";return angular.forEach(k,function(a){c=c+a+","}),l=c.slice(0,-1)+"\n",i(a)})}return{list:d}}]),angular.module("mblowfish-core").service("$help",["$q","$rootScope","$translate","$injector",function(a,b,c,d){function e(a){if(!a)return null;var b=a.helpId;return angular.isFunction(a.helpId)?!d.invoke(a.helpId,a):b}function f(a){return m.push(a),this}function g(){return a.resolve({items:m})}function h(){return n}function i(a){n=a}function j(a){var b=e(a);if(b){var d=c.use();return"resources/helps/"+b+"-"+d+".json"}return null}function k(a){return j(a)}function l(a){if(k(a)){if(n===a)return void(b.showHelp=!b.showHelp);i(a),b.showHelp=!0}}var m=[],n=null;return{tip:f,tips:g,currentItem:h,setCurrentItem:i,openHelp:l,hasHelp:k,getHelpPath:j}}]),angular.module("mblowfish-core").service("$language",["$rootScope","$q","$translate","$app",function(a,b,c,d){function e(b){var c=a.app.config.languages;if(!c||!c.length)return void 0;for(var d=0;d<c.length;d++)if(c[d].key===b)return c[d];return void 0}function f(){var c=a.app.config.languages,d={items:c||[]};return b.when(d)}function g(d){if(!a.app.user.owner)return b.reject("not allowed");if(a.app.config.local.languages){for(var e=a.app.config.languages,f=0;f<e.length;f++)if(d.key===e[f].key)return b.reject("Sorry! Languages with the same key are not allowed.")}else a.app.config.languages=[];return a.app.config.languages.push(d),c.refresh(d.key),b.resolve(d)}function h(c){if(!a.app.user.owner)return b.reject("not allowed");var d=a.app.config.languages;if(!d||!d.length)return b.reject("Not found");var e=-1;if(angular.isString(c)){for(var f=0;f<d.length;f++)if(d[f].key===c){e=f;break}}else e=d.indexOf(c);return-1!==e?(d.splice(e,1),b.resolve(c)):b.reject("Not found")}function i(){return c.proposedLanguage()}function j(a){return c.use(a)}function k(a){return c.refresh(a)}return{language:e,languages:f,newLanguage:g,deleteLanguage:h,proposedLanguage:i,refresh:k,use:j}}]),angular.module("mblowfish-core").service("$metrics",["$q","$timeout",function(a,b){function c(b,c){return a.resolve("hi")}function d(a){}this.breakMonitor=d,this.trackMetric=c}]),angular.module("mblowfish-core").service("$navigator",["$q","$route","$mdDialog","$location","$window",function(a,b,c,d,e){function f(a){return setTimeout(function(){deferred.notify("about to search items."),deferred.resolve(g(a))},100),deferred.promise}function g(a){var b=o;return a&&a.param._px_fk&&(b=[],"group"===a.param._px_fk&&angular.forEach(o,function(c){c.groups&&angular.isArray(c.groups)&&c.groups.indexOf(a.param._px_fv)>-1&&b.push(c)})),b}function h(a){return a.priority=a.priority||100,o.push(a),this}function i(a){return p}function j(a){a.id in p||(p[a.id]={id:a.id}),angular.merge(p[a.id],a)}function k(a){return a in p||(p[a]={id:a}),p[a]}function l(a){var b={};return angular.extend(b,{controller:"AmdNavigatorDialogCtrl",parent:angular.element(document.body),clickOutsideToClose:!0,fullscreen:!0,multiple:!0},a),b.config||(b.config={}),b.locals||(b.locals={}),b.locals.config=b.config,c.show(b)}function m(a,b){a&&a.toLowerCase().startsWith("http")&&e.open(a),b?d.path(a).search(b):d.path(a)}function n(a){return!1}var o=[],p=[];return{loadAllItems:f,openDialog:l,openPage:m,isPageSelected:n,items:g,newItem:h,groups:i,newGroup:j,group:k}}]),angular.module("mblowfish-core").service("$notification",["$navigator","$mdToast",function(a,b){function c(b){return a.openDialog({templateUrl:"views/dialogs/mb-alert.html",config:{message:b}})}function d(b){return a.openDialog({templateUrl:"views/dialogs/mb-confirm.html",config:{message:b}})}function e(b,c){return a.openDialog({templateUrl:"views/dialogs/mb-prompt.html",config:{message:b,model:c}})}function f(a){return b.show(b.simple().textContent(a).hideDelay(3e3))}return{toast:f,alert:c,prompt:e,confirm:d}}]),angular.module("mblowfish-core").service("$options",["$q","$navigator",function(a,b){function c(){return a.when({items:f})}function d(b){for(var c=0;c<f.length;c++)if(f[c].id===b)return a.when(f[c]);return a.reject({})}function e(a){return f.push(a),g}var f=[],g={pages:c,page:d,newPage:e};return g}]),angular.module("mblowfish-core").service("$preferences",["$q","$navigator",function(a,b){function c(){return h.sort(d),a.when({items:h})}function d(a,b){return a.priority===b.priority?0:"first"===a.priority||"last"===b.priority?-1:"last"===a.priority||"first"===b.priority?1:"undefined"==typeof a.priority?1:"undefined"==typeof b.priority?-1:a.priority-b.priority}function e(b){for(var c=0,d=h.length;d>c;c++)if(h[c].id===b)return a.when(h[c]);return a.reject({message:"Not found"})}function f(a){return b.openPage("/preferences/"+a.id)}function g(a){return h.push(a),this}var h=[];return{pages:c,page:e,newPage:g,openPage:f}}]),angular.module("mblowfish-core").service("$sidenav",["$q",function(a){function b(){return a.when({items:g})}function c(a){g.push(a)}function d(b){for(var c=0;c<g.length;c++)if(g[c].id===b)return a.when(g[c]);return a.reject("Sidenav not found")}function e(a){return h=a||[],this}function f(){return h}var g=[],h=[],i={};return i.sidenavs=b,i.newSidenav=c,i.sidenav=d,i.setDefaultSidenavs=e,i.defaultSidenavs=f,i}]),angular.module("mblowfish-core").service("$toolbar",["$q",function(a){function b(){return a.when({items:g})}function c(a){g.push(a)}function d(b){for(var c=0;c<g.length;c++)if(g[c].id===b)return a.when(g[c]);return a.reject("Toolbar not found")}function e(a){return h=a||[],this}function f(){return h}var g=[],h=[],i={};return i.toolbars=b,i.newToolbar=c,i.toolbar=d,i.setDefaultToolbars=e,i.defaultToolbars=f,i}]),angular.module("mblowfish-core").run(["$templateCache",function(a){a.put("views/dialogs/mb-alert.html",'<md-dialog ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>error</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=row layout-align="center center" flex> <p translate>{{config.message}}</p> </md-dialog-content> </md-dialog>'),a.put("views/dialogs/mb-confirm.html",'<md-dialog ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>warning</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=answer(true)> <wb-icon aria-label="Close dialog">done</wb-icon> </md-button> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=row layout-align="center center" flex> <p translate>{{config.message}}</p> </md-dialog-content> </md-dialog>'),a.put("views/dialogs/mb-prompt.html",'<md-dialog ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>input</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=answer(config.model)> <wb-icon aria-label="Close dialog">done</wb-icon> </md-button> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=column layout-align="center stretch" layout-padding flex> <p translate>{{config.message}}</p> <md-input-container class=md-block> <label translate>Input value</label> <input ng-model=config.model> </md-input-container> </md-dialog-content> </md-dialog>'),a.put("views/directives/mb-captcha.html","<div>  <div vc-recaptcha ng-model=ctrl.captchaValue theme=\"app.captcha.theme || 'light'\" type=\"app.captcha.type || 'image'\" key=app.captcha.key lang=\"app.captcha.language || 'fa'\"> </div>  </div>"),a.put("views/directives/mb-dynamic-tabs.html",'<div layout=column> <md-tabs md-selected=pageIndex> <md-tab ng-repeat="tab in mbTabs"> <span translate>{{tab.title}}</span> </md-tab> </md-tabs> <div id=mb-dynamic-tabs-select-resource-children> </div> </div>'),a.put("views/directives/mb-navigation-bar.html","<div class=mb-navigation-path-bar md-colors=\"{'background-color': 'primary'}\" layout=row> <div layout=row> <md-button ng-click=goToHome() class=\"mb-navigation-path-bar-item mb-navigation-path-bar-item-home\"> <md-tooltip ng-if=menu.tooltip>{{'home' | translate}}</md-tooltip> <wb-icon>home</wb-icon> </md-button> </div> <div layout=row data-ng-repeat=\"menu in pathMenu.items | orderBy:['-priority']\"> <wb-icon>{{app.dir==='rtl' ? 'chevron_left' : 'chevron_right'}}</wb-icon> <md-button ng-show=isVisible(menu) ng-href={{menu.url}} ng-click=menu.exec($event); class=mb-navigation-path-bar-item> <md-tooltip ng-if=menu.tooltip>{{menu.description}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> {{menu.title | translate}} </md-button>  </div> </div>"),a.put("views/directives/mb-pagination-bar.html",'<div class="wrapper-stack-toolbar-container top-corner-round">  <div md-colors="{background: \'primary\'}"> <div class=md-toolbar-tools> <md-button ng-if=mbIcon md-no-ink class=md-icon-button aria-label={{mbIcon}}> <wb-icon>{{mbIcon}}</wb-icon> </md-button> <h2 flex md-truncate ng-if=mbTitle>{{mbTitle}}</h2> <md-button ng-if=reload class=md-icon-button aria-label=Reload ng-click=reload()> <wb-icon>repeat</wb-icon> </md-button> <md-button ng-show=mbSortKeys class=md-icon-button aria-label=Sort ng-click="showSort = !showSort"> <wb-icon>sort</wb-icon> </md-button> <md-button ng-show=mbEnableSearch class=md-icon-button aria-label=Search ng-click="showSearch = true; focusToElement(\'searchInput\');"> <wb-icon>search</wb-icon> </md-button> <md-button ng-if=exportData class=md-icon-button aria-label=Export ng-click=exportData()> <wb-icon>save</wb-icon> </md-button> <span flex ng-if=!mbTitle></span> <md-menu ng-show=mbMoreActions.length> <md-button class=md-icon-button ng-click=$mdOpenMenu($event)> <wb-icon>more_vert</wb-icon> </md-button> <md-menu-content width=4> <md-menu-item ng-repeat="item in mbMoreActions"> <md-button ng-click=item.action()> <wb-icon ng-show=item.icon>{{item.icon}}</wb-icon> <span translate>{{ item.title }}</span> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </div>  <div class="stack-toolbar new-box-showing-animation" md-colors="{background: \'primary-hue-3\'}" ng-show=showSearch> <div class=md-toolbar-tools> <md-button style=min-width:0px ng-click="showSearch = false" aria-label=Back> <wb-icon class=icon-rotate-180-for-rtl>arrow_back</wb-icon> </md-button> <md-input-container flex md-theme=dark md-no-float class="md-block fit-input"> <input id=searchInput placeholder="{{\'Search\'|translate}}" ng-model=query.searchTerm ng-model-options={debounce:1000}> </md-input-container>   </div> </div>  <div class="stack-toolbar new-box-showing-animation" md-colors="{background: \'primary-hue-3\'}" ng-show=showSort> <div class=md-toolbar-tools> <md-button style=min-width:0px ng-click="showSort = false" aria-label=Back> <wb-icon class=icon-rotate-180-for-rtl>arrow_back</wb-icon> </md-button> <h3 translate>Sort</h3> <span style="width: 10px"></span>  <md-menu> <md-button md-colors="{background: \'primary\'}" layout=row style="text-transform: none" ng-click=$mdMenu.open()> <wb-icon>category</wb-icon> <h3>{{mbSortKeysTitles?mbSortKeysTitles[mbSortKeys.indexOf(query.sortBy)]:query.sortBy|translate}}</h3> </md-button> <md-menu-content width=4> <md-menu-item ng-repeat="key in mbSortKeys"> <md-button ng-click="query.sortBy=key"> <wb-icon ng-if="query.sortBy==key">check_circle</wb-icon> <wb-icon ng-if="query.sortBy!=key">radio_button_unchecked</wb-icon> {{mbSortKeysTitles?mbSortKeysTitles[$index]:key|translate}} </md-button> </md-menu-item> </md-menu-content> </md-menu>  <md-menu> <md-button md-colors="{background: \'primary\'}" layout=row style="text-transform: none" ng-click=$mdMenu.open()> <wb-icon ng-if=!query.sortDesc class=icon-rotate-180>filter_list</wb-icon> <wb-icon ng-if=query.sortDesc>filter_list</wb-icon> {{query.sortDesc?\'Descending\':\'Ascending\'|translate}} </md-button> <md-menu-content width=4> <md-menu-item> <md-button ng-click="query.sortDesc=false"> <wb-icon ng-if=!query.sortDesc>check_circle</wb-icon> <wb-icon ng-if=query.sortDesc>radio_button_unchecked</wb-icon> {{\'Ascending\'|translate}} </md-button> </md-menu-item> <md-menu-item> <md-button ng-click="query.sortDesc=true"> <wb-icon ng-if=query.sortDesc>check_circle</wb-icon> <wb-icon ng-if=!query.sortDesc>radio_button_unchecked</wb-icon> {{\'Descending\'|translate}} </md-button> </md-menu-item> </md-menu-content> </md-menu> <span flex=""></span>    </div> </div> </div>'),a.put("views/directives/mb-panel.html",'<div id=mb-panel-root md-theme="{{app.setting.theme || app.config.theme || \'default\'}}" md-theme-watch ng-class="{\'mb-rtl-direction\': app.dir===\'rtl\', \'mb-ltr-direction\': app.dir!==\'rtl\'}" dir={{app.dir}} layout=column layout-fill>  <div id=mb-panel-root-ready mb-panel-toolbar-anchor ng-if="status === \'ready\'" layout=column layout-fill>   <div id=mb-panel-root-ready-anchor mb-panel-sidenav-anchor layout=row flex> <md-whiteframe layout=row id=main class="md-whiteframe-24dp main mb-page-content" ng-view flex> </md-whiteframe> </div> </div> <div id=mb-panel-root-access-denied ng-if="status === \'accessDenied\'" layout=column layout-fill> Access Denied </div> <div ng-if="status === \'loading\'" layout=column layout-align="center center" layout-fill> <h4 translate>{{app.state.stage}}</h4> <p translate>{{app.state.message}}</p> <md-progress-linear style="width: 50%" md-mode=indeterminate> </md-progress-linear> <md-button ng-if="app.state.status === \'fail\'" class="md-raised md-primary" ng-click=restart() aria-label=Retry> <wb-icon>replay</wb-icon> retry </md-button> </div> <div ng-if="status === \'login\'" layout=row layout-aligne=none layout-align-gt-sm="center center" ng-controller=MbAccountCtrl flex> <div md-whiteframe=3 flex=100 flex-gt-sm=50 layout=column mb-preloading=ctrl.loadUser>  <ng-include src="\'views/partials/mb-branding-header-toolbar.html\'"></ng-include> <md-progress-linear ng-disabled="!(ctrl.loginProcess || ctrl.logoutProcess)" style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-primary md-color> </md-progress-linear>  <div style="text-align: center" layout-margin ng-show="!ctrl.loginProcess && ctrl.loginState === \'fail\'"> <p><span md-colors="{color:\'warn\'}" translate>{{loginMessage}}</span></p> </div> <form name=ctrl.myForm ng-submit=login(credit) layout=column layout-padding> <md-input-container> <label translate>Username</label> <input ng-model=credit.login name=username required> <div ng-messages=ctrl.myForm.username.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container> <md-input-container> <label translate>Password</label> <input ng-model=credit.password type=password name=password required> <div ng-messages=ctrl.myForm.password.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container>  <div ng-if="app.captcha.engine===\'recaptcha\' && app.captcha.recaptcha.key" vc-recaptcha ng-model=credit.g_recaptcha_response theme="app.captcha.theme || \'light\'" type="app.captcha.type || \'image\'" key=app.captcha.recaptcha.key lang="app.setting.local || app.config.local || \'en\'"> </div> <input hide type="submit"> <div layout=column layout-align=none layout-gt-xs=row layout-align-gt-xs="end center" layout-margin> <a href=users/reset-password style="text-decoration: none" ui-sref=forget flex-order=1 flex-order-gt-xs=-1>{{\'forgot your password?\' | translate}}</a> <md-button ng-disabled=ctrl.myForm.$invalid flex-order=-1 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=login(credit)>{{\'login\' | translate}}</md-button>      </div> </form> </div> </div> </div>'),a.put("views/directives/mb-preference-page.html","<div> <div id=mb-preference-body> <div id=mb-preference-placeholder> </div> </div> </div>"),
a.put("views/directives/mb-titled-block.html",'<div style="border-radius: 5px; margin: 5px 5px 10px 10px; padding: 0px" md-whiteframe=4> <md-toolbar style="border-top-left-radius: 5px;border-top-right-radius: 5px; margin: 0px; padding: 0px"> <div layout=row layout-align="start center" class=md-toolbar-tools> <wb-icon ng-if=amdIcon>{{amdIcon}}</wb-icon> <h3>{{amdTitle}}</h3> </div> </md-toolbar> <md-progress-linear ng-if=amdProgress style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-warn md-color> </md-progress-linear> <div style="margin: 8px" ng-transclude></div> </div>'),a.put("views/directives/mb-tree-heading.html",'<h2 md-colors="{color: \'primary.A100\'}" class="mb-tree-heading md-subhead"> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> {{mbSection.title}} </h2>'),a.put("views/directives/mb-tree-link.html","<md-button md-colors=\"{backgroundColor: (isSelected(mbSection.state) || $state.includes(mbSection.state)) ? 'primary.800': 'primary'}\" class=\"md-raised md-primary md-hue-1\" ng-click=focusSection(mbSection)> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> <span translate>{{mbSection.title}}</span> <span class=md-visually-hidden ng-if=isSelected(mbSection)> current page </span> </md-button>"),a.put("views/directives/mb-tree-toggle.html",'<div ng-show=isVisible()> <md-button class="md-raised md-primary md-hue-1 md-button-toggle" ng-click=toggle(mbSection) aria-controls=docs-menu-{{section.name}} aria-expanded={{isOpen(mbSection)}}> <div flex layout=row> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> <span class=mb-toggle-title translate>{{mbSection.title}}</span> <span flex></span> <span aria-hidden=true class=md-toggle-icon ng-class="{toggled : isOpen(mbSection)}"> <wb-icon>keyboard_arrow_up</wb-icon> </span> </div> <span class=md-visually-hidden> Toggle {{isOpen(mbSection)? expanded : collapsed}} </span> </md-button> <ul id=docs-menu-{{mbSection.title}} class=mb-tree-toggle-list> <li ng-repeat="section in mbSection.sections" ng-if=isVisible(section)> <mb-tree-link mb-section=section ng-if="section.type === \'link\'"> </mb-tree-link> </li> </ul> </div>'),a.put("views/directives/mb-tree.html","<ul id=mb-tree-root-element class=mb-tree> <li md-colors=\"{borderBottomColor: 'background-600'}\" ng-repeat=\"section in mbSection.sections | orderBy : 'priority'\" ng-show=isVisible(section)> <mb-tree-heading mb-section=section ng-if=\"section.type === 'heading'\"> </mb-tree-heading> <mb-tree-link mb-section=section ng-if=\"section.type === 'link'\"> </mb-tree-link> <mb-tree-toggle mb-section=section ng-if=\"section.type === 'toggle'\"> </mb-tree-toggle> </li> </ul>"),a.put("views/directives/mb-user-menu.html",'<div md-colors="{\'background-color\': \'primary-hue-1\'}" class=amd-user-menu> <md-menu md-offset="0 20"> <md-button class=amd-user-menu-button ng-click=$mdOpenMenu() aria-label="Open menu"> <img height=32px class=img-circle style="border-radius: 50%" ng-src=/api/v2/user/accounts/{{app.user.current.id}}/avatar> <span>{{app.user.profile.first_name}} {{app.user.profile.last_name}}</span> <wb-icon class=material-icons>keyboard_arrow_down</wb-icon> </md-button> <md-menu-content width=3>  <md-menu-item ng-if=menu.items.length ng-repeat="item in menu.items| orderBy:[\'-priority\']"> <md-button ng-click=item.exec($event) translate> <wb-icon ng-if=item.icon>{{item.icon}}</wb-icon> <span ng-if=item.title>{{item.title| translate}}</span> </md-button> </md-menu-item> <md-menu-divider ng-if=menu.items.length></md-menu-divider> <md-menu-item> <md-button ng-click=settings()> <span translate>Settings</span> </md-button> </md-menu-item> <md-menu-item ng-if=!app.user.anonymous> <md-button ng-click=logout()> <span translate>Logout</span> </md-button> </md-menu-item> <md-menu-item ng-if=app.user.anonymous> <md-button ng-href=users/login> <span translate>Login</span> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div>'),a.put("views/directives/mb-user-toolbar.html",'<md-toolbar layout=row layout-align="center center"> <img width=80px class=img-circle ng-src={{app.user.current.avatar}}> <md-menu md-offset="0 20"> <md-button class=capitalize ng-click=$mdOpenMenu() aria-label="Open menu"> <span>{{app.user.current.first_name}} {{app.user.current.last_name}}</span> <wb-icon class=material-icons>keyboard_arrow_down</wb-icon> </md-button> <md-menu-content width=3>  <md-menu-item ng-if=menu.items.length ng-repeat="item in menu.items | orderBy:[\'-priority\']"> <md-button ng-click=item.exec($event) translate> <wb-icon ng-if=item.icon>{{item.icon}}</wb-icon> <span ng-if=item.title>{{item.title | translate}}</span> </md-button> </md-menu-item> <md-menu-divider></md-menu-divider> <md-menu-item> <md-button ng-click=toggleRightSidebar();logout();>{{\'Logout\' | translate}}</md-button> </md-menu-item> </md-menu-content> </md-menu> </md-toolbar>'),a.put("views/mb-error-messages.html",'<div ng-message=403 layout=column layout-align="center center"> <wb-icon size=64px>do_not_disturb</wb-icon> <strong translate>Access denied</strong> <p translate>You are not allowed to access this item.</p> </div> <div ng-message=404 layout=column layout-align="center center"> <wb-icon size=64px>visibility_off</wb-icon> <strong translate>Not found</strong> <p translate>Requested item not found.</p> </div> <div ng-message=500 layout=column layout-align="center center"> <wb-icon size=64px>bug_report</wb-icon> <strong translate>Server error</strong> <p translate>An internal server error is occurred.</p> </div>'),a.put("views/mb-initial.html",'<div layout=column flex> <md-content layout=column flex> {{basePath}} <mb-preference-page mb-preference-id=currentStep.id> </mb-preference-page> </md-content> <md-stepper id=setting-stepper ng-show=steps.length md-mobile-step-text=false md-vertical=false md-linear=false md-alternative=true> <md-step ng-repeat="step in steps" md-label="{{step.title | translate}}"> </md-step> </md-stepper> </div>'),a.put("views/mb-passowrd-recover.html",' <md-toolbar layout-padding>  <h3>Forget Your PassWord ?</h3> </md-toolbar>  <div layout=column layout-padding> <md-input-container> <label>Username or Email</label> <input ng-model=credit.login required> </md-input-container> </div> <div layout=column layout-align=none layout-gt-sm=row layout-align-gt-sm="space-between center" layout-padding> <a ui-sref=login flex-order=1 flex-order-gt-sm=-1>Back To Login Page</a> <md-button flex-order=0 class="md-primary md-raised" ng-click=login(credit)>Send</md-button> </div>'),a.put("views/mb-preference.html","<md-content ng-cloak flex> <table> <tr> <td> <wb-icon wb-icon-name={{preference.icon}} size=128> </wb-icon> </td> <td> <h1 translate>{{preference.title}}</h1> <p translate>{{preference.description}}</p> </td> </tr> </table> <mb-preference-page mb-preference-id=preference.id> </mb-preference-page> </md-content>"),a.put("views/mb-preferences.html",'<md-content ng-cloak layout-padding flex> <md-grid-list md-cols-gt-md=4 md-cols=2 md-cols-md=3 md-row-height=4:3 md-gutter-gt-md=16px md-gutter-md=8px md-gutter=4px> <md-grid-tile ng-repeat="tile in preferenceTiles" md-colors="{backgroundColor: \'primary-300\'}" md-colspan-gt-sm={{tile.colspan}} md-rowspan-gt-sm={{tile.rowspan}} ng-click=openPreference(tile.page) style="cursor: pointer"> <md-grid-tile-header> <h3 style="text-align: center;font-weight: bold"> <wb-icon>{{tile.page.icon}}</wb-icon> <span translate="">{{tile.page.title}}</span> </h3> </md-grid-tile-header> <p style="text-align: justify" layout-padding translate="">{{tile.page.description}}</p> </md-grid-tile> </md-grid-list> </md-content>'),a.put("views/options/mb-local.html","<md-divider></md-divider> <md-input-container class=md-block> <label translate>Language&Local</label> <md-select ng-model=app.setting.local> <md-option ng-repeat=\"lang in languages\" ng-value=lang.key>{{lang.title | translate}}</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Direction</label> <md-select ng-model=app.setting.dir placeholder=Direction> <md-option value=rtl translate>Right to left</md-option> <md-option value=ltr translate>Left to right</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Calendar</label> <md-select ng-model=app.setting.calendar placeholder=\"\"> <md-option value=Gregorian translate>Gregorian</md-option> <md-option value=Jalaali translate>Jalaali</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Date format</label> <md-select ng-model=app.setting.dateFormat placeholder=\"\"> <md-option value=jMM-jDD-jYYYY translate> {{'2018-01-01' | mbDate:'jMM-jDD-jYYYY'}} </md-option> <md-option value=jYYYY-jMM-jDD translate> {{'2018-01-01' | mbDate:'jYYYY-jMM-jDD'}} </md-option> <md-option value=\"jYYYY jMMMM jDD\" translate> {{'2018-01-01' | mbDate:'jYYYY jMMMM jDD'}} </md-option> </md-select> </md-input-container>"),a.put("views/options/mb-theme.html",'<md-input-container class=md-block> <label translate>Theme</label> <md-select ng-model=app.setting.theme> <md-option ng-repeat="theme in themes" value={{theme.id}} translate>{{theme.label}}</md-option> </md-select> </md-input-container> <md-input-container class=md-block ng-init="app.setting.navigationPath = app.setting.navigationPath || true"> <md-switch class=md-primary name=special ng-model=app.setting.navigationPath> <sapn flex translate>Navigation path</sapn> </md-switch> </md-input-container>'),a.put("views/partials/mb-branding-header-toolbar.html"," <md-toolbar layout=row layout-padding md-colors=\"{backgroundColor: 'primary-100'}\">  <img style=\"max-width: 50%\" height=160 ng-show=app.config.logo ng-src=\"{{app.config.logo}}\"> <div> <h3>{{app.config.title}}</h3> <p>{{ app.config.description | limitTo: 250 }}{{app.config.description.length > 250 ? '...' : ''}}</p> </div> </md-toolbar>"),a.put("views/preferences/mb-brand.html",'<div layout=column layout-margin ng-cloak flex> <md-input-container class=md-block> <label translate>Title</label> <input required md-no-asterisk name=title ng-model="app.config.title"> </md-input-container> <md-input-container class=md-block> <label translate>Description</label> <input md-no-asterisk name=description ng-model="app.config.description"> </md-input-container> <wb-ui-setting-image title=Logo ng-model=app.config.logo> </wb-ui-setting-image> <wb-ui-setting-image title=Favicon ng-model=app.config.favicon> </wb-ui-setting-image> </div>'),a.put("views/preferences/mb-google-analytic.html",'<div layout=column layout-margin ng-cloak flex> <md-input-container class=md-block> <label>Google analytic property</label> <input required md-no-asterisk name=property ng-model="app.config.googleAnalytic.property"> </md-input-container> </div>'),a.put("views/preferences/mb-language.html",'<div layout=column layout-align="center center" layout-margin style="min-height: 300px" flex>           <div layout=column layout-align="center start"> <p>{{\'Select default language of site\' | translate}}:</p> <md-checkbox ng-repeat="lang in languages" style="margin: 8px" ng-checked="myLanguage.key === lang.key" ng-click=setLanguage(lang) aria-label={{lang.key}}> {{lang.title | translate}} </md-checkbox> </div> </div>'),a.put("views/preferences/mb-local.html","<div layout=column ng-cloak flex> <md-input-container class=\"md-icon-float md-block\"> <label translate>Language</label> <md-select ng-model=app.config.local.language> <md-option ng-repeat=\"lang in languages\" ng-value=lang.key>{{lang.title | translate}}</md-option> </md-select> <wb-icon style=\"cursor: pointer\" ng-click=goToManage()>settings</wb-icon> </md-input-container> <md-input-container class=md-block> <label translate>Direction</label> <md-select ng-model=app.config.local.dir placeholder=Direction> <md-option value=rtl translate>Right to left</md-option> <md-option value=ltr translate>Left to right</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Calendar</label> <md-select ng-model=app.config.local.calendar placeholder=\"\"> <md-option value=Gregorian translate>Gregorian</md-option> <md-option value=Jalaali translate>Jalaali</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Date format</label> <md-select ng-model=app.config.local.dateFormat placeholder=\"\"> <md-option value=jMM-jDD-jYYYY translate> {{'2018-01-01' | mbDate:'jMM-jDD-jYYYY'}} </md-option> <md-option value=jYYYY-jMM-jDD translate> {{'2018-01-01' | mbDate:'jYYYY-jMM-jDD'}} </md-option> <md-option value=\"jYYYY jMMMM jDD\" translate> {{'2018-01-01' | mbDate:'jYYYY jMMMM jDD'}} </md-option> </md-select> </md-input-container> </div>"),a.put("views/preferences/update.html","<md-switch class=md-secondary ng-model=app.config.update.hideMessage> <p translate>Show update message to customers</p> </md-switch> <md-switch class=md-secondary ng-model=app.config.update.autoCheck> <p translate>Check update automaticlly</p> </md-switch>"),a.put("views/resources/mb-accounts.html",'<div ng-controller="MbAccountsCtrl as ctrl" ng-init="ctrl.setDataQuery(\'{id, is_active, date_joined, last_login, profiles{first_name,last_name}}\')" mb-preloading=ctrl.loading layout=column flex>  <mb-pagination-bar mb-model=ctrl.queryParameter mb-reload=ctrl.reload() mb-sort-keys=ctrl.getSortKeys() mb-more-actions=ctrl.getMoreActions()> </mb-pagination-bar> <md-content mb-infinate-scroll=ctrl.loadNextPage() layout=column flex> <md-list flex> <md-list-item ng-repeat="user in ctrl.items track by user.id" ng-click="multi || resourceCtrl.setSelected(user)" class=md-3-line> <img ng-src=/api/v2/user/accounts/{{user.id}}/avatar class="md-avatar"> <div class=md-list-item-text layout=column> <h3>{{user.profiles[0].first_name}} - {{user.profiles[0].last_name}}</h3> <h4> <span ng-show=user.active> <span translate="">Active</span>, </span> <span ng-hide=user.active> <span translate="">Inactive</span>, </span> </h4> <p> <span translate="">Joined</span>: {{user.date_joined}}, <span translate="">Last Login</span>: {{user.last_login}}, </p> </div> <md-checkbox ng-if=multi class=md-secondary ng-init="user.selected = resourceCtrl.isSelected(user)" ng-model=user.selected ng-change="resourceCtrl.setSelected(user, user.selected)"> </md-checkbox> <md-divider md-inset></md-divider> </md-list-item> </md-list> <div layout=column layout-align="center center" ng-if="ctrl.state === \'ideal\' &&(!ctrl.items || ctrl.items.length == 0)"> <h2 translate="">No item found</h2> </div> </md-content> </div>'),a.put("views/resources/mb-groups.html",'<div ng-controller="MbGroupsCtrl as ctrl" ng-init="" layout=column flex>  <mb-pagination-bar mb-model=ctrl.queryParameter mb-reload=ctrl.reload() mb-sort-keys=ctrl.getProperties() mb-more-actions=ctrl.getActions()> </mb-pagination-bar> <md-content mb-infinate-scroll=ctrl.loadNextPage() layout=column flex> <md-list flex> <md-list-item ng-repeat="group in ctrl.items track by group.id" ng-click="multi || resourceCtrl.setSelected(group)" class=md-3-line> <wb-icon>group</wb-icon> <div class=md-list-item-text layout=column> <h3>{{group.name}}</h3> <h4></h4> <p>{{group.description}}</p> </div> <md-checkbox ng-if=multi class=md-secondary ng-init="group.selected = resourceCtrl.isSelected(group)" ng-model=group.selected ng-click="resourceCtrl.setSelected(group, group.selected)"> </md-checkbox> <md-divider md-inset></md-divider> </md-list-item>  </md-list> <div layout=column layout-align="center center" ng-if="ctrl.state === \'ideal\' &&(!ctrl.items || ctrl.items.length == 0)"> <h2 translate="">No item found</h2> </div> </md-content> </div>'),a.put("views/resources/mb-roles.html",'<div flex layout=column ng-init="" ng-controller="MbRolesCtrl as ctrl">  <mb-pagination-bar mb-model=ctrl.queryParameter mb-reload=ctrl.reload() mb-sort-keys=ctrl.getProperties() mb-more-actions=ctrl.getActions()> </mb-pagination-bar> <md-content mb-infinate-scroll=ctrl.loadNextPage() layout=column flex> <md-list flex> <md-list-item ng-repeat="role in ctrl.items track by role.id" ng-click="multi || resourceCtrl.selectRole(role)" class=md-3-line> <wb-icon>accessibility</wb-icon> <div class=md-list-item-text layout=column> <h3>{{role.name}}</h3> <p>{{role.description}}</p> </div> <md-checkbox class=md-secondary ng-init="role.selected = resourceCtrl.isSelected(role)" ng-model=role.selected ng-click="resourceCtrl.setSelected(role, role.selected)"> </md-checkbox> <md-divider md-inset></md-divider> </md-list-item> </md-list> <div layout=column layout-align="center center" ng-if="ctrl.state === \'ideal\' &&(!ctrl.items || ctrl.items.length == 0)"> <h2>Empty role list</h2> <p>There is no role match with the query</p> </div> </md-content> </div>'),a.put("views/resources/mb-sidenav.html",""),a.put("views/sidenavs/mb-help.html",'<md-toolbar class=md-hue-1 layout=column layout-align=center> <div layout=row layout-align="start center"> <md-button class=md-icon-button aria-label=Close ng-click=closeHelp()> <wb-icon>close</wb-icon> </md-button> <span flex></span> <h4 translate>Help</h4> </div> </md-toolbar> <md-content mb-preloading=helpLoading flex> <wb-content wb-model=helpContent></wb-content> </md-content>'),a.put("views/sidenavs/mb-messages.html",'<md-toolbar class=md-hue-1 layout=column layout-align=center> <div layout=row layout-align="start center"> <h4 translate="">Messages</h4> </div> </md-toolbar> <md-content mb-preloading="ctrl.status === \'working\'" mb-infinate-scroll=nextMessages() flex layout-fill> <md-list> <md-list-item class=md-2-line ng-repeat="message in ctrl.items"> <wb-icon ng-class="">mail</wb-icon> <div class=md-list-item-text> <p>{{message.message}}</p> </div> <md-button class="md-secondary md-icon-button" ng-click=remove(message) aria-label=remove> <wb-icon>delete</wb-icon> </md-button> </md-list-item> </md-list> </md-content>'),a.put("views/sidenavs/mb-navigator.html",'<md-toolbar class=md-whiteframe-z2 layout=column layout-align="start center"> <img width=128px height=128px ng-show=app.config.logo ng-src="{{app.config.logo}}"> <strong>{{app.config.title}}</strong> <p style="text-align: center">{{ app.config.description | limitTo: 100 }}{{app.config.description.length > 150 ? \'...\' : \'\'}}</p> </md-toolbar> <md-content md-colors="{backgroundColor: \'primary\'}" flex> <mb-tree mb-section=menuItems> </mb-tree> </md-content>'),a.put("views/sidenavs/mb-options.html"," <mb-user-toolbar mb-actions=userActions> </mb-user-toolbar>  <md-content layout-padding> <mb-dynamic-tabs mb-tabs=tabs> </mb-dynamic-tabs> </md-content>"),a.put("views/toolbars/mb-dashboard.html",'<div layout=row layout-align="start center"> <md-button class=md-icon-button hide-gt-sm ng-click=toggleNavigationSidenav() aria-label=Menu> <wb-icon>menu</wb-icon> </md-button> <img hide-gt-sm height=32px ng-if=app.config.logo ng-src="{{app.config.logo}}"> <strong hide-gt-sm style="padding: 0px 8px 0px 8px"> {{app.config.title}} </strong> <mb-navigation-bar hide show-gt-sm ng-show="app.setting.navigationPath !== false"> </mb-navigation-bar> </div> <div layout=row layout-align="end center">  <md-button ng-repeat="menu in scopeMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-href={{menu.url}} ng-click=menu.exec($event); class=md-icon-button> <md-tooltip ng-if=menu.tooltip>{{menu.description}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button> <md-divider ng-if=scopeMenu.items.length></md-divider> <md-button ng-repeat="menu in toolbarMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-href={{menu.url}} ng-click=menu.exec($event); class=md-icon-button> <md-tooltip ng-if="menu.tooltip || menu.description" md-delay=500>{{menu.description | translate}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button> <md-button ng-show=messageCount ng-click=toggleMessageSidenav() style="overflow: visible" class=md-icon-button> <md-tooltip> <span translate="">Display list of messages</span> </md-tooltip> <wb-icon mb-badge={{messageCount}} mb-badge-fill=accent>notifications</wb-icon> </md-button> <mb-user-menu></mb-user-menu> <md-button ng-repeat="menu in userMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-click=menu.exec($event) class=md-icon-button> <md-tooltip ng-if=menu.tooltip>{{menu.tooltip}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button> </div>'),a.put("views/users/mb-account.html",'<md-content mb-preloading=ctrl.loadingUser class=md-padding layout-padding flex> <div layout-gt-sm=row layout=column>  <section mb-preloading=ctrl.updatingAvatar flex-order=-1 flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>User avatar</h3> <img style="border-radius: 50%" width=200px height=200px ng-show=!uploadAvatar ng-src="/api/user/{{ctrl.user.id}}/avatar"> <lf-ng-md-file-input ng-show=uploadAvatar lf-files=avatarFiles accept=image/* progress preview drag> </lf-ng-md-file-input> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button ng-show=!uploadAvatar class="md-raised md-primary" ng-click="uploadAvatar=true"> <sapn translate>edit</sapn> </md-button> <md-button ng-show=uploadAvatar class="md-raised md-primary" ng-click=updateAvatar(avatarFiles)>  <sapn translate>save</sapn> </md-button> <md-button ng-show=uploadAvatar class=md-raised ng-click="uploadAvatar=false">  <sapn translate>cancel</sapn> </md-button> </div> </section>  <section flex-gt-sm=50 md-whiteframe=1 layout=column layout-margin> <h3 translate>Account information</h3> <md-input-container> <label translate>ID</label> <input ng-model=ctrl.user.id disabled> </md-input-container> <md-input-container> <label translate>Username</label> <input ng-model=ctrl.user.login disabled> </md-input-container> <md-input-container> <label translate>EMail</label> <input ng-model=ctrl.user.email type=email disabled> </md-input-container> </section> </div> <div layout-gt-sm=row layout=column>  <section mb-preloading=ctrl.savingUser flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>General settings</h3> <form name=generalForm ng-submit=saveUser(generalForm) layout=column layout-padding> <input hide type="submit"> <div style="text-align: center" layout-margin ng-show="!ctrl.savingUser && saveUserMessage"> <p><span md-colors="{color:\'warn\'}" translate>{{changePassMessage}}</span></p> </div> <md-input-container ng-repeat="apd in apds" layout-fill> <label translate>{{apd.title}}</label> <input ng-model=ctrl.user[apd.key]> </md-input-container> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button class="md-raised md-primary" ng-click=saveUser(generalForm)> <sapn translate>update</sapn> </md-button> </div> </form> </section>  <section mb-preloading=ctrl.changingPassword flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>Password settings</h3> <p translate>Insert current password and new password to change it.</p> <form name=ctrl.passForm ng-submit="changePassword(data, ctrl.passForm)" layout=column layout-padding> <input hide type="submit"> <div style="text-align: center" layout-margin ng-show="!ctrl.changingPassword && changePassMessage"> <p><span md-colors="{color:\'warn\'}" translate>{{changePassMessage}}</span></p> </div> <md-input-container layout-fill> <label translate>current password</label> <input name=oldPass ng-model=data.oldPass type=password required> <div ng-messages=ctrl.passForm.oldPass.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container layout-fill> <label translate>new password</label> <input name=newPass ng-model=data.newPass type=password required> <div ng-messages=ctrl.passForm.newPass.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container layout-fill> <label translate>repeat new password</label> <input name=newPass2 ng-model=newPass2 type=password compare-to=data.newPass required> <div ng-messages=ctrl.passForm.newPass2.$error> <div ng-message=required>This is required.</div> <div ng-message=compareTo>password is not match.</div> </div> </md-input-container> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button class="md-raised md-primary" ng-click="changePassword(data, ctrl.passForm)" ng-disabled=ctrl.passForm.$invalid> <span translate="">Change password</span> </md-button> </div> </form> </section> </div> </md-content>'),a.put("views/users/mb-forgot-password.html",' <md-content layout=row layout-align=none layout-align-gt-sm="center center" flex> <div md-whiteframe=3 style="max-height: none" flex=100 flex-gt-sm=50 layout=column>  <ng-include src="\'views/partials/mb-branding-header-toolbar.html\'"></ng-include> <md-progress-linear ng-disabled=!ctrl.sendingToken style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-primary md-color> </md-progress-linear>  <div layout-margin> <h3 translate>recover password</h3> <p translate>recover password description</p> </div> <div style="text-align: center" layout-margin ng-show=!ctrl.sendingToken> <span ng-show="ctrl.sendTokenState === \'fail\'" md-colors="{color:\'warn\'}" translate>Failed to send token.</span> <span ng-show="ctrl.sendTokenState === \'success\'" md-colors="{color:\'primary\'}" translate>Token is sent.</span> </div> <form name=ctrl.myForm ng-submit=sendToken(credit) layout=column layout-margin> <md-input-container> <label translate>Username</label> <input ng-model=credit.login name=username> </md-input-container> <md-input-container> <label translate>Email</label> <input ng-model=credit.email name=email type=email> <div ng-messages=ctrl.myForm.email.$error> <div ng-message=email translate>Email is not valid.</div> </div> </md-input-container>     <div ng-if="app.captcha.engine===\'recaptcha\'" vc-recaptcha ng-model=credit.g_recaptcha_response theme="app.captcha.theme || \'light\'" type="app.captcha.type || \'image\'" key=app.captcha.recaptcha.key lang="app.captcha.language || \'fa\'"> </div> <input hide type="submit"> </form> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center" layout-margin> <md-button ng-disabled="(credit.email === undefined && credit.login === undefined) || ctrl.myForm.$invalid" flex-order=0 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=sendToken(credit)>{{\'send recover message\' | translate}}</md-button>     <md-button ng-click=cancel() flex-order=0 flex-order-gt-xs=0 class=md-raised> {{\'cancel\' | translate}} </md-button> </div> </div> </md-content>'),a.put("views/users/mb-login.html",' <md-content layout=row layout-align=none layout-align-gt-sm="center center" flex> <div md-whiteframe=3 style="max-height: none" flex=100 flex-gt-sm=50 layout=column>  <ng-include src="\'views/partials/mb-branding-header-toolbar.html\'"></ng-include> <md-progress-linear ng-disabled="!(ctrl.loginProcess || ctrl.logoutProcess)" style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-primary md-color> </md-progress-linear>  <div style="text-align: center" layout-margin ng-show="!ctrl.loginProcess && ctrl.loginState === \'fail\'"> <p><span md-colors="{color:\'warn\'}" translate>{{loginMessage}}</span></p> </div> <form ng-show=app.user.anonymous name=ctrl.myForm ng-submit=login(credit) layout=column layout-margin> <md-input-container> <label translate>Username</label> <input ng-model=credit.login name=username required> <div ng-messages=ctrl.myForm.username.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container> <md-input-container> <label translate>Password</label> <input ng-model=credit.password type=password name=password required> <div ng-messages=ctrl.myForm.password.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container>  <div ng-if="app.captcha.engine===\'recaptcha\'" vc-recaptcha ng-model=credit.g_recaptcha_response theme="app.captcha.theme || \'light\'" type="app.captcha.type || \'image\'" key=app.captcha.recaptcha.key lang="app.setting.local || app.config.local || \'en\'"> </div> <input hide type="submit"> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center" layout-margin> <a href=users/reset-password style="text-decoration: none" ui-sref=forget flex-order=1 flex-order-gt-xs=-1>{{\'forgot your password?\' | translate}}</a> <md-button ng-disabled=ctrl.myForm.$invalid flex-order=-1 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=login(credit)>{{\'login\' | translate}}</md-button>      </div> </form> <div layout-margin ng-show=!app.user.anonymous layout=column layout-align="none center"> <img width=150px height=150px ng-show=!uploadAvatar ng-src="{{app.user.current.avatar}}"> <h3>{{app.user.current.login}}</h3> <p translate>you are loged in. go to one of the following options.</p> </div> <div ng-show=!app.user.anonymous layout=column layout-align=none layout-gt-xs=row layout-align-gt-xs="center center" layout-margin> <md-button ng-click=cancel() flex-order=0 flex-order-gt-xs=0 class=md-raised> <wb-icon>settings_backup_restore</wb-icon> {{\'back\' | translate}} </md-button> <md-button ng-href=users/account flex-order=1 flex-order-gt-xs=-1 class=md-raised> <wb-icon>account_circle</wb-icon> {{\'account\' | translate}} </md-button> </div> </div> </md-content>'),a.put("views/users/mb-profile.html",'<md-content class=md-padding layout-padding flex amh-preloading="ctrl.loadUser || ctrl.loadProfile || ctrl.saveProfile"> <div layout-gt-sm=row layout=column>  <section flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>Contacts information</h3> <form name=contactForm layout=column layout-padding> <md-input-container layout-fill> <label translate>Site</label> <input ng-model=ctrl.profile.site> </md-input-container> <md-input-container layout-fill> <label translate>Public email</label> <input name=email ng-model=ctrl.profile.email type=email> <div ng-messages=contactForm.email.$error> <div ng-message=email>This is required.</div> </div> </md-input-container> <md-input-container layout-fill> <label translate>Phone number</label> <input ng-model=ctrl.profile.phone> </md-input-container> <md-input-container layout-fill> <label translate>Mobile number</label> <input ng-model=ctrl.profile.mobile> </md-input-container> </form> </section>  <section flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>Social networks information</h3> <form name=socialForm layout=column layout-padding> <md-input-container layout-fill> <label translate>LinkedId</label> <input ng-model=ctrl.profile.linkedin> </md-input-container> <md-input-container layout-fill> <label translate>Telegram</label> <input ng-model=ctrl.profile.telegram> </md-input-container> <md-input-container layout-fill> <label translate>Facebook</label> <input ng-model=ctrl.profile.facebook> </md-input-container> </form> </section> </div> <div layout-gt-sm=row layout=column>  <section layout=column md-whiteframe=1 layout-fill layout-margin> <h3 translate>Overall profile info</h3> <div name=overalForm layout=column layout-padding> <label layout-fill ng-repeat="(key, value) in ctrl.profile" ng-if=value> <span translate>{{key}}</span>: {{value}} </label> </div> </section> </div> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button class="md-raised md-primary" ng-click=save()>  <sapn translate>update</sapn> </md-button> </div> </md-content>'),a.put("views/users/mb-recover-password.html",' <md-content layout=row layout-align=none layout-align-gt-sm="center center" flex> <div md-whiteframe=3 style="max-height: none" flex=100 flex-gt-sm=50 layout=column>  <ng-include src="\'views/partials/mb-branding-header-toolbar.html\'"></ng-include> <md-progress-linear ng-disabled=!ctrl.changingPass style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-primary md-color> </md-progress-linear>  <div layout-margin> <h3 translate>reset password</h3> <p translate>reset password description</p> </div> <div style="text-align: center" layout-margin ng-show=!ctrl.changingPass> <span ng-show="ctrl.changePassState === \'fail\'" md-colors="{color:\'warn\'}" translate>Failed to reset password.</span> <span ng-show="ctrl.changePassState === \'fail\'" md-colors="{color:\'warn\'}" translate>{{$scope.changePassMessage}}</span> <span ng-show="ctrl.changePassState === \'success\'" md-colors="{color:\'primary\'}" translate>Password is reset.</span> </div> <form name=ctrl.myForm ng-submit=changePassword(data) layout=column layout-margin> <md-input-container> <label translate>Token</label> <input ng-model=data.token name=token required> <div ng-messages=ctrl.myForm.token.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container> <md-input-container> <label translate>New password</label> <input ng-model=data.password name=password type=password required> <div ng-messages=ctrl.myForm.password.$error> <div ng-message=required translate>This field required.</div> </div> </md-input-container> <md-input-container> <label translate>Repeat new password</label> <input name=password2 ng-model=repeatPassword type=password compare-to=data.password required> <div ng-messages=ctrl.myForm.password2.$error> <div ng-message=required translate>This field is required.</div> <div ng-message=compareTo translate>Passwords is not match.</div> </div> </md-input-container> <input hide type="submit"> </form> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button ng-disabled=ctrl.myForm.$invalid flex-order=0 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=changePassword(data)>{{\'change password\' | translate}}</md-button>     <md-button ng-click=cancel() flex-order=0 flex-order-gt-xs=0 class=md-raised> {{\'cancel\' | translate}} </md-button> </div> </div> </md-content>');
}]);