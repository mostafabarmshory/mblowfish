"use strict";function MbItemsCtrl(e,t,n,a){this.state="ideal",this.items=[],this.state="init",this.lastResponse=null,this.queryParameter=new n,this.queryParameter.setOrder("id","d"),this.reload=function(){return delete this.lastResponse,this.items=[],this.queryParameter.setPage(1),this.loadNextPage()},this.init=function(){this.state="ideal"},this.loadNextPage=function(){if(!angular.isFunction(this.getItems))throw"The controller does not implement getItems function";if("init"===this.state)throw"this.init() function is not called in the controller";if("ideal"!==this.state){if(this.lastQuery)return this.lastQuery;throw"Items controller is not in ideal state"}if(this.lastResponse){if(!this.lastResponse.hasMore())return e.resolve();this.queryParameter.setPage(this.lastResponse.getNextPageIndex())}this.state="busy";var t=this;return this.lastQuery=this.getItems(this.queryParameter).then(function(e){t.lastResponse=e,t.items=t.items.concat(e.items),t.error=null},function(e){t.error=e}).finally(function(){t.state="ideal",delete t.lastQuery}),this.lastQuery},this.setDataQuery=function(e){this.grqphql=e},this.getProperties=function(){if(!angular.isFunction(this.getSchema))return[];if(angular.isDefined(this._schema))return this._schema;var t=this;return e.when(this.getSchema()).then(function(e){t._schema=e}),[]},this.getActions=function(){var t=this._actions,n=this;return angular.isFunction(this.createModel)&&t.push(new a({action:function(){var t=n.createModel();e.when(t).then(function(e){n.items.push(e)})}})),t},this.addAction=function(e){angular.isDefined(this._actions)||(this._actions=[]),e instanceof a||(e=new a(e)),this._actions=this._actions.push(e)},this.deleteItem=function(e){var n,a=this;t.confirm("Delete item?").then(function(){return n=a.items.indexOf(e),a.deleteModel(e)}).then(function(){a.items.splice(n,1)})},this.getSchema=function(){return e.resolve({name:"Item",properties:[{id:"int",title:"string"}]})},this.getItems=function(){},this.getItem=function(e){return{id:e}},this.addItem=function(){var t={id:Math.random(),title:"test item"};return e.accept(t)}}angular.module("mblowfish-core",["ngMaterial","ngAnimate","ngCookies","ngSanitize","ngRoute","seen-core","seen-tenant","seen-cms","am-wb-core","am-wb-seen-core","lfNgMdFileInput","ngStorage","vcRecaptcha","ng-appcache","ngFileSaver","mdSteppers","angular-material-persian-datepicker"]),angular.module("mblowfish-core").config(["$httpProvider",function(e){e.interceptors.push("httpRequestInterceptor")}]),angular.module("mblowfish-core").config(["$mdDateLocaleProvider",function(e){moment.locale("en");var t=moment.localeData();e.months=t._months,e.shortMonths=moment.monthsShort(),e.days=t._weekdays,e.shortDays=t._weekdaysMin,e.firstDayOfWeek=t._week.dow,e.parseDate=function(e){var t=moment(e,"L",!0);return t.isValid()?t.toDate():new Date(NaN)},e.formatDate=function(e){var t=moment(e);return t.isValid()?t.format("L"):""}}]),angular.module("mblowfish-core").config(["$routeProvider","$locationProvider",function(e,t){e.when("/initialization",{templateUrl:"views/mb-initial.html",controller:"MbInitialCtrl",controllerAs:"ctrl",protect:["$rootScope",function(e){return!e.app.user.owner}],sidenavs:[],toolbars:[]}).when("/preferences",{templateUrl:"views/mb-preferences.html",controller:"MbPreferencesCtrl",controllerAs:"ctrl",helpId:"preferences",protect:["$rootScope",function(e){return!e.app.user.owner}]}).when("/preferences/:preferenceId",{templateUrl:"views/mb-preference.html",controller:"MbPreferenceCtrl",helpId:["$routeParams",function(e){return"preferences-"+e.preferenceId}],protect:["$rootScope",function(e){return!e.app.user.owner}]}).when("/users/login",{templateUrl:"views/users/mb-login.html",controller:"MbAccountCtrl",sidenavs:[],toolbars:[]}).when("/users/account",{templateUrl:"views/users/mb-account.html",controller:"MbAccountCtrl",protect:!0,helpId:"mb-account"}).when("/users/profile",{templateUrl:"views/users/mb-profile.html",controller:"MbProfileCtrl",protect:!0,helpId:"mb-profile"}).when("/users/reset-password",{templateUrl:"views/users/mb-forgot-password.html",controller:"MbPasswordCtrl",sidenavs:[],toolbars:[]}).when("/users/reset-password/token",{templateUrl:"views/users/mb-recover-password.html",controller:"MbPasswordCtrl",sidenavs:[],toolbars:[]}).when("/users/reset-password/token/:token",{templateUrl:"views/users/mb-recover-password.html",controller:"MbPasswordCtrl",sidenavs:[],toolbars:[]}),t.html5Mode(!0)}]),angular.module("mblowfish-core").config(["$mdThemingProvider",function(e){e.definePalette("amdPrimaryPalette",{50:"#FFFFFF",100:"rgb(255, 198, 197)",200:"#E75753",300:"#E75753",400:"#E75753",500:"#E75753",600:"#E75753",700:"#E75753",800:"#E75753",900:"#E75753",A100:"#E75753",A200:"#E75753",A400:"#E75753",A700:"#E75753"}),e.theme("dark").primaryPalette("grey",{default:"900","hue-1":"700","hue-2":"600","hue-3":"500"}).accentPalette("grey",{default:"700"}).warnPalette("red").backgroundPalette("grey").dark(),e.alwaysWatchTheme(!0)}]),angular.module("mblowfish-core").controller("MbAccountCtrl",["$scope","$rootScope","$app","$translate","$window","$usr","$errorHandler",function(e,t,n,a,o,i,r){var l={loginProcess:!1,loginState:null,logoutProcess:!1,logoutState:null,changingPassword:!1,changePassState:null,updatingAvatar:!1,loadingUser:!1,savingUser:!1};function s(){o.history.back()}function c(){if(!l.loadingUser)return l.loadingUser=!0,i.getAccount("current").then(function(e){l.user=e},function(e){l.error=e}).finally(function(){l.loadingUser=!1})}e.apds=[{key:"first_name",title:"First name",type:"string"},{key:"last_name",title:"Last name",type:"string"},{key:"language",title:"language",type:"string"},{key:"timezone",title:"timezone",type:"string"}],e.$watch(function(){return t.app.user},function(t){e.appUser=t},!0),e.ctrl=l,e.login=function(t,a){return!l.loginProcess&&(l.loginProcess=!0,n.login(t).then(function(){l.loginState="success",e.loginMessage=null},function(t){l.loginState="fail",e.loginMessage=r.handleError(t,a)}).finally(function(){l.loginProcess=!1}))},e.logout=function(){return!l.logoutProcess&&(l.logoutProcess=!0,n.logout().then(function(){l.logoutState="success"},function(){l.logoutState="fail"}).finally(function(){l.logoutProcess=!1}))},e.changePassword=function(t,o){if(!l.changingPassword){l.changingPassword=!0;var s={old:t.oldPass,new:t.newPass,password:t.newPass};i.putCredential(s).then(function(){n.logout(),l.changePassState="success",e.changePassMessage=null,toast(a.instant("Password is changed successfully. Login with new password."))},function(t){l.changePassState="fail",e.changePassMessage=r.handleError(t,o),alert(a.instant("Failed to change the password."))}).finally(function(){l.changingPassword=!1})}},e.updateAvatar=function(e){if(!l.updatingAvatar)return l.updatingAvatar=!0,l.user.uploadAvatar(e[0].lfFile).then(function(){o.location.reload(),toast(a.instant("Your avatar updated successfully."))},function(){alert(a.instant("Failed to update avatar"))}).finally(function(){l.updatingAvatar=!1})},e.load=c,e.reload=c,e.saveUser=function(t){if(!l.savingUser)return l.savingUser=!0,l.user.update().then(function(t){l.user=t,e.saveUserMessage=null,toast(a.instant("Your information updated successfully."))},function(n){e.saveUserMessage=r.handleError(n,t),alert(a.instant("Failed to update."))}).finally(function(){l.savingUser=!1})},e.back=s,e.cancel=s,c()}]),angular.module("mblowfish-core").controller("MbAccountsCtrl",["$scope","$usr","$controller","$q",function(e,t,n,a){angular.extend(this,n("MbItemsCtrl",{$scope:e})),this.getSchema=function(){return a.resolve({name:"account",properties:[{name:"Id",type:"int"}]})},this.getItems=function(e){return t.getAccounts(e)},this.getItem=function(e){return t.getAccount(e)},this.deleteItem=function(e){return t.deleteAccount(e.id)},this.init()}]),angular.module("mblowfish-core").controller("AmdDashboardCtrl",["$scope","$navigator","$app",function(e,t,n){t.scopePath(e).add({title:"Dashboard",link:"dashboard"}),n.scopeMenu(e).add({priority:15,icon:"edit",label:"Edit content",tooltip:"Toggle edit mode of the current contetn",visible:function(){return e.app.user.owner},action:function(){e.editable=!e.editable}})}]),angular.module("mblowfish-core").controller("MbGroupsCtrl",["$scope","$usr","$q","$controller",function(e,t,n,a){angular.extend(this,a("MbItemsCtrl",{$scope:e})),this.getSchema=function(){return n.resolve({name:"group",properties:[{name:"Id",type:"int"}]})},this.getItems=function(e){return t.getGroups(e)},this.getItem=function(e){return t.getGroup(e)},this.deleteItem=function(e){return t.deleteRole(e.id)},this.init()}]),angular.module("mblowfish-core").controller("MbHelpCtrl",["$scope","$rootScope","$route","$http","$translate","$help",function(e,t,n,a,o,i){var r;function l(t){if(e.helpLoading)return e.helpLoading;var n=i.getHelpPath(t);return n&&n!==r&&(e.helpLoading=a.get(n).then(function(t){e.helpContent=t.data,r=n}).finally(function(){e.helpLoading=!1})),e.helpLoading}t.showHelp=!1,e.closeHelp=function(){t.showHelp=!1},e.$watch("showHelp",function(e){if(e)return l()}),e.$watch(function(){return i.currentItem()},function(){t.showHelp&&l()})}]),angular.module("mblowfish-core").controller("MbInitialCtrl",["$scope","$rootScope","$preferences","$mdStepper","$window","$wbUtil","$routeParams",function(e,t,n,a,o,i,r){var l="setting-stepper";function s(){a(l).next()}function c(){var o="<wb-group ng-model='model' flex style='overflow: auto;' layout-fill></wb-group>",r={id:"welcome",title:"Welcome",template:o,controller:["$scope","$http","$translate",function(e,t,n){t.get("resources/welcome/"+n.use()+".json").then(function(t){e.model=i.clean(t.data)||{}})}],description:"Welcome. Please login to continue.",icon:"accessibility",priority:"first",required:!0},s={id:"congratulate",title:":)",description:"Congratulation. Your site is ready.",template:o,controller:["$scope","$http","$translate",function(e,n,a){n.get("resources/congratulate/"+a.use()+".json").then(function(t){e.model=i.clean(t.data)||{}}),t.app.config.is_initialized=!0}],icon:"favorite",priority:"last",required:!0};n.newPage({id:"initial-language",title:"Language",templateUrl:"views/preferences/mb-language.html",controller:"MbLanguageCtrl",description:"Select default language of web application.",icon:"language",priority:"first",required:!0}),n.newPage(r),n.newPage(s),n.pages().then(function(t){var n=[];t.items.forEach(function(e){e.required&&n.push(e)}),e.steps=n}),e.$watch(function(){var e=a(l);return e?e.currentStep:-1},function(t){t>=0&&e.steps&&e.steps.length&&(e.currentStep=e.steps[t])})}var u=e.$watch("app.state.status",function(e){switch(e){case"loading":case"fail":case"error":break;case"ready":u(),!r.force&&t.app.config.is_initialized?o.location=o.location.href.replace(/initialization$/gm,""):c()}});this.goToStep=function(e){a(l).goto(e)},this.nextStep=s,this.nextStep=s,this.prevStep=function(){a(l).back()}}]),MbItemsCtrl.$inject=["$q","$notification","QueryParameter","Action"],angular.module("mblowfish-core").controller("MbItemsCtrl",MbItemsCtrl),angular.module("mblowfish-core").controller("MbLanguageCtrl",["$scope","$app","$rootScope","$http","$language",function(e,t,n,a,o){function i(t){e.myLanguage=t,n.app.config.languages=[],n.app.config.languages.push(e.myLanguage),o.use(e.myLanguage.key),n.app.config.local=n.app.config.local||{},angular.isObject(n.app.config.local)||(n.app.config.local={}),n.app.config.local.language=e.myLanguage.key,e.myLanguage.dir&&(n.app.config.local.dir=e.myLanguage.dir)}e.setLanguage=i,a.get("resources/languages.json").then(function(t){var n=t?t.data:{};e.languages=n.languages}).finally(function(){var t=o.use();if(e.languages)for(var n=0;n<e.languages.length;n++)if(e.languages[n].key===t)return void i(e.languages[n])})}]),angular.module("mblowfish-core").controller("MbLocalCtrl",["$scope","$language","$navigator",function(e,t,n){e.goToManage=function(){n.openPage("preferences/languages/manager")},e.languages=[],t.languages().then(function(t){return e.languages=t.items,e.languages})}]),angular.module("mblowfish-core").controller("MessagesCtrl",["$scope","QueryParameter","$rootScope",function(e,t,n){var a=new t;a.setOrder("id","d");var o=null,i={state:"relax",items:[]};function r(){if("working"!==i.status&&(!o||o.hasMore()))return o&&a.setPage(o.next()),i.status="working",n.app.user.current.getMessages(a).then(function(e){o=e,i.items=i.items.concat(o.items),i.status="relax"},function(){i.status="fail"})}function l(){return o=null,i.items=[],r()}e.items=[],e.reload=l,e.search=function(e){return a.setQuery(e),l()},e.nextMessages=r,e.remove=function(e){return e.delete().then(function(){var t=i.items.indexOf(e);t>-1&&i.items.splice(t,1),0===i.items.length&&l()})},e.ctrl=i,e.qp=a,l()}]),angular.module("mblowfish-core").controller("AmdNavigatorDialogCtrl",["$scope","$mdDialog","config",function(e,t,n){e.config=n,e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}]),angular.module("mblowfish-core").controller("AmdNavigatorCtrl",["$scope","$navigator","$route",function(e,t,n){!function(){var a=[];angular.forEach(n.routes,function(e){e.navigate&&(e.type="link",e.link=e.originalPath,e.title=e.title||e.name||"no-name",e.priority=e.priority||100,a.push(e))}),angular.forEach(t.items(),function(e){a.push(e)}),e.menuItems={hiden:!1,sections:[]};var o=[];angular.forEach(a,function(n){n.groups?angular.forEach(n.groups,function(a){var i=t.group(a);i.id in o||(o[i.id]=angular.extend({type:"toggle",sections:[]},i),e.menuItems.sections.push(o[i.id])),o[i.id].sections.push(n)}):e.menuItems.sections.push(n)})}()}]),angular.module("mblowfish-core").controller("MbOptionsCtrl",["$scope","$options",function(e,t){t.pages().then(function(t){e.tabs=t.items})}]),angular.module("mblowfish-core").controller("MbPasswordCtrl",["$scope","$usr","$location","$navigator","$routeParams","$window","$errorHandler",function(e,t,n,a,o,i,r){var l={sendingToken:!1,sendTokenState:null,changingPass:!1,changingPassState:null};e.data={},e.data.token=o.token,e.ctrl=l,e.sendToken=function(a,o){return!l.sendingToken&&(l.sendingToken=!0,a.callback=n.absUrl()+"/token/{{token}}",t.resetPassword(a).then(function(){l.sendTokenState="success",e.sendingTokenMessage=null},function(t){l.sendTokenState="fail",e.sendingTokenMessage=r.handleError(t,o)}).finally(function(){l.sendingToken=!1}))},e.changePassword=function(n,o){if(l.changingPass)return!1;l.changingPass=!0;var i={token:n.token,new:n.password};return t.resetPassword(i).then(function(){l.changePassState="success",e.changePassMessage=null,a.openView("users/login")},function(t){l.changePassState="fail",e.changePassMessage=r.handleError(t,o)}).finally(function(){l.changingPass=!1})},e.cancel=function(){i.history.back()}}]),angular.module("mblowfish-core").controller("MbPreferenceCtrl",["$scope","$routeParams","$navigator","$preferences",function(e,t,n,a){a.page(t.preferenceId).then(function(t){e.preference=t},function(){n.openPage("preferences")}),e.preferenceId=t.preferenceId}]),angular.module("mblowfish-core").controller("MbPreferencesCtrl",["$scope","$preferences",function(e,t){t.pages().then(function(t){e.preferenceTiles=[],e.pages=[];for(var n=0;n<t.items.length;n++){var a=t.items[n];a.hidden||(e.preferenceTiles.push({colspan:1,rowspan:1,page:a}),e.pages.push(a))}}),e.openPreference=function(e){t.openPage(e)}}]),angular.module("mblowfish-core").controller("MbProfileCtrl",["$scope","$rootScope","$translate","$window",function(e,t,n,a){var o={user:null,profile:null};function i(){o.user=t.app.user.current,o.user?function(e){if(o.loadinProfile)return;o.loadingProfile=!0,e.getProfiles().then(function(e){return o.profile=e,e},function(){alert(n.instant("Fial to load profile."))}).finally(function(){o.loadingProfile=!1})}(o.user):alert(n.instant("Fail to load user."))}function r(){a.history.back()}e.ctrl=o,e.load=i,e.reload=i,e.save=function(){if(!o.savingProfile)return o.savingProfile=!0,o.profile.update().then(function(){toast(n.instant("Save is successfull."))},function(){alert(n.instant("Fail to save item."))}).finally(function(){o.savingProfile=!1})},e.back=r,e.cancel=r,i()}]),angular.module("mblowfish-core").controller("MbRolesCtrl",["$scope","$usr","$q","$controller",function(e,t,n,a){angular.extend(this,a("MbItemsCtrl",{$scope:e})),this.getSchema=function(){return n.resolve({name:"role",properties:[{name:"Id",type:"int"}]})},this.getItems=function(e){return t.getRoles(e)},this.getItem=function(e){return t.getRole(e)},this.deleteItem=function(e){return t.deleteRole(e.id)},this.init()}]),angular.module("mblowfish-core").controller("MbThemesCtrl",["$scope","$mdTheming",function(e,t){e.themes=[],angular.forEach(t.THEMES,function(t,n){e.themes.push({id:n,label:t.name})})}]),angular.module("mblowfish-core").controller("MbToolbarDashboardCtrl",["$scope","$actions","$mdSidenav",function(e,t,n){e.toolbarMenu=t.group("mb.toolbar.menu"),e.toggleNavigationSidenav=function(){n("navigator").toggle()},e.toggleMessageSidenav=function(){n("messages").toggle()}}]),angular.module("mblowfish-core").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,a){a.$validators.compareTo=function(t){return t===e.otherModelValue},e.$watch("otherModelValue",function(){a.$validate()})}}}),angular.module("mblowfish-core").directive("mbBadge",["$mdTheming","$rootScope",function(e,t){return{restrict:"E",replace:!0,transclude:!0,link:function(n,a,o){function i(n,o){o&&a.css(n,function(n){var a=(n||"").split("-");a.length<2&&a.push("500");var o=a[1]||"800",i=a[0]||"primary",r=e.THEMES[t.app.setting.theme||t.app.config.theme||"default"];void 0===r&&(r=e.THEMES.default);var l=r.colors[i]?r.colors[i].name:i;return"rgb("+(e.PALETTES[l][o]?e.PALETTES[l][o].value:e.PALETTES[l][500].value).join(",")+")"}(o))}e(a),n.$watch(function(){return o.mbBadgeColor},function(e){i("color",e)}),n.$watch(function(){return o.mbBadgeFill},function(e){i("background-color",e)})},template:function(){return'<div class="mb-badge" ng-transclude></div>'}}}]),angular.module("mblowfish-core").directive("mbBadge",["$mdTheming","$mdColors","$timeout","$window","$compile","$rootScope",function(e,t,n,a,o,i){return{priority:100,restrict:"A",link:function(t,n,a){e(n);var r=n.parent(),l=angular.element("<div></div>"),s=o(l)(t),c=parseInt(a.mdBadgeOffset);function u(t,n){n&&s.css(t,function(t){var n=(t||"").split("-");n.length<2&&n.push("500");var a=n[1]||"800",o=n[0]||"primary",r=e.THEMES[i.app.setting.theme||i.app.config.theme||"default"];void 0===r&&(r=e.THEMES.default);var l=r.colors[o]?r.colors[o].name:o;return"rgb("+(e.PALETTES[l][a]?e.PALETTES[l][a].value:e.PALETTES[l][500].value).join(",")+")"}(n))}isNaN(c)&&(c=10),s.addClass("mb-badge"),s.css("position","absolute"),r.append(s),t.$watch(function(){return a.mbBadgeColor},function(e){u("color",e)}),t.$watch(function(){return a.mbBadgeFill},function(e){u("background-color",e)}),t.$watch(function(){return a.mbBadge},function(e){s.text(e),s.css("display",e?"initial":"none")}),t.$watch(function(){return{top:n.prop("offsetTop"),left:n.prop("offsetLeft"),width:n.prop("offsetWidth"),height:n.prop("offsetHeight")}},function(e){!function(e){var t=n.prop("offsetTop");s.css({display:a.mbBadge&&t?"initial":"none",left:e.left+e.width-20+c+"px",top:e.top+e.height-20+c+"px"})}(e)},!0)}}}]),angular.module("mblowfish-core").directive("mbCaptcha",function(){return{restrict:"E",require:["?^^form"],templateUrl:"views/directives/mb-captcha.html",scope:{response:"=?ngModel"},link:function(e,t,n,a){var o=a[0];o&&angular.isDefined(n.required)&&e.$watch("required",function(){o&&o.$setValidity("captcha",!1===e.required?null:Boolean(e.response))}),e._response=null,e.$watch("_response",function(){e.response=e._response}),e.$watch("response",function(){e._response=e.response})}}}),angular.module("mblowfish-core").directive("mbDatepicker",["$mdUtil","$rootScope",function(e,t){return{replace:!1,template:function(){return"Gregorian"===t.app.calendar?'<md-datepicker ng-model="date" md-hide-icons="calendar" md-placeholder="{{placeholder || \'Enter date\'}}"></md-datepicker>':'<md-persian-datepicker ng-model="date" md-hide-icons="calendar" md-placeholder="{{placeholder || \'Enter date\'}}"></md-persian-datepicker>'},restrict:"E",scope:{minDate:"=mbMinDate",maxDate:"=mbMaxDate",placeholder:"@mbPlaceholder",hideIcons:"@?mbHideIcons"},require:["ngModel"],priority:210,link:function(n,a,o,i){n.app=t.app;var r=i[0]||e.fakeNgModel();r.$render=function(){if(r.$modelValue){var e=moment.utc(r.$modelValue).local();e.isValid()&&(n.date=e)}else n.date=null},n.$watch("date",function(){if(n.date){var e=moment(n.date).utc().format("YYYY-MM-DD HH:mm:ss");r.$setViewValue(e)}else r.$setViewValue(null)})}}}]),angular.module("mblowfish-core").directive("mbDynamicTabs",["$wbUtil","$q","$rootScope","$compile","$controller",function(e,t,n,a,o){var i="mb-dynamic-tabs-select-resource-children";return{restrict:"E",replace:!0,scope:{mbTabs:"="},templateUrl:"views/directives/mb-dynamic-tabs.html",link:function(r,l){r.$watch("pageIndex",function(s){s>=0&&function(s){var c=[],u=[],d=l.find("#"+i);d.empty();var m=r.mbTabs[s],p=e.getTemplateFor(m);angular.isDefined(p)&&c.push(p.then(function(e){e=e;var t=angular.element(e),i=n.$new(!1,r);i.page=m,i.value=r.value,angular.isDefined(m.controller)&&o(m.controller,{$scope:i,$element:t}),a(t)(i),u.push(t)})),t.all(c).then(function(){angular.forEach(u,function(e){d.append(e)})})}(s)})}}}]),angular.module("mblowfish-core").directive("mbErrorMessages",["$compile",function(e){return{restrict:"A",scope:{mbErrorMessages:"="},link:function(t,n){var a=null;t.errorMessages=function(e){if(e){var t={};return t[e.status]=e.statusText,t[e.data.code]=e.data.message,t}},t.$watch(function(){return t.mbErrorMessages},function(o){if(o){var i=angular.element('<div ng-messages="errorMessages(mbErrorMessages)" role="alert" multiple>\t<div ng-messages-include="views/mb-error-messages.html"></div></div>'),r=e(i)(t);a=n.replaceWith(r)}else a&&(n.replaceWith(a),a=null)})}}}]),angular.module("mblowfish-core").directive("mbInfinateScroll",["$parse","$q","$timeout",function(e,t,n){return{restrict:"A",link:function(a,o,i){var r=o[0];function l(){var o=e(i.mbInfinateScroll)(a);return t.when(o).then(function(e){if(e)return n(function(){if(r.scrollHeight<=r.offsetHeight)return l()},100)})}o.addClass("mb-infinate-scroll"),o.on("scroll",function(){r.scrollTop+r.offsetHeight+5>=r.scrollHeight&&l()}),l()}}}]),angular.module("mblowfish-core").directive("mbNavigationBar",["$actions","$navigator",function(e,t){return{restrict:"E",replace:!1,templateUrl:"views/directives/mb-navigation-bar.html",link:function(n){n.isVisible=function(e){return!!angular.isUndefined(e.visible)||(angular.isFunction(e.visible)?e.visible():e.visible)},n.goToHome=function(){t.openPage("")},n.pathMenu=e.group("navigationPathMenu")}}}]),angular.module("mblowfish-core").directive("mbPaginationBar",["$window","$timeout","$mdMenu","$parse",function(e,t,n,a){return{restrict:"E",templateUrl:"views/directives/mb-pagination-bar.html",scope:{mbModel:"=",mbReload:"@?",mbExport:"=",mbSortKeys:"=",mbSortKeysTitles:"=?",mbMoreActions:"=",mbTitle:"@?",mbIcon:"@?",mbEnableSearch:"=?"},link:function(n,o,i){var r={sortDesc:!0,sortBy:void 0===n.mbSortKeys?"id":n.mbSortKeys[0],searchTerm:null};function l(){angular.isDefined(i.mbReload)&&a(i.mbReload)(n.$parent)}n.showBoxOne=!1,n.focusToElement=function(n){t(function(){e.document.getElementById(n).focus()},50)},n.search=function(e){n.mbModel.setQuery(e),l()},n.__reload=l,n.query=r,angular.isFunction(n.mbExport)&&(n.exportData=function(){angular.isFunction(n.mbExport)&&n.mbExport(n.mbModel)}),void 0===n.mbEnableSearch&&(n.mbEnableSearch=!0),n.$watch("query",function(){l()},!0)}}}]),angular.module("mblowfish-core").directive("mbPanelSidenavAnchor",["$route","$sidenav","$rootScope","$mdSidenav","$q","$wbUtil","$controller","$compile",function(e,t,n,a,o,i,r,l){var s=angular.element("<div></div>");return{restrict:"A",priority:601,link:function(c,u){var d=[];function m(e){for(var t=0;t<d.length;t++)if(d[t].page.id===e.id)return o.when(d[t]);return function(e,t,o,c){var u=e.$new(!1,e);return u=Object.assign(u,{app:n.app,_page:t,_visible:function(){if(angular.isFunction(this._page.visible)){var e=this._page.visible(this);return e?a(this._page.id).open():a(this._page.id).close(),e}return!0}}),i.getTemplateFor(t).then(function(e){var n=angular.element(o+e+c);s.append(n);var a=l(n);if(angular.isDefined(t.controller)){var i={$scope:u,$element:n},d=r(t.controller,i);t.controllerAs&&(u[t.controllerAs]=d),n.data("$ngControllerController",d)}return{element:a(u),page:t}})}(c,e,"<md-sidenav md-theme=\"{{app.setting.theme || app.config.theme || 'default'}}\" md-theme-watch md-component-id=\"{{_page.id}}\" md-is-locked-open=\"_visible() && (_page.locked && $mdMedia('gt-sm'))\" md-whiteframe=\"2\" ng-class=\"{'md-sidenav-right': app.dir=='rtl',  'md-sidenav-left': app.dir!='rtl', 'mb-sidenav-ontop': !_page.locked}\" layout=\"column\">","</md-sidenav>").then(function(e){d.push(e)})}c.$watch(function(){return e.current},function(){if(angular.isDefined(e.current)){var n=e.current.sidenavs||t.defaultSidenavs();(n=n.slice(0)).push("settings"),n.push("help"),n.push("messages");var a=[],i=[];angular.forEach(n,function(e){i.push(t.sidenav(e).then(function(e){a.push(e)}))}),o.all(i).then(function(){!function(e){d=function(e,t){for(var n=[],a=0;a<t.length;a++){for(var o=!1,i=0;i<e.length;i++)if(e[i].id===t[a].page.id){o=!0;break}o?(t[a].element.detach(),t[a].cached=!0,n.push(t[a])):t[a].element.remove()}return n}(e,d);for(var t=[],n=0;n<e.length;n++)t.push(m(e[n]));o.all(t).then(function(){var e=u;d.sort(function(e,t){return(e.page.priority||10)>(t.page.priority||10)});for(var t=0;t<d.length;t++){var n=d[t];n.chached||("start"===n.page.position?e.prepend(n.element):e.append(n.element))}})}(a)})}})}}}]),angular.module("mblowfish-core").directive("mbPanelToolbarAnchor",["$route","$toolbar","$rootScope","$q","$wbUtil","$controller","$compile",function(e,t,n,a,o,i,r){return{restrict:"A",link:function(l,s){var c=[];function u(e){for(var t=0;t<c.length;t++)if(c[t].page.id===e.id)return a.when(c[t]);var s=e.raw?"":'<md-toolbar ng-show="_visible()" md-theme="{{app.setting.theme || app.config.theme || \'default\'}}" md-theme-watch layout="column" layout-gt-xs="row" layout-align="space-between stretch">',u=e.raw?"":"</md-toolbar>";return function(e,t,a,l){var s=e.$new(!1,e);return s=Object.assign(s,{app:n.app,_page:t,_visible:function(){return!angular.isFunction(this._page.visible)||this._page.visible(this)}}),o.getTemplateFor(t).then(function(e){var n=angular.element(a+e+l),o=r(n);if(angular.isDefined(t.controller)){var c={$scope:s,$element:n},u=i(t.controller,c);t.controllerAs&&(s[t.controllerAs]=u),n.data("$ngControllerController",u)}return{element:o(s),page:t}})}(l,e,s,u).then(function(e){c.push(e)})}l.$watch(function(){return e.current},function(){if(e.current){var n=e.current.toolbars||t.defaultToolbars();if(angular.isArray(n)){var o=[],i=[];angular.forEach(n,function(e){i.push(t.toolbar(e).then(function(e){o.push(e)}))}),a.all(i).then(function(){!function(e){c=function(e,t){for(var n=[],a=0;a<t.length;a++){for(var o=!1,i=0;i<e.length;i++)if(e[i].id===t[a].page.id){o=!0;break}o?(t[a].element.detach(),t[a].cached=!0,n.push(t[a])):t[a].element.remove()}return n}(e,c);for(var t=[],n=0;n<e.length;n++)t.push(u(e[n]));a.all(t).then(function(){var e=s;c.sort(function(e,t){return(e.page.priority||10)>(t.page.priority||10)});for(var t=0;t<c.length;t++){var n=c[t];n.chached||e.prepend(n.element)}})}(o)})}}})}}}]),angular.module("mblowfish-core").directive("mbPanel",["$route","$rootScope","$actions","$injector",function(e,t,n,a){function o(e){return!e.protect||(angular.isFunction(e.protect)?!a.invoke(e.protect,e):e.protect)}return{restrict:"E",replace:!0,templateUrl:"views/directives/mb-panel.html",link:function(i){var r=new machina.Fsm({initialize:function(){i.status=this.initialState},namespace:"mb-panel-controller",initialState:"loading",states:{ready:{routeChange:function(e){!e.protect||o(e)||this.transition("accessDenied")},appStateChange:function(e){e.startsWith("ready")||this.transition("loading")},userStateChange:function(e){e&&(this.getRoute().protect&&e?this.transition("login"):this.transition("readyAnonymous"))}},accessDenied:{routeChange:function(e){e.protect&&!o(e)||this.transition("ready")},appStateChange:function(e){e.startsWith("ready")||this.transition("loading")},userStateChange:function(e){e&&this.transition("login")}},readyAnonymous:{routeChange:function(e){e.protect&&this.transition("login")},appStateChange:function(e){e.startsWith("ready")||this.transition("loading")},userStateChange:function(){this.transition("ready")}},loading:{appStateChange:function(e){if(e.startsWith("ready")){var n=this.getRoute();t.app.user.anonymous?n.protect?this.transition("login"):this.transition("readyAnonymous"):!n.protect||o(n)?this.transition("ready"):this.transition("accessDenied")}}},login:{routeChange:function(e){e.protect||this.transition("readyAnonymous")},appStateChange:function(e){e.startsWith("ready")||this.transition("loading")},userStateChange:function(){o(this.getRoute())?this.transition("ready"):this.transition("accessDenied")}}},routeChange:function(e){this.currentRoute=e,e&&this.handle("routeChange",e)},appStateChange:function(e){this.handle("appStateChange",e)},userStateChange:function(e){this.userState=e,this.handle("userStateChange",e)},getRoute:function(){return this.currentRoute||e.current},getState:function(){return this.appState||t.app.state.status}});r.on("transition",function(){r.state.startsWith("ready")?i.status="ready":i.status=r.state}),i.$watch(function(){return e.current},function(e){n.group("navigationPathMenu").clear(),e?(r.routeChange(e.$$route),e.$$route&&angular.isFunction(e.$$route.integerate)&&a.invoke(e.$$route.integerate,e.$$route)):r.routeChange(e)}),t.$watch("app.state.status",function(e){r.appStateChange(e)}),i.$watch("app.user.anonymous",function(e){r.userStateChange(e)})}}}]),angular.module("mblowfish-core").directive("mbPreferencePage",["$compile","$controller","$preferences","$wbUtil","$rootScope","$mdTheming",function(e,t,n,a,o,i){return{restrict:"E",templateUrl:"views/directives/mb-preference-page.html",replace:!0,scope:{mbPreferenceId:"="},link:function(r,l){var s=l;r.$watch("mbPreferenceId",function(l){l&&n.page(l).then(function(n){!function(n,r,l){var s=n.$new(!1,n);s.app=o.app,a.getTemplateFor(r).then(function(n){var a=angular.element(n);i(a);var o=e(a);if(angular.isDefined(r.controller)){var c={$scope:s,$element:a},u=t(r.controller,c);r.controllerAs&&(s[r.controllerAs]=u),a.data("$ngControllerController",u)}l.empty(),l.append(o(s))})}(r,n,s)},function(){})})}}}]),angular.module("mblowfish-core").directive("mbPreloading",function(){var e="mb-preload",t="mb-preload-animate";return{restrict:"A",link:function(n,a,o){!function(e,n){n.addClass(t)}(0,a),n.$watch(function(){return n.$eval(o.mbPreloading)},function(t){t?function(t,n,a){a.mbPreloadingClass&&n.addClass(a.mbPreloadingClass),n.addClass(e)}(0,a,o):function(t,n,a){a.mbPreloadingClass&&n.addClass(a.mbPreloadingClass),n.removeClass(e)}(0,a,o)})}}}),angular.module("mblowfish-core").directive("mbTitledBlock",function(){return{replace:!0,restrict:"E",transclude:!0,scope:{mbTitle:"@?",mbIcon:"@?",mbProgress:"<?",mbMoreActions:"="},templateUrl:"views/directives/mb-titled-block.html"}}),angular.module("mblowfish-core").directive("mbTreeHeading",function(){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-heading.html"}}),angular.module("mblowfish-core").directive("mbTreeLink",function(){return{restrict:"E",scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-link.html",controller:["$scope","$navigator",function(e,t){e.isSelected=function(e){return e&&t.isPageSelected(e.link)},e.focusSection=function(e){return t.openPage(e.link)}}]}}),angular.module("mblowfish-core").directive("mbTreeToggle",["$timeout","$animateCss","$mdSidenav","$mdMedia","$rootScope",function(e,t,n,a,o){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree-toggle.html",link:function(n,a,o,i){var r=a.find("ul"),l=function(){var e;return r.addClass("no-transition"),r.css("height",""),e=r.prop("clientHeight"),r.css("height",0),r.removeClass("no-transition"),e};r&&n.$watch(function(){return i.isOpen(n.mbSection)},function(n){e(function(){!function(e){t(r,{from:{height:e?0:l()+"px"},to:{height:e?l()+"px":0},duration:.3}).start()}(n)},0,!1)})},controller:["$scope",function(e){var t=null;angular.isFunction(e.$parent.isOpen)?(e.isOpen=e.$parent.isOpen,e.toggle=e.$parent.toggle):(e.isOpen=function(e){return t===e},e.toggle=function(e){t=t===e?null:e}),this.isOpen=e.isOpen,e.isVisible=function(t){if(!t){for(var n=0;n<e.mbSection.sections.length;n++)if(!o.$eval(e.mbSection.sections[n].hidden))return!0;return!1}return!t.hidden||!o.$eval(t.hidden)}}]}}]),angular.module("mblowfish-core").directive("mbTree",["$animate","$rootScope",function(e,t){return{restrict:"E",replace:!0,scope:{mbSection:"="},templateUrl:"views/directives/mb-tree.html",link:function(e,n){e.isVisible=function(e){return!(!n.has("li").length||e.hidden&&t.$eval(e.hidden))}},controller:["$scope",function(e){var t=null;e.isOpen=function(e){return t===e},e.toggle=function(e){t=t===e?null:e}}]}}]),angular.module("mblowfish-core").directive("mbUserMenu",["$actions","$app","$mdSidenav",function(e,t,n){return{restrict:"E",replace:!0,scope:!0,templateUrl:"views/directives/mb-user-menu.html",link:function(a){a.menu=e.group("mb.user"),a.logout=t.logout,a.settings=function(){return n("settings").toggle()}},controller:"MbAccountCtrl"}}]),angular.module("mblowfish-core").directive("mbUserToolbar",["$actions",function(e){return{restrict:"E",replace:!0,templateUrl:"views/directives/mb-user-toolbar.html",link:function(t){t.menu=e.group("mb.user")},controller:"MbAccountCtrl"}}]),angular.module("mblowfish-core").factory("Action",["$injector","$navigator",function(e,t){var n=function(e){return angular.isDefined(e)||(e={}),angular.extend(this,e,{priority:e.priority||10}),this.visible=this.visible||function(){return!0},this};return n.prototype.exec=function(n){this.action?e.invoke(this.action,this):this.url&&t.openPage(this.url),n&&(n.stopPropagation(),n.preventDefault())},n}]),angular.module("mblowfish-core").factory("ActionGroup",function(){var e=function(e){angular.isDefined(e)||(e={}),angular.extend(this,e,{priority:e.priority||10,items:[]})};return e.prototype.clear=function(){this.items=[]},e}),angular.module("mblowfish-core").factory("httpRequestInterceptor",["$q","$injector",function(e,t){return{responseError:function(n){var a=t.get("$app");return 401===n.status&&a.logout(),e.reject(n)}}}]),angular.module("mblowfish-core").filter("currencyFilter",["numberFilter","translateFilter",function(e,t){return function(n,a){return n?"iran-rial"===a||"iran-tooman"===a?e(n)+" "+t(a):"bahrain-dinar"===a?e(n)+" "+t("bahrain-dinar"):"euro"===a?e(n)+" "+t("euro"):"dollar"===a?t("dollar")+" "+e(n):"pound"===a?t("pound")+" "+e(n):"iraq-dinar"===a?e(n)+" "+t("iraq-dinar"):"kuwait-dinar"===a?e(n)+" "+t("kuwait-dinar"):"oman-rial"===a?e(n)+" "+t("oman-rial"):"turkish-lira"===a?e(n)+" "+t("turkish-lira"):"uae-dirham"===a?e(n)+" "+t("uae-dirham"):e(n)+" ?":t("free")}}]),angular.module("mblowfish-core").filter("mbDate",["$rootScope",function(e){return function(t,n){if(!t)return"";try{var a=n||e.app.setting.dateFormat||e.app.config.dateFormat||"jYYYY-jMM-jDD hh:mm:ss";return"Jalaali"!==e.app.calendar&&(a=a.replace("j","")),moment.utc(t).local().format(a)}catch(e){return"-"+e.message}}}]),angular.module("mblowfish-core").run(["$notification","$help",function(e,t){window.openHelp=function(e){return t.openHelp(e)},window.alert=e.alert,window.confirm=e.confirm,window.prompt=e.prompt,window.toast=e.toast}]),angular.module("mblowfish-core").run(["$toolbar","$sidenav","$rootScope","$navigator","$route","$actions","$help",function(e,t,n,a,o,i,r){i.newAction({id:"mb.preferences",priority:15,icon:"settings",title:"Preferences",description:"Open preferences panel",visible:function(){return n.app.user.owner},action:function(){return a.openPage("preferences")},groups:["mb.toolbar.menu"]}),i.newAction({id:"mb.help",priority:15,icon:"help",title:"Help",description:"Display help in sidenav",visible:function(){return r.hasHelp(o.current)},action:function(){r.openHelp(o.current)},groups:["mb.toolbar.menu"]}),i.newAction({icon:"person_outline",title:"Profile",description:"User profile",groups:["mb.user"],action:function(){return a.openPage("users/profile")}}),i.newAction({icon:"person",title:"Account",description:"User account",groups:["mb.user"],action:function(){return a.openPage("users/account")}}),e.newToolbar({id:"dashboard",title:"Dashboard toolbar",description:"Main dashboard toolbar",controller:"MbToolbarDashboardCtrl",templateUrl:"views/toolbars/mb-dashboard.html"}),t.newSidenav({id:"navigator",title:"Navigator",description:"Navigate all path and routs of the pandel",controller:"AmdNavigatorCtrl",templateUrl:"views/sidenavs/mb-navigator.html",locked:!0,position:"start"}),t.newSidenav({id:"help",title:"Help",description:"System online help",controller:"MbHelpCtrl",templateUrl:"views/sidenavs/mb-help.html",locked:!0,visible:function(){return n.showHelp},position:"end"}),t.newSidenav({id:"settings",title:"Options",description:"User options",controller:"MbOptionsCtrl",templateUrl:"views/sidenavs/mb-options.html",locked:!1,position:"end"}),t.newSidenav({id:"messages",title:"Messages",description:"User message queue",controller:"MessagesCtrl",templateUrl:"views/sidenavs/mb-messages.html",locked:!1,position:"start"})}]),angular.module("mblowfish-core").run(["appcache","$window","$rootScope",function(e,t,n){function a(){t.location.reload()}function o(){var t;e.swapCache().then(void((t=n.app.config.update||{}).showMessage?t.autoReload?alert("Application is update. Page will be reload automatically.").then(a):confirm("Application is update. Reload the page for new version?").then(a):toast("Application is updated.")))}n.$watch("app.state.status",function(t){if(t.startsWith("ready"))return e.checkUpdate().then(o)})}]),angular.module("mblowfish-core").run(["$window","$rootScope","$location",function(e,t,n){e.ga&&t.$watch("app.config.googleAnalytic.property",function(a){a&&(e.ga("create",a,"auto"),t.$on("$routeChangeStart",function(){e.ga("send","pageview",n.path())}))})}]),angular.module("mblowfish-core").run(["$rootScope","$page","$location",function(e,t,n){e.$on("$routeChangeStart",function(){e.app.config&&(t.setTitle(e.app.config.title),t.setDescription(e.app.config.description),t.setKeywords(e.app.config.keywords),t.setFavicon(e.app.config.favicon||e.app.config.logo))}),e.$on("$routeChangeSuccess",function(){var e=n.absUrl();t.setMeta("twitter:url",e).setMeta("og:url",e)}),e.$watch(function(){var t=e.app.config;return t?t.title+"#"+t.description+"#"+t.keywords+"#"+t.logo+"#"+t.favicon:t},function(){var n;(n=e.app.config?e.app.config:null)&&(t.setTitle(t.getTitle()||n.title),t.setDescription(t.getDescription()||n.description),t.setKeywords(t.getKeywords()||n.keywords),t.setFavicon(n.favicon||n.logo),t.setMeta("og:site_name",n.title))}),t.setMeta("twitter:card","summary"),t.setMeta("og:type","object")}]),angular.module("mblowfish-core").run(["$help","$rootScope","$route",function(e,t,n){t.$watch(function(){return n.current},function(t){e.setCurrentItem(t)})}]),angular.module("mblowfish-core").run(["$resource",function(e){function t(){return this.__selections||(this.__selections=angular.isArray(this.value)?this.value:[]),this.__selections}function n(e,t){if(!angular.isDefined(t.id))return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n].id===t.id)return n}function a(e,t){var a=this.getSelection(),o=n(a,e);if(t){if(o>=0)return;a.push(e)}else o>-1&&a.splice(o,1)}function o(e){return n(this.getSelection(),e)>=0}e.newPage({label:"Account",type:"account",templateUrl:"views/resources/mb-accounts.html",controller:["$scope",function(e){e.multi=!1,this.value=e.value,this.setSelected=function(t){e.$parent.setValue(t),e.$parent.answer()},this.isSelected=function(e){return e===this.value||e.id===this.value.id}}],controllerAs:"resourceCtrl",priority:8,tags:["account"]}),e.newPage({label:"Accounts",type:"account-list",templateUrl:"views/resources/mb-accounts.html",controller:["$scope",function(e){e.multi=!0,this.value=e.value,this.setSelected=function(t,n){this._setSelected(t,n),e.$parent.setValue(this.getSelection())},this._setSelected=a,this.isSelected=o,this.getSelection=t}],controllerAs:"resourceCtrl",priority:8,tags:["accounts"]}),e.newPage({label:"Role List",type:"role-list",templateUrl:"views/resources/mb-roles.html",controller:["$scope",function(e){e.multi=!0,this.value=e.value,this.setSelected=function(t,n){this._setSelected(t,n),e.$parent.setValue(this.getSelection())},this._setSelected=a,this.isSelected=o,this.getSelection=t}],controllerAs:"resourceCtrl",priority:8,tags:["roles"]}),e.newPage({label:"Group List",type:"group-list",templateUrl:"views/resources/mb-groups.html",controller:["$scope",function(e){e.multi=!0,this.value=e.value,this.setSelected=function(t,n){this._setSelected(t,n),e.$parent.setValue(this.getSelection())},this._setSelected=a,this.isSelected=o,this.getSelection=t}],controllerAs:"resourceCtrl",priority:8,tags:["groups"]})}]),angular.module("mblowfish-core").run(["$options","$preferences",function(e,t){t.newPage({id:"local",title:"local",description:"manage dashboard locality and language.",templateUrl:"views/preferences/mb-local.html",controller:"MbLocalCtrl",icon:"language",tags:["local","language"]}).newPage({id:"brand",title:"Branding",description:"Manage application branding such as title, logo and descritpions.",templateUrl:"views/preferences/mb-brand.html",icon:"copyright",priority:2,required:!0,tags:["brand"]}).newPage({id:"google-analytic",title:"Google Analytic",templateUrl:"views/preferences/mb-google-analytic.html",description:"Enable google analytic for your application.",icon:"timeline",tags:["analysis"]}).newPage({id:"update",templateUrl:"views/preferences/mb-update.html",title:"Update application",description:"Settings of updating process and how to update the application.",icon:"autorenew"}),e.newPage({title:"Local",templateUrl:"views/options/mb-local.html",controller:"MbLocalCtrl",tags:["local"]}),e.newPage({title:"Theme",controller:"MbThemesCtrl",templateUrl:"views/options/mb-theme.html",tags:["theme"]})}]),angular.module("mblowfish-core").service("$actions",["Action","ActionGroup",function(e,t){var n=[],a={},o=[],i=[];function r(e){a[e.id]=null;var t=n.indexOf(e);if(t>-1){n.splice(t,1);for(var o=0;o<e.groups.length;o++){var i=l(e.groups[o]),r=i.items.indexOf(e);r>-1&&i.items.splice(r,1)}return e}}function l(e,n){var a=i[e];return a||((a=new t).id=e,i[a.id]=a,o.push(a)),n&&angular.extend(a,n),a}return{actions:function(){return{items:n}},newAction:function(t){var o=new e(t);a[o.id]=o,n.push(o);for(var i=0;i<o.groups.length;i++)l(o.groups[i]).items.push(o);return o.scope&&o.scope.$on("$destroy",function(){r(o)}),o},action:function(e){var t=a[e];if(t)return t},removeAction:r,groups:function(){return{items:o}},newGroup:function(e){return l(e.id,e)},group:l}}]),angular.module("mblowfish-core").service("$app",["$rootScope","$usr","$q","$cms","$translate","$http","$httpParamSerializerJQLike","$mdDateLocale","$localStorage","QueryParameter","$tenant",function(e,t,n,a,o,i,r,l,s,c,u){var d,m="angular-material-blowfish-",p="application/amd-cnf",g="{id, login, profiles{first_name, last_name, language, timezone}, roles{id, application, code_name}, groups{id, name, roles{id, application, code_name}}}",f=(new c).put("graphql","{items{id, key,value}}"),h={state:{status:"loading",stage:"starting",message:null},logs:[],user:{current:{},profile:{},anonymous:!0,administrator:!1,owner:!1,member:!1,authorized:!1},config:{},setting:{},options:{}};e.app=h;var b=!1,v=!1,w={user_loaded:!1,options_loaded:!1,configs_loaded:!1};function y(e,t){h.state.stage=e,h.state.message=t,t&&h.logs.push(t)}function $(e){for(var t=0;t<e.length;t++){var n=e[t];h.user[n.application+"_"+n.code_name]=!0}}function k(){return y("loading user info","fetch user information"),t.getAccount("current",{graphql:g}).then(function(e){if(w.user_loaded=!0,h.user={anonymous:!e.id||0===e.id,current:e},angular.isArray(e.profiles)&&(h.user.profile=e.profiles.length?e.profiles[0]:{}),y("loading user info","user information loaded successfully"),y("loading user info","check user permissions"),!h.user.anonymous){$(e.roles);for(var t=0;t<e.groups.length;t++)$(e.groups[t].roles);e.isAnonymous()?h.user.anonymous=!0:(h.user.owner=h.user.tenant_owner||h.user.core_owner||h.user.Pluf_owner||h.user.Core_owner,h.user.administrator=h.user.owner)}d.loaded()},function(e){w.user_loaded=!1,d.error(e)})}return(d=new machina.Fsm({initialize:function(){h.state.status="waiting"},namespace:"webpich.$app",initialState:"waiting",states:{waiting:{_onEnter:function(){k(),y("loading options","fetch options document"),h.options={},u.getSettings(f).then(function(e){for(var t=0;t<e.items.length;t++){var n=e.items[t];h.options[n.key]=n.value}w.options_loaded=!0,d.loaded()},function(e){d.error(e)})},start:"loading",network_error:"offline",server_error:"fail"},loading:{_onEnter:function(){y("loading setting from local storage","fetch settings"),h.setting=s.$default({dashboardModel:{}}),y("setting loaded","fetch settings"),y("loading configuration","fetch configuration document"),w.configs_loaded=!1,w.configs_fail=!1,a.getContent(m+h.key).then(function(e){return y("loading configuration","fetch configuration content"),h._acc=e,h._acc.downloadValue()},function(e){return w.configs_fail=!0,d.error(e),{}}).then(function(e){h.config=angular.isObject(e)?e:{}}).finally(function(){w.configs_loaded=!0,d.loaded()})},loaded:function(){w.user_loaded&&w.options_loaded&&w.configs_loaded?this.transition("ready"):w.user_loaded&&w.options_loaded&&w.configs_fail&&this.transition("ready_not_configured")},server_error:"fail",network_error:"offline"},ready:{network_error:"offline"},ready_not_configured:{loaded:function(){w.configs_loaded&&this.transition("ready")},network_error:"offline"},fail:{},offline:{}},loaded:function(){this.handle("loaded")},start:function(){this.handle("start")},error:function(e){404===e.status?this.handle("resource_not_found"):500===e.status?this.handle("server_error"):-1===e.status&&this.handle("network_error")}})).on("transition",function(){y("$app event handling","$app state is changed from "+h.state.status+" to "+d.state),h.state.status=d.state}),e.$watch(function(){return h.config.local||(h.config.local={}),h.setting.dir||h.config.local.dir},function(e){h.dir=e}),e.$watch(function(){return angular.isObject(h.config.local)||(h.config.local={}),h.setting.local||h.config.local.language||"en"},function(e){h.local=e,o.use(e),moment.loadPersian(),moment.locale(e);var t=moment.localeData();l.months=t._months,l.shortMonths=t._monthsShort,l.days=t._weekdays,l.shortDays=t._weekdaysMin,l.firstDayOfWeek=t._week.dow}),e.$watch(function(){return h.setting.calendar||h.config.calendar||"Gregorian"},function(e){h.calendar=e}),e.$watch("app.config",function(){"ready"!==h.state.status&&"ready_not_configured"!==h.state.status||function e(){var t;if(v=!0,!b)return h.user.core_owner||h.user.Pluf_owner||h.user.tenant_owner?(b=!0,h._acc?(v=!1,t=h._acc.uploadValue(h.config)):t=a.putContent({name:m+h.key,mimetype:p}).then(function(e){return v=!1,h._acc=e,d.loaded(),h._acc.uploadValue(h.config)},function(e){d.error(e)}),t.finally(function(){if(b=!1,v)return e()})):n.reject({data:{message:"fail"}})}()},!0),this.start=function(e){h.key=e,d.start()},this.login=function(e){return h.user.anonymous?i({method:"POST",url:"/api/v2/user/login",data:r(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){k()}):n.resolve(h.user.current)},this.logout=function(){var t=e.app.user;return t.anonymous?n.resolve(t):(e.app.user={},d.loaded(),i({method:"POST",url:"/api/v2/user/logout",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){k()},function(){e.app.user=t,d.loaded()}))},this}]),angular.module("mblowfish-core").service("$errorHandler",function(){return{handleError:function(e,t){var n=null;return 400===e.status&&t?(n="Form is not valid. Fix errors and retry.",e.data.data.forEach(function(e){t[e.name].$error={},e.constraints.map(function(n){t[e.name]&&(t[e.name].$error[n.toLowerCase()]=!0)})})):n=e.data.message,n}}}),angular.module("mblowfish-core").service("$amdExport",["FileSaver","$q","QueryParameter",function(e,t,n){return{list:function(t,n,a,o,i){var r=new a;r.put("_px_q ",a.get("_px_q")),r.put("_px_sk ",a.get("_px_sk")),r.put("_px_so ",a.get("_px_so")),r.put("_px_fk ",a.get("_px_fk")),r.put("_px_fv ",a.get("_px_fv")),r.setPage(0);var l,s="";function c(a){if(s+=function(e){var t="";return angular.forEach(e.items,function(e){var n="";angular.forEach(l,function(t){n=n+(e[t]||" ")+","}),t=t+n.slice(0,-1)+"\n"}),t}(a),!a.hasMore()){var u=new Blob([s],{type:"text/plain;charset=utf-8"});return e.saveAs(u,i+"."+o)}return r.setPage(a.next()),n.apply(t,[r]).then(c)}return n.apply(t,[r]).then(function(e){if(!l){var t=Object.keys(e.items[0]);l=[],angular.forEach(t,function(t){angular.isFunction(e.items[0][t])||angular.isObject(e.items[0][t])||l.push(t)})}var n="";return angular.forEach(l,function(e){n=n+e+","}),s=n.slice(0,-1)+"\n",c(e)})}}}]),angular.module("mblowfish-core").service("$help",["$q","$rootScope","$translate","$injector",function(e,t,n,a){var o=[],i=null;function r(e){if(!e)return null;var t=e.helpId;return angular.isFunction(e.helpId)?a.invoke(e.helpId,e):t}function l(e){i=e}function s(e){return!!r(e)}return{tip:function(e){return o.push(e),this},tips:function(){return e.resolve({items:o})},currentItem:function(){return i},setCurrentItem:l,openHelp:function(e){s(e)&&(i!==e?(l(e),t.showHelp=!0):t.showHelp=!t.showHelp)},hasHelp:s,getHelpPath:function(e){var t=r(e||i);return t?"resources/helps/"+t+"-"+n.use()+".json":null}}}]),angular.module("mblowfish-core").service("$language",["$rootScope","$q","$translate",function(e,t,n){return{language:function(t){var n=e.app.config.languages;if(n&&n.length)for(var a=0;a<n.length;a++)if(n[a].key===t)return n[a]},languages:function(){var n={items:e.app.config.languages||[]};return t.when(n)},newLanguage:function(a){if(!e.app.user.owner)return t.reject("not allowed");if(e.app.config.languages){for(var o=e.app.config.languages,i=0;i<o.length;i++)if(a.key===o[i].key)return t.reject("Sorry! Languages with the same key are not allowed.")}else e.app.config.languages=[];return e.app.config.languages.push(a),n.refresh(a.key),t.resolve(a)},deleteLanguage:function(n){if(!e.app.user.owner)return t.reject("not allowed");var a=e.app.config.languages;if(!a||!a.length)return t.reject("Not found");var o=-1;if(angular.isString(n)){for(var i=0;i<a.length;i++)if(a[i].key===n){o=i;break}}else o=a.indexOf(n);return-1!==o?(a.splice(o,1),t.resolve(n)):t.reject("Not found")},proposedLanguage:function(){return n.proposedLanguage()},refresh:function(e){return n.refresh(e)},use:function(e){return n.use(e)}}}]),angular.module("mblowfish-core").service("$metrics",["$q",function(e){this.breakMonitor=function(){},this.trackMetric=function(){return e.resolve("hi")}}]),angular.module("mblowfish-core").service("$navigator",["$q","$route","$mdDialog","$location","$window",function(e,t,n,a,o){var i=[],r=[];function l(e){var t=i;return e&&e.param._px_fk&&(t=[],"group"===e.param._px_fk&&angular.forEach(i,function(n){n.groups&&angular.isArray(n.groups)&&n.groups.indexOf(e.param._px_fv)>-1&&t.push(n)})),t}return{loadAllItems:function(t){e.resolve(l(t))},openDialog:function(e){var t={};return angular.extend(t,{controller:"AmdNavigatorDialogCtrl",parent:angular.element(document.body),clickOutsideToClose:!0,fullscreen:!0,multiple:!0},e),t.config||(t.config={}),t.locals||(t.locals={}),t.locals.config=t.config,n.show(t)},openPage:function(e,t){e&&e.toLowerCase().startsWith("http")&&o.open(e),t?a.path(e).search(t):a.path(e)},isPageSelected:function(){return!1},items:l,newItem:function(e){return e.priority=e.priority||100,i.push(e),this},deleteItem:function(e){var t=i.indexOf(e);return t>-1&&i.splice(t,1),this},groups:function(){return r},newGroup:function(e){e.id in r||(r[e.id]={id:e.id}),angular.merge(r[e.id],e)},group:function(e){return e in r||(r[e]={id:e}),r[e]}}}]),angular.module("mblowfish-core").service("$notification",["$navigator","$mdToast",function(e,t){return{toast:function(e){return t.show(t.simple().textContent(e).hideDelay(3e3))},alert:function(t){return e.openDialog({templateUrl:"views/dialogs/mb-alert.html",config:{message:t}}).then(function(){return!0},function(){return!0})},prompt:function(t,n){return e.openDialog({templateUrl:"views/dialogs/mb-prompt.html",config:{message:t,model:n}})},confirm:function(t){return e.openDialog({templateUrl:"views/dialogs/mb-confirm.html",config:{message:t}})}}}]),angular.module("mblowfish-core").service("$options",["$q",function(e){var t=[];var n={pages:function(){return e.when({items:t})},page:function(n){for(var a=0;a<t.length;a++)if(t[a].id===n)return e.when(t[a]);return e.reject({})},newPage:function(e){return t.push(e),n}};return n}]),angular.module("mblowfish-core").service("$page",["$rootScope","$rootElement",function(e,t){e.page={title:"",description:"",keywords:[],links:[]};var n=e.page;function a(e,n){var a,o=e.replace(new RegExp(":","g"),"\\:"),i=t.find("head"),r=i.find("link[key="+o+"]");for(var l in 0===r.length?(a=angular.element("<link key='"+e+"' />"),i.append(a)):a=angular.element(r[0]),n)a.attr(l,n[l]);return this}function o(e,n){var a,o=e.replace(new RegExp(":","g"),"\\:"),i=t.find("head"),r=i.find("meta[name="+o+"]");return 0===r.length?(a=angular.element("<meta name='"+e+"' content='' />"),i.append(a)):a=angular.element(r[0]),a.attr("content",n),this}function i(e,n){var a,o=e.replace(new RegExp(":","g"),"\\:"),i=t.find("head"),r=i.find("meta[name="+o+"]");return 0===r.length?(a=angular.element("<meta property='"+e+"' content='' />"),i.append(a)):a=angular.element(r[0]),a.attr("content",n),this}function i(e,n){var a,o=e.replace(new RegExp(":","g"),"\\:"),i=t.find("head"),r=i.find("meta[name="+o+"]");return 0===r.length?(a=angular.element("<meta property='"+e+"' content='' />"),i.append(a)):a=angular.element(r[0]),a.attr("content",n),this}return{setTitle:function(e){n.title=e;var a,r=t.find("head"),l=r.find("title");return 0===l.length?(a=angular.element("<title></title>"),r.append(a)):a=angular.element(l[0]),a.text(e),o("twitter:title",e),i("og:title",e),this},getTitle:function(){return n.title},setDescription:function(e){return n.description=e,o("description",e),o("twitter:description",e),i("og:description",e),this},getDescription:function(){return n.description},setKeywords:function(e){return n.keywords=e,o("keywords",e),this},getKeywords:function(){return n.keywords},setFavicon:function(e){return a("favicon-link",{href:e,rel:"icon"}),o("twitter:image",e),i("og:image",e),this},setMeta:o,setLink:a}}]),angular.module("mblowfish-core").service("$preferences",["$q","$navigator",function(e,t){var n=[];function a(e,t){return e.priority===t.priority?0:"first"===e.priority||"last"===t.priority?-1:"last"===e.priority||"first"===t.priority?1:void 0===e.priority?1:void 0===t.priority?-1:e.priority-t.priority}return{pages:function(){return n.sort(a),e.when({items:n})},page:function(t){for(var a=0,o=n.length;a<o;a++)if(n[a].id===t)return e.when(n[a]);return e.reject({message:"Not found"})},newPage:function(e){return n.push(e),this},openPage:function(e){return t.openPage("/preferences/"+e.id)}}}]),angular.module("mblowfish-core").service("$sidenav",["$q",function(e){var t=[];var n=[];var a={sidenavs:function(){return e.when({items:t})},newSidenav:function(e){t.push(e)},sidenav:function(n){for(var a=0;a<t.length;a++)if(t[a].id===n)return e.when(t[a]);return e.reject("Sidenav not found")},setDefaultSidenavs:function(e){return n=e||[],this},defaultSidenavs:function(){return n}};return a}]),angular.module("mblowfish-core").service("$toolbar",["$q",function(e){var t=[];var n=[];var a={toolbars:function(){return e.when({items:t})},newToolbar:function(e){t.push(e)},toolbar:function(n){for(var a=0;a<t.length;a++)if(t[a].id===n)return e.when(t[a]);return e.reject("Toolbar not found")},setDefaultToolbars:function(e){return n=e||[],this},defaultToolbars:function(){return n}};return a}]),angular.module("mblowfish-core").run(["$templateCache",function(e){e.put("views/dialogs/mb-alert.html",'<md-dialog layout=column ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>error</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=row layout-padding layout-align="center center" flex> <p translate>{{config.message}}</p> </md-dialog-content> </md-dialog>'),e.put("views/dialogs/mb-confirm.html",'<md-dialog layout=column ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>warning</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=answer(true)> <wb-icon aria-label=Done>done</wb-icon> </md-button> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=row layout-padding layout-align="center center" flex> <p translate>{{config.message}}</p> </md-dialog-content> </md-dialog>'),e.put("views/dialogs/mb-prompt.html",'<md-dialog layout=column ng-cloak> <md-toolbar> <div class=md-toolbar-tools> <wb-icon>input</wb-icon> <h2 translate>{{app.title}}</h2> <span flex></span> <md-button class=md-icon-button ng-click=answer(config.model)> <wb-icon aria-label=Done>done</wb-icon> </md-button> <md-button class=md-icon-button ng-click=cancel()> <wb-icon aria-label="Close dialog">close</wb-icon> </md-button> </div> </md-toolbar> <md-dialog-content layout=column layout-padding layout-align="center stretch" flex> <p translate>{{config.message}}</p> <md-input-container class=md-block> <label translate>Input value</label> <input ng-model=config.model> </md-input-container> </md-dialog-content> </md-dialog>'),e.put("views/directives/mb-captcha.html","<div>  <div vc-recaptcha ng-model=ctrl.captchaValue theme=\"app.captcha.theme || 'light'\" type=\"app.captcha.type || 'image'\" key=app.captcha.key lang=\"app.captcha.language || 'fa'\"> </div>  </div>"),e.put("views/directives/mb-dynamic-tabs.html",'<div layout=column> <md-tabs md-selected=pageIndex> <md-tab ng-repeat="tab in mbTabs"> <span translate>{{tab.title}}</span> </md-tab> </md-tabs> <div id=mb-dynamic-tabs-select-resource-children> </div> </div>'),e.put("views/directives/mb-navigation-bar.html","<div class=mb-navigation-path-bar md-colors=\"{'background-color': 'primary'}\" layout=row> <div layout=row> <md-button ng-click=goToHome() aria-label=Home class=\"mb-navigation-path-bar-item mb-navigation-path-bar-item-home\"> <md-tooltip ng-if=menu.tooltip md-delay=1500>{{'home' | translate}}</md-tooltip> <wb-icon>home</wb-icon> </md-button> </div> <div layout=row data-ng-repeat=\"menu in pathMenu.items | orderBy:['-priority']\"> <wb-icon>{{app.dir==='rtl' ? 'chevron_left' : 'chevron_right'}}</wb-icon> <md-button ng-show=isVisible(menu) ng-href={{menu.url}} ng-click=menu.exec($event); class=mb-navigation-path-bar-item> <md-tooltip ng-if=menu.tooltip md-delay=1500>{{menu.description}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> {{menu.title | translate}} </md-button>  </div> </div>"),e.put("views/directives/mb-pagination-bar.html",'<div class=wrapper-stack-toolbar-container>  <div md-colors="{background: \'primary-hue-1\'}"> <div class=md-toolbar-tools> <md-button ng-if=mbIcon md-no-ink class=md-icon-button aria-label={{mbIcon}}> <wb-icon>{{mbIcon}}</wb-icon> </md-button> <h2 flex md-truncate ng-if=mbTitle>{{mbTitle}}</h2> <md-button ng-if=mbReload class=md-icon-button aria-label=Reload ng-click=__reload()> <wb-icon>repeat</wb-icon> </md-button> <md-button ng-show=mbSortKeys class=md-icon-button aria-label=Sort ng-click="showSort = !showSort"> <wb-icon>sort</wb-icon> </md-button> <md-button ng-show=mbEnableSearch class=md-icon-button aria-label=Search ng-click="showSearch = true; focusToElement(\'searchInput\');"> <wb-icon>search</wb-icon> </md-button> <md-button ng-if=exportData class=md-icon-button aria-label=Export ng-click=exportData()> <wb-icon>save</wb-icon> </md-button> <span flex ng-if=!mbTitle></span> <md-menu ng-show=mbMoreActions.length> <md-button class=md-icon-button aria-label=Menu ng-click=$mdOpenMenu($event)> <wb-icon>more_vert</wb-icon> </md-button> <md-menu-content width=4> <md-menu-item ng-repeat="item in mbMoreActions"> <md-button ng-click=item.action() aria-label={{item.title}}> <wb-icon ng-show=item.icon>{{item.icon}}</wb-icon> <span translate="">{{ item.title }}</span> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </div>  <div class="stack-toolbar new-box-showing-animation" md-colors="{background: \'primary-hue-2\'}" ng-show=showSearch> <div class=md-toolbar-tools> <md-button style=min-width:0px ng-click="showSearch = false" aria-label=Back> <wb-icon class=icon-rotate-180-for-rtl>arrow_back</wb-icon> </md-button> <md-input-container flex md-theme=dark md-no-float class="md-block fit-input"> <input id=searchInput placeholder="{{\'Search\'|translate}}" ng-model=query.searchTerm ng-model-options={debounce:1000}> </md-input-container> </div> </div>  <div class="stack-toolbar new-box-showing-animation" md-colors="{background: \'primary-hue-2\'}" ng-show=showSort> <div class=md-toolbar-tools> <md-button style=min-width:0px ng-click="showSort = false" aria-label=Back> <wb-icon class=icon-rotate-180-for-rtl>arrow_back</wb-icon> </md-button> <h3 translate="">Sort</h3> <span style="width: 10px"></span>  <md-menu> <md-button layout=row style="text-transform: none" ng-click=$mdMenu.open()> <h3>{{mbSortKeysTitles?mbSortKeysTitles[mbSortKeys.indexOf(query.sortBy)]:query.sortBy|translate}}</h3> </md-button> <md-menu-content width=4> <md-menu-item ng-repeat="key in mbSortKeys"> <md-button ng-click="query.sortBy=key"> <wb-icon ng-if="query.sortBy===key">check_circle</wb-icon> <wb-icon ng-if="query.sortBy!==key">radio_button_unchecked</wb-icon> {{mbSortKeysTitles?mbSortKeysTitles[$index]:key|translate}} </md-button> </md-menu-item> </md-menu-content> </md-menu>  <md-menu> <md-button layout=row style="text-transform: none" ng-click=$mdMenu.open()> <wb-icon ng-if=!query.sortDesc class=icon-rotate-180>filter_list</wb-icon> <wb-icon ng-if=query.sortDesc>filter_list</wb-icon> {{query.sortDesc?\'Descending\':\'Ascending\'|translate}} </md-button> <md-menu-content width=4> <md-menu-item> <md-button ng-click="query.sortDesc=false"> <wb-icon ng-if=!query.sortDesc>check_circle</wb-icon> <wb-icon ng-if=query.sortDesc>radio_button_unchecked</wb-icon> {{\'Ascending\'|translate}} </md-button> </md-menu-item> <md-menu-item> <md-button ng-click="query.sortDesc=true"> <wb-icon ng-if=query.sortDesc>check_circle</wb-icon> <wb-icon ng-if=!query.sortDesc>radio_button_unchecked</wb-icon> {{\'Descending\'|translate}} </md-button> </md-menu-item> </md-menu-content> </md-menu> <span flex=""></span> </div> </div> </div>'),e.put("views/directives/mb-panel.html",'<div id=mb-panel-root md-theme="{{app.setting.theme|| app.config.theme || \'default\'}}" md-theme-watch ng-class="{\'mb-rtl-direction\': app.dir === \'rtl\', \'mb-ltr-direction\': app.dir !== \'rtl\'}" dir={{app.dir}} layout=column layout-fill>  <div id=mb-panel-root-ready mb-panel-toolbar-anchor ng-if="status === \'ready\'" layout=column layout-fill>   <div id=mb-panel-root-ready-anchor mb-panel-sidenav-anchor layout=row flex> <md-whiteframe layout=row id=main class="md-whiteframe-24dp main mb-page-content" ng-view flex> </md-whiteframe> </div> </div> <div id=mb-panel-root-access-denied ng-if="status === \'accessDenied\'" layout=column layout-fill> Access Denied </div> <div ng-if="status === \'loading\'" layout=column layout-align="center center" layout-fill> <h3>Loading...</h3>   <md-progress-linear style="width: 50%" md-mode=indeterminate> </md-progress-linear> <md-button ng-if="app.state.status === \'fail\'" class="md-raised md-primary" ng-click=restart() aria-label=Retry> <wb-icon>replay</wb-icon> retry </md-button> </div> <div ng-if="status === \'login\'" layout=row layout-aligne=none layout-align-gt-sm="center center" ng-controller=MbAccountCtrl flex> <div md-whiteframe=3 flex=100 flex-gt-sm=50 layout=column mb-preloading=ctrl.loadUser>  <ng-include src="\'views/partials/mb-branding-header-toolbar.html\'"></ng-include> <md-progress-linear ng-disabled="!(ctrl.loginProcess || ctrl.logoutProcess)" style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-primary md-color> </md-progress-linear>  <div style="text-align: center" layout-margin ng-show="!ctrl.loginProcess && ctrl.loginState === \'fail\'"> <p><span md-colors="{color:\'warn\'}" translate>{{loginMessage}}</span></p> </div> <form name=ctrl.myForm ng-submit=login(credit) layout=column layout-padding> <md-input-container> <label translate>Username</label> <input ng-model=credit.login name=username required> <div ng-messages=ctrl.myForm.username.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container> <md-input-container> <label translate>Password</label> <input ng-model=credit.password type=password name=password required> <div ng-messages=ctrl.myForm.password.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container>  <div ng-if="app.options[\'captcha.engine\'] === \'recaptcha\'" vc-recaptcha ng-model=credit.g_recaptcha_response theme="app.captcha.theme || \'light\'" type="app.captcha.type || \'image\'" key="app.options[\'captcha.engine.recaptcha.key\']" lang="app.setting.local || app.config.local || \'en\'"> </div> <input hide type="submit"> <div layout=column layout-align=none layout-gt-xs=row layout-align-gt-xs="end center" layout-margin> <a href=users/reset-password style="text-decoration: none" ui-sref=forget flex-order=1 flex-order-gt-xs=-1>{{\'forgot your password?\'| translate}}</a> <md-button ng-disabled=ctrl.myForm.$invalid flex-order=-1 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=login(credit)>{{\'login\'| translate}}</md-button>      </div> </form> </div> </div> </div>'),e.put("views/directives/mb-preference-page.html","<div id=mb-preference-body layout=row layout-margin flex> </div>"),e.put("views/directives/mb-titled-block.html",'<div style="border-radius: 5px; margin: 5px 5px 10px 10px; padding: 0px" md-whiteframe=4> <md-toolbar layout=row style="border-top-left-radius: 5px;border-top-right-radius: 5px; margin: 0px; padding: 0px"> <div layout=row layout-align="start center" class=md-toolbar-tools> <wb-icon ng-if=mbIcon>{{mbIcon}}</wb-icon> <h3>{{mbTitle}}</h3> </div> <md-menu layout-align="end center" ng-show=mbMoreActions.length> <md-button class=md-icon-button aria-label=Menu ng-click=$mdOpenMenu($event)> <wb-icon>more_vert</wb-icon> </md-button> <md-menu-content width=4> <md-menu-item ng-repeat="item in mbMoreActions"> <md-button ng-click=item.action() aria-label={{item.title}}> <wb-icon ng-show=item.icon>{{item.icon}}</wb-icon> <span translate="">{{ item.title}}</span> </md-button> </md-menu-item> </md-menu-content> </md-menu> </md-toolbar> <md-progress-linear ng-if=mbProgress style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-warn md-color> </md-progress-linear> <div style="margin: 8px" ng-transclude></div> </div>'),e.put("views/directives/mb-tree-heading.html",'<h2 md-colors="{color: \'primary.A100\'}" class="mb-tree-heading md-subhead"> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> {{mbSection.title}} </h2>'),e.put("views/directives/mb-tree-link.html","<md-button md-colors=\"{backgroundColor: (isSelected(mbSection.state) || $state.includes(mbSection.state)) ? 'primary.800': 'primary'}\" class=\"md-raised md-primary md-hue-1\" ng-click=focusSection(mbSection)> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> <span translate>{{mbSection.title}}</span> <span class=md-visually-hidden ng-if=isSelected(mbSection)> current page </span> </md-button>"),e.put("views/directives/mb-tree-toggle.html",'<div ng-show=isVisible()> <md-button class="md-raised md-primary md-hue-1 md-button-toggle" ng-click=toggle(mbSection) aria-controls=docs-menu-{{section.name}} aria-expanded={{isOpen(mbSection)}}> <div flex layout=row> <wb-icon ng-if=mbSection.icon>{{mbSection.icon}}</wb-icon> <span class=mb-toggle-title translate>{{mbSection.title}}</span> <span flex></span> <span aria-hidden=true class=md-toggle-icon ng-class="{toggled : isOpen(mbSection)}"> <wb-icon>keyboard_arrow_up</wb-icon> </span> </div> <span class=md-visually-hidden> Toggle {{isOpen(mbSection)? expanded : collapsed}} </span> </md-button> <ul id=docs-menu-{{mbSection.title}} class=mb-tree-toggle-list> <li ng-repeat="section in mbSection.sections" ng-if=isVisible(section)> <mb-tree-link mb-section=section ng-if="section.type === \'link\'"> </mb-tree-link> </li> </ul> </div>'),e.put("views/directives/mb-tree.html","<ul id=mb-tree-root-element class=mb-tree> <li md-colors=\"{borderBottomColor: 'background-600'}\" ng-repeat=\"section in mbSection.sections | orderBy : 'priority'\" ng-show=isVisible(section)> <mb-tree-heading mb-section=section ng-if=\"section.type === 'heading'\"> </mb-tree-heading> <mb-tree-link mb-section=section ng-if=\"section.type === 'link'\"> </mb-tree-link> <mb-tree-toggle mb-section=section ng-if=\"section.type === 'toggle'\"> </mb-tree-toggle> </li> </ul>"),e.put("views/directives/mb-user-menu.html",'<div md-colors="{\'background-color\': \'primary-hue-1\'}" class=amd-user-menu> <md-menu md-offset="0 20"> <md-button class=amd-user-menu-button ng-click=$mdOpenMenu() aria-label="Open menu"> <img height=32px class=img-circle style="border-radius: 50%; vertical-align: middle" ng-src=/api/v2/user/accounts/{{app.user.current.id}}/avatar> <span>{{app.user.profile.first_name}} {{app.user.profile.last_name}}</span> <wb-icon class=material-icons>keyboard_arrow_down</wb-icon> </md-button> <md-menu-content width=3>  <md-menu-item ng-if=menu.items.length ng-repeat="item in menu.items| orderBy:[\'-priority\']"> <md-button ng-click=item.exec($event) translate=""> <wb-icon ng-if=item.icon>{{item.icon}}</wb-icon> <span ng-if=item.title>{{item.title| translate}}</span> </md-button> </md-menu-item> <md-menu-divider ng-if=menu.items.length></md-menu-divider> <md-menu-item> <md-button ng-click=settings()> <span translate="">Settings</span> </md-button> </md-menu-item> <md-menu-item ng-if=!app.user.anonymous> <md-button ng-click=logout()> <span translate="">Logout</span> </md-button> </md-menu-item> <md-menu-item ng-if=app.user.anonymous> <md-button ng-href=users/login> <span translate="">Login</span> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div>'),e.put("views/directives/mb-user-toolbar.html",'<md-toolbar layout=row layout-align="center center"> <img width=80px class=img-circle ng-src=/api/v2/user/accounts/{{app.user.current.id}}/avatar> <md-menu md-offset="0 20"> <md-button class=capitalize ng-click=$mdOpenMenu() aria-label="Open menu"> <span>{{app.user.profile.first_name}} {{app.user.profile.last_name}}</span> <wb-icon class=material-icons>keyboard_arrow_down</wb-icon> </md-button> <md-menu-content width=3>  <md-menu-item ng-if=menu.items.length ng-repeat="item in menu.items | orderBy:[\'-priority\']"> <md-button ng-click=item.exec($event) translate> <wb-icon ng-if=item.icon>{{item.icon}}</wb-icon> <span ng-if=item.title>{{item.title | translate}}</span> </md-button> </md-menu-item> <md-menu-divider></md-menu-divider> <md-menu-item> <md-button ng-click=toggleRightSidebar();logout();>{{\'Logout\' | translate}}</md-button> </md-menu-item> </md-menu-content> </md-menu> </md-toolbar>'),e.put("views/mb-error-messages.html",'<div ng-message=403 layout=column layout-align="center center"> <wb-icon size=64px>do_not_disturb</wb-icon> <strong translate>Access denied</strong> <p translate>You are not allowed to access this item.</p> </div> <div ng-message=404 layout=column layout-align="center center"> <wb-icon size=64px>visibility_off</wb-icon> <strong translate>Not found</strong> <p translate>Requested item not found.</p> </div> <div ng-message=500 layout=column layout-align="center center"> <wb-icon size=64px>bug_report</wb-icon> <strong translate>Server error</strong> <p translate>An internal server error is occurred.</p> </div>'),e.put("views/mb-initial.html",'<div layout=column flex> <md-content layout=column flex> {{basePath}} <mb-preference-page mb-preference-id=currentStep.id> </mb-preference-page> </md-content> <md-stepper id=setting-stepper ng-show=steps.length md-mobile-step-text=false md-vertical=false md-linear=false md-alternative=true> <md-step ng-repeat="step in steps" md-label="{{step.title | translate}}"> </md-step> </md-stepper> </div>'),e.put("views/mb-passowrd-recover.html",' <md-toolbar layout-padding>  <h3>Forget Your PassWord ?</h3> </md-toolbar>  <div layout=column layout-padding> <md-input-container> <label>Username or Email</label> <input ng-model=credit.login required> </md-input-container> </div> <div layout=column layout-align=none layout-gt-sm=row layout-align-gt-sm="space-between center" layout-padding> <a ui-sref=login flex-order=1 flex-order-gt-sm=-1>Back To Login Page</a> <md-button flex-order=0 class="md-primary md-raised" ng-click=login(credit)>Send</md-button> </div>'),e.put("views/mb-preference.html","<div layout=column ng-cloak flex> <table layout=row> <tr> <td> <wb-icon wb-icon-name={{preference.icon}} size=128> </wb-icon> </td> <td> <h1 translate>{{preference.title}}</h1> <p translate>{{preference.description}}</p> </td> </tr> </table> <mb-preference-page mb-preference-id=preference.id flex> </mb-preference-page> </div>"),e.put("views/mb-preferences.html",'<md-content ng-cloak layout-padding flex> <md-grid-list md-cols-gt-md=3 md-cols=3 md-cols-md=1 md-row-height=4:3 md-gutter-gt-md=16px md-gutter-md=8px md-gutter=4px> <md-grid-tile ng-repeat="tile in preferenceTiles" md-colors="{backgroundColor: \'primary-300\'}" md-colspan-gt-sm={{tile.colspan}} md-rowspan-gt-sm={{tile.rowspan}} ng-click=openPreference(tile.page) style="cursor: pointer"> <md-grid-tile-header> <h3 style="text-align: center;font-weight: bold"> <wb-icon>{{tile.page.icon}}</wb-icon> <span translate="">{{tile.page.title}}</span> </h3> </md-grid-tile-header> <p style="text-align: justify" layout-padding translate="">{{tile.page.description}}</p> </md-grid-tile> </md-grid-list> </md-content>'),e.put("views/options/mb-local.html","<md-divider></md-divider> <md-input-container class=md-block> <label translate>Language & Local</label> <md-select ng-model=app.setting.local> <md-option ng-repeat=\"lang in languages\" ng-value=lang.key>{{lang.title | translate}}</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Direction</label> <md-select ng-model=app.setting.dir placeholder=Direction> <md-option value=rtl translate>Right to left</md-option> <md-option value=ltr translate>Left to right</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Calendar</label> <md-select ng-model=app.setting.calendar placeholder=\"\"> <md-option value=Gregorian translate>Gregorian</md-option> <md-option value=Jalaali translate>Jalaali</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Date format</label> <md-select ng-model=app.setting.dateFormat placeholder=\"\"> <md-option value=jMM-jDD-jYYYY translate> {{'2018-01-01' | mbDate:'jMM-jDD-jYYYY'}} </md-option> <md-option value=jYYYY-jMM-jDD translate> {{'2018-01-01' | mbDate:'jYYYY-jMM-jDD'}} </md-option> <md-option value=\"jYYYY jMMMM jDD\" translate> {{'2018-01-01' | mbDate:'jYYYY jMMMM jDD'}} </md-option> </md-select> </md-input-container>"),e.put("views/options/mb-theme.html",'<md-input-container class=md-block> <label translate>Theme</label> <md-select ng-model=app.setting.theme> <md-option ng-repeat="theme in themes" value={{theme.id}} translate>{{theme.label}}</md-option> </md-select> </md-input-container> <md-input-container class=md-block ng-init="app.setting.navigationPath = app.setting.navigationPath || true"> <md-switch class=md-primary name=special ng-model=app.setting.navigationPath> <sapn flex translate>Navigation path</sapn> </md-switch> </md-input-container>'),e.put("views/partials/mb-branding-header-toolbar.html"," <md-toolbar layout=row layout-padding md-colors=\"{backgroundColor: 'primary-100'}\">  <img style=\"max-width: 50%\" height=160 ng-show=app.config.logo ng-src=\"{{app.config.logo}}\"> <div> <h3>{{app.config.title}}</h3> <p>{{ app.config.description | limitTo: 250 }}{{app.config.description.length > 250 ? '...' : ''}}</p> </div> </md-toolbar>"),e.put("views/preferences/mb-brand.html",'<div layout=column layout-margin ng-cloak flex> <md-input-container class=md-block> <label translate>Title</label> <input required md-no-asterisk name=title ng-model="app.config.title"> </md-input-container> <md-input-container class=md-block> <label translate>Description</label> <input md-no-asterisk name=description ng-model="app.config.description"> </md-input-container> <wb-ui-setting-image title=Logo wb-ui-setting-clear-button=true wb-ui-setting-preview=true ng-model=app.config.logo> </wb-ui-setting-image> <wb-ui-setting-image title=Favicon wb-ui-setting-clear-button=true wb-ui-setting-preview=true ng-model=app.config.favicon> </wb-ui-setting-image> </div>'),e.put("views/preferences/mb-google-analytic.html",'<div layout=column layout-margin ng-cloak flex> <md-input-container class=md-block> <label>Google analytic property</label> <input required md-no-asterisk name=property ng-model="app.config.googleAnalytic.property"> </md-input-container> </div>'),e.put("views/preferences/mb-language.html",' <div layout=column layout-align="center center" layout-margin style="min-height: 300px" flex> <div layout=column layout-align="center start"> <p>{{\'Select default language of site:\' | translate}}</p> <md-checkbox ng-repeat="lang in languages" style="margin: 8px" ng-checked="myLanguage.key === lang.key" ng-click=setLanguage(lang) aria-label={{lang.key}}> {{lang.title | translate}} </md-checkbox> </div> </div>'),e.put("views/preferences/mb-local.html","<div layout=column layout-padding ng-cloak flex> <md-input-container class=\"md-icon-float md-block\"> <label translate>Language</label> <md-select ng-model=app.config.local.language> <md-option ng-repeat=\"lang in languages\" ng-value=lang.key>{{lang.title | translate}}</md-option> </md-select> <wb-icon style=\"cursor: pointer\" ng-click=goToManage()>settings</wb-icon> </md-input-container> <md-input-container class=md-block> <label translate>Direction</label> <md-select ng-model=app.config.local.dir placeholder=Direction> <md-option value=rtl translate>Right to left</md-option> <md-option value=ltr translate>Left to right</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Calendar</label> <md-select ng-model=app.config.local.calendar placeholder=\"\"> <md-option value=Gregorian translate>Gregorian</md-option> <md-option value=Jalaali translate>Jalaali</md-option> </md-select> </md-input-container> <md-input-container class=md-block> <label translate>Date format</label> <md-select ng-model=app.config.local.dateFormat placeholder=\"\"> <md-option value=jMM-jDD-jYYYY translate> <span translate>Month Day Year, </span> <span translate>Ex. </span> {{'2018-01-01' | mbDate:'jMM-jDD-jYYYY'}} </md-option> <md-option value=jYYYY-jMM-jDD translate> <span translate>Year Month Day, </span> <span translate>Ex. </span> {{'2018-01-01' | mbDate:'jYYYY-jMM-jDD'}} </md-option> <md-option value=\"jYYYY jMMMM jDD\" translate> <span translate>Year Month Day, </span> <span translate>Ex. </span> {{'2018-01-01' | mbDate:'jYYYY jMMMM jDD'}} </md-option> </md-select> </md-input-container> </div>"),e.put("views/preferences/mb-update.html",'<div layout=column layout-padding ng-cloak flex> <md-switch class=md-secondary ng-model=app.config.update.showMessage aria-label="Show spa update message option"> <p translate="">Show update message to customers</p> </md-switch> <md-switch class=md-secondary ng-model=app.config.update.autoReload ng-disabled=!app.config.update.showMessage aria-label="Automatically reload page option"> <p translate="">Reload the page automatically on update</p> </md-switch> </div>'),e.put("views/resources/mb-accounts.html",'<div ng-controller="MbAccountsCtrl as ctrl" ng-init="ctrl.setDataQuery(\'{id, is_active, date_joined, last_login, profiles{first_name,last_name}}\')" mb-preloading="ctrl.state === \'busy\'" layout=column flex>  <mb-pagination-bar mb-model=ctrl.queryParameter mb-reload=ctrl.reload() mb-sort-keys=ctrl.getSortKeys() mb-more-actions=ctrl.getMoreActions()> </mb-pagination-bar> <md-content mb-infinate-scroll=ctrl.loadNextPage() layout=column flex> <md-list flex> <md-list-item ng-repeat="user in ctrl.items track by user.id" ng-click="multi || resourceCtrl.setSelected(user)" class=md-3-line> <img ng-src=/api/v2/user/accounts/{{user.id}}/avatar class="md-avatar"> <div class=md-list-item-text layout=column> <h3>{{user.profiles[0].first_name}} - {{user.profiles[0].last_name}}</h3> <h4> <span ng-show=user.active> <span translate="">Active</span>, </span> <span ng-hide=user.active> <span translate="">Inactive</span>, </span> </h4> <p> <span translate="">Joined</span>: {{user.date_joined}}, <span translate="">Last Login</span>: {{user.last_login}}, </p> </div> <md-checkbox ng-if=multi class=md-secondary ng-init="user.selected = resourceCtrl.isSelected(user)" ng-model=user.selected ng-change="resourceCtrl.setSelected(user, user.selected)"> </md-checkbox> <md-divider md-inset></md-divider> </md-list-item> </md-list> </md-content> </div>'),e.put("views/resources/mb-groups.html",'<div ng-controller="MbGroupsCtrl as ctrl" ng-init="ctrl.setDataQuery(\'{id, name, descriptionS}\')" mb-preloading="ctrl.state === \'busy\'" layout=column flex>  <mb-pagination-bar mb-model=ctrl.queryParameter mb-reload=ctrl.reload() mb-sort-keys=ctrl.getProperties() mb-more-actions=ctrl.getActions()> </mb-pagination-bar> <md-content mb-infinate-scroll=ctrl.loadNextPage() layout=column flex> <md-list flex> <md-list-item ng-repeat="group in ctrl.items track by group.id" ng-click="multi || resourceCtrl.setSelected(group)" class=md-3-line> <wb-icon>group</wb-icon> <div class=md-list-item-text layout=column> <h3>{{group.name}}</h3> <h4></h4> <p>{{group.description}}</p> </div> <md-checkbox ng-if=multi class=md-secondary ng-init="group.selected = resourceCtrl.isSelected(group)" ng-model=group.selected ng-click="resourceCtrl.setSelected(group, group.selected)"> </md-checkbox> <md-divider md-inset></md-divider> </md-list-item>  </md-list> </md-content> </div>'),e.put("views/resources/mb-roles.html",'<div ng-controller="MbRolesCtrl as ctrl" ng-init="ctrl.setDataQuery(\'{id, name, descriptionS}\')" mb-preloading="ctrl.state === \'busy\'" layout=column flex>  <mb-pagination-bar mb-model=ctrl.queryParameter mb-reload=ctrl.reload() mb-sort-keys=ctrl.getProperties() mb-more-actions=ctrl.getActions()> </mb-pagination-bar> <md-content mb-infinate-scroll=ctrl.loadNextPage() layout=column flex> <md-list flex> <md-list-item ng-repeat="role in ctrl.items track by role.id" ng-click="multi || resourceCtrl.selectRole(role)" class=md-3-line> <wb-icon>accessibility</wb-icon> <div class=md-list-item-text layout=column> <h3>{{role.name}}</h3> <p>{{role.description}}</p> </div> <md-checkbox class=md-secondary ng-init="role.selected = resourceCtrl.isSelected(role)" ng-model=role.selected ng-click="resourceCtrl.setSelected(role, role.selected)"> </md-checkbox> <md-divider md-inset></md-divider> </md-list-item> </md-list> </md-content> </div>'),e.put("views/resources/mb-sidenav.html",""),e.put("views/sidenavs/mb-help.html",'<md-toolbar class=md-hue-1 layout=column layout-align=center> <div layout=row layout-align="start center"> <md-button class=md-icon-button aria-label=Close ng-click=closeHelp()> <wb-icon>close</wb-icon> </md-button> <span flex></span> <h4 translate>Help</h4> </div> </md-toolbar> <md-content mb-preloading=helpLoading layout-padding flex> <wb-group ng-model=helpContent></wb-group> </md-content>'),e.put("views/sidenavs/mb-messages.html",'<md-toolbar class=md-hue-1 layout=column layout-align=center> <div layout=row layout-align="start center"> <h4 translate="">Messages</h4> </div> </md-toolbar> <md-content mb-preloading="ctrl.status === \'working\'" mb-infinate-scroll=nextMessages() flex layout-fill> <md-list> <md-list-item class=md-2-line ng-repeat="message in ctrl.items"> <wb-icon ng-class="">mail</wb-icon> <div class=md-list-item-text> <p>{{message.message}}</p> </div> <md-button class="md-secondary md-icon-button" ng-click=remove(message) aria-label=remove> <wb-icon>delete</wb-icon> </md-button> </md-list-item> </md-list> </md-content>'),e.put("views/sidenavs/mb-navigator.html",'<md-toolbar class=md-whiteframe-z2 layout=column layout-align="start center"> <img width=128px height=128px ng-show=app.config.logo ng-src="{{app.config.logo}}"> <strong>{{app.config.title}}</strong> <p style="text-align: center">{{ app.config.description | limitTo: 100 }}{{app.config.description.length > 150 ? \'...\' : \'\'}}</p> </md-toolbar> <md-content md-colors="{backgroundColor: \'primary\'}" flex> <mb-tree mb-section=menuItems> </mb-tree> </md-content>'),e.put("views/sidenavs/mb-options.html"," <mb-user-toolbar mb-actions=userActions> </mb-user-toolbar>  <md-content layout-padding> <mb-dynamic-tabs mb-tabs=tabs> </mb-dynamic-tabs> </md-content>"),e.put("views/toolbars/mb-dashboard.html",'<div layout=row layout-align="start center"> <md-button class=md-icon-button hide-gt-sm ng-click=toggleNavigationSidenav() aria-label=Menu> <wb-icon>menu</wb-icon> </md-button> <img hide-gt-sm height=32px ng-if=app.config.logo ng-src="{{app.config.logo}}"> <strong hide-gt-sm style="padding: 0px 8px 0px 8px"> {{app.config.title}} </strong> <mb-navigation-bar hide show-gt-sm ng-show="app.setting.navigationPath !== false"> </mb-navigation-bar> </div> <div layout=row layout-align="end center">  <md-button ng-repeat="menu in scopeMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-href={{menu.url}} ng-click=menu.exec($event); class=md-icon-button> <md-tooltip ng-if=menu.tooltip md-delay=1500>{{menu.description}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button> <md-divider ng-if=scopeMenu.items.length></md-divider> <md-button ng-repeat="menu in toolbarMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-href={{menu.url}} ng-click=menu.exec($event); class=md-icon-button> <md-tooltip ng-if="menu.tooltip || menu.description" md-delay=1500>{{menu.description | translate}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button> <md-button ng-show=messageCount ng-click=toggleMessageSidenav() style="overflow: visible" class=md-icon-button> <md-tooltip md-delay=1500> <span translate="">Display list of messages</span> </md-tooltip> <wb-icon mb-badge={{messageCount}} mb-badge-fill=accent>notifications</wb-icon> </md-button> <mb-user-menu></mb-user-menu> <md-button ng-repeat="menu in userMenu.items | orderBy:[\'-priority\']" ng-show=menu.visible() ng-click=menu.exec($event) class=md-icon-button> <md-tooltip ng-if=menu.tooltip md-delay=1500>{{menu.tooltip}}</md-tooltip> <wb-icon ng-if=menu.icon>{{menu.icon}}</wb-icon> </md-button> </div>'),e.put("views/users/mb-account.html",'<md-content mb-preloading=ctrl.loadingUser class=md-padding layout-padding flex> <div layout-gt-sm=row layout=column>  <section mb-preloading=ctrl.updatingAvatar flex-order=-1 flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>User avatar</h3> <img style="border-radius: 50%" width=200px height=200px ng-show=!uploadAvatar ng-src="/api/user/{{ctrl.user.id}}/avatar"> <lf-ng-md-file-input ng-show=uploadAvatar lf-files=avatarFiles accept=image/* progress preview drag> </lf-ng-md-file-input> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button ng-show=!uploadAvatar class="md-raised md-primary" ng-click="uploadAvatar=true"> <sapn translate>edit</sapn> </md-button> <md-button ng-show=uploadAvatar class="md-raised md-primary" ng-click=updateAvatar(avatarFiles)>  <sapn translate>save</sapn> </md-button> <md-button ng-show=uploadAvatar class=md-raised ng-click="uploadAvatar=false">  <sapn translate>cancel</sapn> </md-button> </div> </section>  <section flex-gt-sm=50 md-whiteframe=1 layout=column layout-margin> <h3 translate>Account information</h3> <md-input-container> <label translate>ID</label> <input ng-model=ctrl.user.id disabled> </md-input-container> <md-input-container> <label translate>Username</label> <input ng-model=ctrl.user.login disabled> </md-input-container> <md-input-container> <label translate>EMail</label> <input ng-model=ctrl.user.email type=email disabled> </md-input-container> </section> </div> <div layout-gt-sm=row layout=column>  <section mb-preloading=ctrl.savingUser flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>General settings</h3> <form name=generalForm ng-submit=saveUser(generalForm) layout=column layout-padding> <input hide type="submit"> <div style="text-align: center" layout-margin ng-show="!ctrl.savingUser && saveUserMessage"> <p><span md-colors="{color:\'warn\'}" translate>{{changePassMessage}}</span></p> </div> <md-input-container ng-repeat="apd in apds" layout-fill> <label translate>{{apd.title}}</label> <input ng-model=ctrl.user[apd.key]> </md-input-container> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button class="md-raised md-primary" ng-click=saveUser(generalForm)> <sapn translate>update</sapn> </md-button> </div> </form> </section>  <section mb-preloading=ctrl.changingPassword flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>Password settings</h3> <p translate>Insert current password and new password to change it.</p> <form name=ctrl.passForm ng-submit="changePassword(data, ctrl.passForm)" layout=column layout-padding> <input hide type="submit"> <div style="text-align: center" layout-margin ng-show="!ctrl.changingPassword && changePassMessage"> <p><span md-colors="{color:\'warn\'}" translate>{{changePassMessage}}</span></p> </div> <md-input-container layout-fill> <label translate>current password</label> <input name=oldPass ng-model=data.oldPass type=password required> <div ng-messages=ctrl.passForm.oldPass.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container layout-fill> <label translate>new password</label> <input name=newPass ng-model=data.newPass type=password required> <div ng-messages=ctrl.passForm.newPass.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container layout-fill> <label translate>repeat new password</label> <input name=newPass2 ng-model=newPass2 type=password compare-to=data.newPass required> <div ng-messages=ctrl.passForm.newPass2.$error> <div ng-message=required>This is required.</div> <div ng-message=compareTo>password is not match.</div> </div> </md-input-container> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button class="md-raised md-primary" ng-click="changePassword(data, ctrl.passForm)" ng-disabled=ctrl.passForm.$invalid> <span translate="">Change password</span> </md-button> </div> </form> </section> </div> </md-content>'),e.put("views/users/mb-forgot-password.html",' <md-content layout=row layout-align=none layout-align-gt-sm="center center" flex> <div md-whiteframe=3 style="max-height: none" flex=100 flex-gt-sm=50 layout=column>  <ng-include src="\'views/partials/mb-branding-header-toolbar.html\'"></ng-include> <md-progress-linear ng-disabled=!ctrl.sendingToken style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-primary md-color> </md-progress-linear>  <div layout-margin> <h3 translate>recover password</h3> <p translate>recover password description</p> </div> <div style="text-align: center" layout-margin ng-show=!ctrl.sendingToken> <span ng-show="ctrl.sendTokenState === \'fail\'" md-colors="{color:\'warn\'}" translate>Failed to send token.</span> <span ng-show="ctrl.sendTokenState === \'success\'" md-colors="{color:\'primary\'}" translate>Token is sent.</span> </div> <form name=ctrl.myForm ng-submit=sendToken(credit) layout=column layout-margin> <md-input-container> <label translate>Username</label> <input ng-model=credit.login name=username> </md-input-container> <md-input-container> <label translate>Email</label> <input ng-model=credit.email name=email type=email> <div ng-messages=ctrl.myForm.email.$error> <div ng-message=email translate>Email is not valid.</div> </div> </md-input-container>     <div ng-if="app.captcha.engine===\'recaptcha\'" vc-recaptcha ng-model=credit.g_recaptcha_response theme="app.captcha.theme || \'light\'" type="app.captcha.type || \'image\'" key=app.captcha.recaptcha.key lang="app.captcha.language || \'fa\'"> </div> <input hide type="submit"> </form> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center" layout-margin> <md-button ng-disabled="(credit.email === undefined && credit.login === undefined) || ctrl.myForm.$invalid" flex-order=0 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=sendToken(credit)>{{\'send recover message\' | translate}}</md-button>     <md-button ng-click=cancel() flex-order=0 flex-order-gt-xs=0 class=md-raised> {{\'cancel\' | translate}} </md-button> </div> </div> </md-content>'),e.put("views/users/mb-login.html",' <md-content layout=row layout-align=none layout-align-gt-sm="center center" flex> <div md-whiteframe=3 style="max-height: none" flex=100 flex-gt-sm=50 layout=column>  <ng-include src="\'views/partials/mb-branding-header-toolbar.html\'"></ng-include> <md-progress-linear ng-disabled="!(ctrl.loginProcess || ctrl.logoutProcess)" style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-primary md-color> </md-progress-linear>  <div style="text-align: center" layout-margin ng-show="!ctrl.loginProcess && ctrl.loginState === \'fail\'"> <p><span md-colors="{color:\'warn\'}" translate>{{loginMessage}}</span></p> </div> <form ng-show=app.user.anonymous name=ctrl.myForm ng-submit=login(credit) layout=column layout-margin> <md-input-container> <label translate="">Username</label> <input ng-model=credit.login name=username required> <div ng-messages=ctrl.myForm.username.$error> <div ng-message=required translate="">This field is required.</div> </div> </md-input-container> <md-input-container> <label translate="">Password</label> <input ng-model=credit.password type=password name=password required> <div ng-messages=ctrl.myForm.password.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container>  <div ng-if="app.options[\'captcha.engine\']===\'recaptcha\'" vc-recaptcha ng-model=credit.g_recaptcha_response theme="app.captcha.theme || \'light\'" type="app.captcha.type || \'image\'" key="app.options[\'captcha.engine.recaptcha.key\']" lang="app.setting.local || app.config.local || \'en\'"> </div> <input hide type="submit"> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center" layout-margin> <a href=users/reset-password style="text-decoration: none" ui-sref=forget flex-order=1 flex-order-gt-xs=-1>{{\'forgot your password?\' | translate}}</a> <md-button ng-disabled=ctrl.myForm.$invalid flex-order=-1 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=login(credit)>{{\'login\' | translate}}</md-button>      </div> </form> <div layout-margin ng-show=!app.user.anonymous layout=column layout-align="none center"> <img width=150px height=150px ng-show=!uploadAvatar ng-src="{{app.user.current.avatar}}"> <h3>{{app.user.current.login}}</h3> <p translate="">you are logged in. go to one of the following options.</p> </div> <div ng-show=!app.user.anonymous layout=column layout-align=none layout-gt-xs=row layout-align-gt-xs="center center" layout-margin> <md-button ng-click=cancel() flex-order=0 flex-order-gt-xs=0 class=md-raised> <wb-icon>settings_backup_restore</wb-icon> {{\'back\' | translate}} </md-button> <md-button ng-href=users/account flex-order=1 flex-order-gt-xs=-1 class=md-raised> <wb-icon>account_circle</wb-icon> {{\'account\' | translate}} </md-button> </div> </div> </md-content>'),e.put("views/users/mb-profile.html",'<md-content class=md-padding layout-padding flex amh-preloading="ctrl.loadUser || ctrl.loadProfile || ctrl.saveProfile"> <div layout-gt-sm=row layout=column>  <section flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>Contacts information</h3> <form name=contactForm layout=column layout-padding> <md-input-container layout-fill> <label translate>Site</label> <input ng-model=ctrl.profile.site> </md-input-container> <md-input-container layout-fill> <label translate>Public email</label> <input name=email ng-model=ctrl.profile.email type=email> <div ng-messages=contactForm.email.$error> <div ng-message=email>This is required.</div> </div> </md-input-container> <md-input-container layout-fill> <label translate>Phone number</label> <input ng-model=ctrl.profile.phone> </md-input-container> <md-input-container layout-fill> <label translate>Mobile number</label> <input ng-model=ctrl.profile.mobile> </md-input-container> </form> </section>  <section flex-gt-sm=50 layout=column md-whiteframe=1 layout-margin> <h3 translate>Social networks information</h3> <form name=socialForm layout=column layout-padding> <md-input-container layout-fill> <label translate>LinkedId</label> <input ng-model=ctrl.profile.linkedin> </md-input-container> <md-input-container layout-fill> <label translate>Telegram</label> <input ng-model=ctrl.profile.telegram> </md-input-container> <md-input-container layout-fill> <label translate>Facebook</label> <input ng-model=ctrl.profile.facebook> </md-input-container> </form> </section> </div> <div layout-gt-sm=row layout=column>  <section layout=column md-whiteframe=1 layout-fill layout-margin> <h3 translate>Overall profile info</h3> <div name=overalForm layout=column layout-padding> <label layout-fill ng-repeat="(key, value) in ctrl.profile" ng-if=value> <span translate>{{key}}</span>: {{value}} </label> </div> </section> </div> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button class="md-raised md-primary" ng-click=save()>  <sapn translate>update</sapn> </md-button> </div> </md-content>'),e.put("views/users/mb-recover-password.html",' <md-content layout=row layout-align=none layout-align-gt-sm="center center" flex> <div md-whiteframe=3 style="max-height: none" flex=100 flex-gt-sm=50 layout=column>  <ng-include src="\'views/partials/mb-branding-header-toolbar.html\'"></ng-include> <md-progress-linear ng-disabled=!ctrl.changingPass style="margin: 0px; padding: 0px" md-mode=indeterminate class=md-primary md-color> </md-progress-linear>  <div layout-margin> <h3 translate>reset password</h3> <p translate>reset password description</p> </div> <div style="text-align: center" layout-margin ng-show=!ctrl.changingPass> <span ng-show="ctrl.changePassState === \'fail\'" md-colors="{color:\'warn\'}" translate>Failed to reset password.</span> <span ng-show="ctrl.changePassState === \'fail\'" md-colors="{color:\'warn\'}" translate>{{$scope.changePassMessage}}</span> <span ng-show="ctrl.changePassState === \'success\'" md-colors="{color:\'primary\'}" translate>Password is reset.</span> </div> <form name=ctrl.myForm ng-submit=changePassword(data) layout=column layout-margin> <md-input-container> <label translate>Token</label> <input ng-model=data.token name=token required> <div ng-messages=ctrl.myForm.token.$error> <div ng-message=required translate>This field is required.</div> </div> </md-input-container> <md-input-container> <label translate>New password</label> <input ng-model=data.password name=password type=password required> <div ng-messages=ctrl.myForm.password.$error> <div ng-message=required translate>This field required.</div> </div> </md-input-container> <md-input-container> <label translate>Repeat new password</label> <input name=password2 ng-model=repeatPassword type=password compare-to=data.password required> <div ng-messages=ctrl.myForm.password2.$error> <div ng-message=required translate>This field is required.</div> <div ng-message=compareTo translate>Passwords is not match.</div> </div> </md-input-container> <input hide type="submit"> </form> <div layout=column layout-align="center none" layout-gt-xs=row layout-align-gt-xs="end center"> <md-button ng-disabled=ctrl.myForm.$invalid flex-order=0 flex-order-gt-xs=1 class="md-primary md-raised" ng-click=changePassword(data)>{{\'change password\' | translate}}</md-button>     <md-button ng-click=cancel() flex-order=0 flex-order-gt-xs=0 class=md-raised> {{\'cancel\' | translate}} </md-button> </div> </div> </md-content>')}]);
